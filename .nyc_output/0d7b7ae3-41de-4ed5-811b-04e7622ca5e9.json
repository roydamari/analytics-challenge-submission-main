{"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\app.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\app.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":16},"end":{"line":6,"column":51}},"4":{"start":{"line":7,"column":13},"end":{"line":7,"column":45}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":49}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":53}},"7":{"start":{"line":10,"column":24},"end":{"line":10,"column":67}},"8":{"start":{"line":11,"column":20},"end":{"line":11,"column":59}},"9":{"start":{"line":12,"column":13},"end":{"line":12,"column":45}},"10":{"start":{"line":13,"column":25},"end":{"line":13,"column":69}},"11":{"start":{"line":14,"column":13},"end":{"line":14,"column":47}},"12":{"start":{"line":15,"column":20},"end":{"line":15,"column":61}},"13":{"start":{"line":16,"column":23},"end":{"line":16,"column":67}},"14":{"start":{"line":17,"column":27},"end":{"line":17,"column":75}},"15":{"start":{"line":18,"column":27},"end":{"line":18,"column":75}},"16":{"start":{"line":19,"column":20},"end":{"line":19,"column":61}},"17":{"start":{"line":20,"column":23},"end":{"line":20,"column":67}},"18":{"start":{"line":21,"column":28},"end":{"line":21,"column":77}},"19":{"start":{"line":22,"column":28},"end":{"line":22,"column":77}},"20":{"start":{"line":23,"column":24},"end":{"line":23,"column":69}},"21":{"start":{"line":24,"column":21},"end":{"line":24,"column":63}},"22":{"start":{"line":25,"column":24},"end":{"line":25,"column":69}},"23":{"start":{"line":26,"column":0},"end":{"line":26,"column":27}},"24":{"start":{"line":27,"column":17},"end":{"line":30,"column":1}},"25":{"start":{"line":31,"column":10},"end":{"line":31,"column":29}},"26":{"start":{"line":37,"column":0},"end":{"line":37,"column":36}},"27":{"start":{"line":38,"column":0},"end":{"line":38,"column":33}},"28":{"start":{"line":39,"column":0},"end":{"line":39,"column":63}},"29":{"start":{"line":40,"column":0},"end":{"line":40,"column":38}},"30":{"start":{"line":41,"column":0},"end":{"line":46,"column":4}},"31":{"start":{"line":47,"column":0},"end":{"line":47,"column":41}},"32":{"start":{"line":48,"column":0},"end":{"line":48,"column":38}},"33":{"start":{"line":49,"column":0},"end":{"line":49,"column":82}},"34":{"start":{"line":50,"column":0},"end":{"line":50,"column":24}},"35":{"start":{"line":51,"column":0},"end":{"line":51,"column":41}},"36":{"start":{"line":52,"column":0},"end":{"line":52,"column":47}},"37":{"start":{"line":53,"column":0},"end":{"line":53,"column":55}},"38":{"start":{"line":54,"column":0},"end":{"line":54,"column":55}},"39":{"start":{"line":55,"column":0},"end":{"line":55,"column":41}},"40":{"start":{"line":56,"column":0},"end":{"line":56,"column":47}},"41":{"start":{"line":57,"column":0},"end":{"line":57,"column":57}},"42":{"start":{"line":58,"column":0},"end":{"line":58,"column":57}},"43":{"start":{"line":59,"column":0},"end":{"line":59,"column":43}},"44":{"start":{"line":60,"column":0},"end":{"line":60,"column":48}},"45":{"start":{"line":61,"column":0},"end":{"line":63,"column":3}},"46":{"start":{"line":62,"column":4},"end":{"line":62,"column":21}},"47":{"start":{"line":69,"column":0},"end":{"line":69,"column":79}},"48":{"start":{"line":70,"column":11},"end":{"line":70,"column":15}},"49":{"start":{"line":71,"column":0},"end":{"line":73,"column":3}},"50":{"start":{"line":72,"column":4},"end":{"line":72,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":61,"column":17},"end":{"line":61,"column":18}},"loc":{"start":{"line":61,"column":37},"end":{"line":63,"column":1}},"line":61},"2":{"name":"(anonymous_2)","decl":{"start":{"line":71,"column":17},"end":{"line":71,"column":18}},"loc":{"start":{"line":71,"column":29},"end":{"line":73,"column":1}},"line":71}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":20,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":0,"47":1,"48":1,"49":1,"50":1},"f":{"0":20,"1":0,"2":1},"b":{"0":[1,1,1],"1":[12,8],"2":[20,20]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/app.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/app.ts"],"names":[],"mappings":"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","sourcesContent":["import express, { Request, Response } from \"express\";\r\nimport path from \"path\";\r\nimport logger from \"morgan\";\r\nimport passport from \"passport\";\r\nimport session from \"express-session\";\r\nimport bodyParser from \"body-parser\";\r\nimport cors from \"cors\";\r\nimport paginate from \"express-paginate\";\r\n\r\nimport auth from \"./auth\";\r\nimport userRoutes from \"./user-routes\";\r\nimport contactRoutes from \"./contact-routes\";\r\nimport bankAccountRoutes from \"./bankaccount-routes\";\r\nimport transactionRoutes from \"./transaction-routes\";\r\nimport likeRoutes from \"./like-routes\";\r\nimport commentRoutes from \"./comment-routes\";\r\nimport notificationRoutes from \"./notification-routes\";\r\nimport bankTransferRoutes from \"./banktransfer-routes\";\r\nimport testDataRoutes from \"./testdata-routes\";\r\nimport geoDataRoutes from \"./geoData-routes\";\r\nimport eventRoutes from \"./event-routes\";\r\nimport sessionsRoutes from \"./sessions-routes\";\r\n\r\nrequire(\"dotenv\").config();\r\n\r\nconst corsOption = {\r\n  origin: \"http://localhost:3000\",\r\n  credentials: true,\r\n};\r\n\r\nconst app = express();\r\n\r\n/* istanbul ignore next */\r\n// @ts-ignore\r\nif (global.__coverage__) {\r\n  require(\"@cypress/code-coverage/middleware/express\")(app);\r\n}\r\n\r\napp.use(cors(corsOption));\r\napp.use(logger(\"dev\"));\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(bodyParser.json());\r\n\r\napp.use(\r\n  session({\r\n    secret: \"session secret\",\r\n    resave: false,\r\n    saveUninitialized: false,\r\n    unset: \"destroy\",\r\n  })\r\n);\r\napp.use(passport.initialize());\r\napp.use(passport.session());\r\n\r\napp.use(paginate.middleware(+process.env.PAGINATION_PAGE_SIZE!));\r\n\r\napp.use(auth);\r\napp.use(\"/users\", userRoutes);\r\napp.use(\"/contacts\", contactRoutes);\r\napp.use(\"/bankAccounts\", bankAccountRoutes);\r\napp.use(\"/transactions\", transactionRoutes);\r\napp.use(\"/likes\", likeRoutes);\r\napp.use(\"/comments\", commentRoutes);\r\napp.use(\"/notifications\", notificationRoutes);\r\napp.use(\"/bankTransfers\", bankTransferRoutes);\r\napp.use(\"/events\", eventRoutes);\r\napp.use(\"/sessions\", sessionsRoutes);\r\napp.get(\"/ping\", (req: Request, res: Response) => {\r\n  res.send(\"pong\");\r\n});\r\n// app.use(\"/geoData\", geoDataRoutes);\r\n\r\n/* istanbul ignore next */\r\nif (process.env.NODE_ENV === \"test\" || process.env.NODE_ENV === \"development\") {\r\n  app.use(\"/testData\", testDataRoutes);\r\n}\r\n\r\napp.use(express.static(path.join(__dirname, \"../public\")));\r\nconst PORT = 3001;\r\napp.listen(PORT, () => {\r\n  console.log(\"app is running on port \" + PORT);\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8d929f3d497f2e29ecbef7d0bdb679efc2da3fbd","contentHash":"31b82f3fafe1a14155e102eca164fde4060f0e5fb5f49b432946faaa69803755"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\auth.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\auth.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":53}},"5":{"start":{"line":8,"column":16},"end":{"line":8,"column":51}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":38}},"7":{"start":{"line":10,"column":20},"end":{"line":10,"column":54}},"8":{"start":{"line":11,"column":13},"end":{"line":11,"column":39}},"9":{"start":{"line":13,"column":0},"end":{"line":24,"column":4}},"10":{"start":{"line":14,"column":15},"end":{"line":14,"column":57}},"11":{"start":{"line":15,"column":25},"end":{"line":15,"column":58}},"12":{"start":{"line":16,"column":4},"end":{"line":18,"column":5}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":62}},"14":{"start":{"line":20,"column":4},"end":{"line":22,"column":5}},"15":{"start":{"line":21,"column":8},"end":{"line":21,"column":62}},"16":{"start":{"line":23,"column":4},"end":{"line":23,"column":28}},"17":{"start":{"line":25,"column":0},"end":{"line":27,"column":3}},"18":{"start":{"line":26,"column":4},"end":{"line":26,"column":24}},"19":{"start":{"line":28,"column":0},"end":{"line":31,"column":3}},"20":{"start":{"line":29,"column":15},"end":{"line":29,"column":41}},"21":{"start":{"line":30,"column":4},"end":{"line":30,"column":21}},"22":{"start":{"line":33,"column":0},"end":{"line":41,"column":3}},"23":{"start":{"line":34,"column":4},"end":{"line":39,"column":5}},"24":{"start":{"line":35,"column":8},"end":{"line":35,"column":61}},"25":{"start":{"line":38,"column":8},"end":{"line":38,"column":43}},"26":{"start":{"line":40,"column":4},"end":{"line":40,"column":33}},"27":{"start":{"line":42,"column":0},"end":{"line":48,"column":3}},"28":{"start":{"line":43,"column":4},"end":{"line":43,"column":35}},"29":{"start":{"line":44,"column":4},"end":{"line":44,"column":17}},"30":{"start":{"line":45,"column":4},"end":{"line":47,"column":7}},"31":{"start":{"line":46,"column":8},"end":{"line":46,"column":26}},"32":{"start":{"line":49,"column":0},"end":{"line":57,"column":3}},"33":{"start":{"line":58,"column":0},"end":{"line":58,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":41},"end":{"line":13,"column":42}},"loc":{"start":{"line":13,"column":77},"end":{"line":24,"column":1}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":25,"column":33},"end":{"line":25,"column":34}},"loc":{"start":{"line":25,"column":55},"end":{"line":27,"column":1}},"line":25},"3":{"name":"(anonymous_3)","decl":{"start":{"line":28,"column":35},"end":{"line":28,"column":36}},"loc":{"start":{"line":28,"column":55},"end":{"line":31,"column":1}},"line":28},"4":{"name":"(anonymous_4)","decl":{"start":{"line":33,"column":64},"end":{"line":33,"column":65}},"loc":{"start":{"line":33,"column":84},"end":{"line":41,"column":1}},"line":33},"5":{"name":"(anonymous_5)","decl":{"start":{"line":42,"column":23},"end":{"line":42,"column":24}},"loc":{"start":{"line":42,"column":43},"end":{"line":48,"column":1}},"line":42},"6":{"name":"(anonymous_6)","decl":{"start":{"line":45,"column":24},"end":{"line":45,"column":25}},"loc":{"start":{"line":45,"column":39},"end":{"line":47,"column":5}},"line":45},"7":{"name":"(anonymous_7)","decl":{"start":{"line":49,"column":25},"end":{"line":49,"column":26}},"loc":{"start":{"line":49,"column":45},"end":{"line":57,"column":1}},"line":49}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":16,"column":4},"end":{"line":18,"column":5}},"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":18,"column":5}},{"start":{"line":16,"column":4},"end":{"line":18,"column":5}}],"line":16},"4":{"loc":{"start":{"line":20,"column":4},"end":{"line":22,"column":5}},"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":22,"column":5}},{"start":{"line":20,"column":4},"end":{"line":22,"column":5}}],"line":20},"5":{"loc":{"start":{"line":34,"column":4},"end":{"line":39,"column":5}},"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":39,"column":5}},{"start":{"line":34,"column":4},"end":{"line":39,"column":5}}],"line":34}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":1,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":1,"33":1},"f":{"0":3,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"b":{"0":[1,1,1],"1":[0,3],"2":[3,3],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/auth.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/auth.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,sDAAgC;AAChC,oDAAqD;AAErD,uCAAoD;AAEpD,IAAM,aAAa,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,QAAQ,CAAC;AACzD,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,wCAAwC;AACxC,kBAAQ,CAAC,GAAG,CACV,IAAI,aAAa,CAAC,UAAU,QAAgB,EAAE,QAAgB,EAAE,IAAc;IAC5E,IAAM,IAAI,GAAG,oBAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;IAE7C,IAAM,cAAc,GAAG,iCAAiC,CAAC;IACzD,IAAI,CAAC,IAAI,EAAE;QACT,OAAO,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC,CAAC;KACvD;IAED,oBAAoB;IACpB,IAAI,CAAC,kBAAM,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE;QAChD,OAAO,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC,CAAC;KACvD;IAED,OAAO,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AAC1B,CAAC,CAAC,CACH,CAAC;AAEF,kBAAQ,CAAC,aAAa,CAAC,UAAU,IAAU,EAAE,IAAI;IAC/C,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;AACtB,CAAC,CAAC,CAAC;AAEH,kBAAQ,CAAC,eAAe,CAAC,UAAU,EAAU,EAAE,IAAI;IACjD,IAAM,IAAI,GAAG,sBAAW,CAAC,EAAE,CAAC,CAAC;IAC7B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACnB,CAAC,CAAC,CAAC;AAEH,wBAAwB;AACxB,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,kBAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,UAAC,GAAY,EAAE,GAAa;IAChF,IAAI,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE;QACrB,GAAG,CAAC,OAAQ,CAAC,MAAM,CAAC,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,oBAAoB;KAC5E;SAAM;QACL,GAAG,CAAC,OAAQ,CAAC,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;KACrC;IAED,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AAC/B,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,UAAC,GAAY,EAAE,GAAa;IACjD,GAAG,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;IAC/B,GAAG,CAAC,MAAM,EAAE,CAAC;IACb,GAAG,CAAC,OAAQ,CAAC,OAAO,CAAC,UAAU,GAAG;QAChC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;IACpB,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,UAAC,GAAG,EAAE,GAAG;IAChC,0BAA0B;IAC1B,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;QACb,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,sBAAsB,EAAE,CAAC,CAAC;KACzD;SAAM;QACL,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;KAC1C;AACH,CAAC,CAAC,CAAC;AAEH,kBAAe,MAAM,CAAC","sourcesContent":["import bcrypt from \"bcryptjs\";\r\nimport passport from \"passport\";\r\nimport express, { Request, Response } from \"express\";\r\nimport { User } from \"../src/models/user\";\r\nimport { getUserBy, getUserById } from \"./database\";\r\n\r\nconst LocalStrategy = require(\"passport-local\").Strategy;\r\nconst router = express.Router();\r\n\r\n// configure passport for local strategy\r\npassport.use(\r\n  new LocalStrategy(function (username: string, password: string, done: Function) {\r\n    const user = getUserBy(\"username\", username);\r\n\r\n    const failureMessage = \"Incorrect username or password.\";\r\n    if (!user) {\r\n      return done(null, false, { message: failureMessage });\r\n    }\r\n\r\n    // validate password\r\n    if (!bcrypt.compareSync(password, user.password)) {\r\n      return done(null, false, { message: failureMessage });\r\n    }\r\n\r\n    return done(null, user);\r\n  })\r\n);\r\n\r\npassport.serializeUser(function (user: User, done) {\r\n  done(null, user.id);\r\n});\r\n\r\npassport.deserializeUser(function (id: string, done) {\r\n  const user = getUserById(id);\r\n  done(null, user);\r\n});\r\n\r\n// authentication routes\r\nrouter.post(\"/login\", passport.authenticate(\"local\"), (req: Request, res: Response): void => {\r\n  if (req.body.remember) {\r\n    req.session!.cookie.maxAge = 24 * 60 * 60 * 1000 * 30; // Expire in 30 days\r\n  } else {\r\n    req.session!.cookie.expires = false;\r\n  }\r\n\r\n  res.send({ user: req.user });\r\n});\r\n\r\nrouter.post(\"/logout\", (req: Request, res: Response): void => {\r\n  res.clearCookie(\"connect.sid\");\r\n  req.logout();\r\n  req.session!.destroy(function (err) {\r\n    res.redirect(\"/\");\r\n  });\r\n});\r\n\r\nrouter.get(\"/checkAuth\", (req, res) => {\r\n  /* istanbul ignore next */\r\n  if (!req.user) {\r\n    res.status(401).json({ error: \"User is unauthorized\" });\r\n  } else {\r\n    res.status(200).json({ user: req.user });\r\n  }\r\n});\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"af180c742ad2076c754f9aa88dd6d40c7f837642","contentHash":"ad6747884d693efa35211c3bad311ea52b24c28a23e99bf1e4e419610857536e"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\database.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\database.ts","statementMap":{"0":{"start":{"line":2,"column":15},"end":{"line":12,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":10,"column":6}},"2":{"start":{"line":4,"column":8},"end":{"line":8,"column":9}},"3":{"start":{"line":4,"column":24},"end":{"line":4,"column":25}},"4":{"start":{"line":4,"column":31},"end":{"line":4,"column":47}},"5":{"start":{"line":5,"column":12},"end":{"line":5,"column":29}},"6":{"start":{"line":6,"column":12},"end":{"line":7,"column":28}},"7":{"start":{"line":6,"column":29},"end":{"line":7,"column":28}},"8":{"start":{"line":7,"column":16},"end":{"line":7,"column":28}},"9":{"start":{"line":9,"column":8},"end":{"line":9,"column":17}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":43}},"11":{"start":{"line":13,"column":22},"end":{"line":15,"column":1}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":62}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":62}},"14":{"start":{"line":17,"column":0},"end":{"line":17,"column":3079}},"15":{"start":{"line":18,"column":13},"end":{"line":18,"column":45}},"16":{"start":{"line":19,"column":17},"end":{"line":19,"column":53}},"17":{"start":{"line":20,"column":11},"end":{"line":20,"column":41}},"18":{"start":{"line":21,"column":13},"end":{"line":21,"column":28}},"19":{"start":{"line":22,"column":11},"end":{"line":22,"column":31}},"20":{"start":{"line":23,"column":17},"end":{"line":23,"column":36}},"21":{"start":{"line":24,"column":14},"end":{"line":24,"column":47}},"22":{"start":{"line":25,"column":17},"end":{"line":25,"column":68}},"23":{"start":{"line":26,"column":16},"end":{"line":26,"column":51}},"24":{"start":{"line":27,"column":15},"end":{"line":27,"column":39}},"25":{"start":{"line":28,"column":16},"end":{"line":28,"column":51}},"26":{"start":{"line":29,"column":25},"end":{"line":29,"column":65}},"27":{"start":{"line":30,"column":17},"end":{"line":30,"column":24}},"28":{"start":{"line":31,"column":20},"end":{"line":31,"column":30}},"29":{"start":{"line":32,"column":25},"end":{"line":32,"column":39}},"30":{"start":{"line":33,"column":24},"end":{"line":33,"column":38}},"31":{"start":{"line":34,"column":17},"end":{"line":34,"column":24}},"32":{"start":{"line":35,"column":20},"end":{"line":35,"column":30}},"33":{"start":{"line":36,"column":25},"end":{"line":36,"column":40}},"34":{"start":{"line":37,"column":26},"end":{"line":37,"column":41}},"35":{"start":{"line":38,"column":18},"end":{"line":38,"column":26}},"36":{"start":{"line":39,"column":19},"end":{"line":39,"column":74}},"37":{"start":{"line":40,"column":14},"end":{"line":40,"column":50}},"38":{"start":{"line":41,"column":9},"end":{"line":41,"column":33}},"39":{"start":{"line":42,"column":0},"end":{"line":47,"column":2}},"40":{"start":{"line":43,"column":19},"end":{"line":43,"column":131}},"41":{"start":{"line":45,"column":4},"end":{"line":45,"column":34}},"42":{"start":{"line":46,"column":4},"end":{"line":46,"column":11}},"43":{"start":{"line":48,"column":0},"end":{"line":48,"column":73}},"44":{"start":{"line":48,"column":36},"end":{"line":48,"column":70}},"45":{"start":{"line":49,"column":0},"end":{"line":51,"column":2}},"46":{"start":{"line":50,"column":4},"end":{"line":50,"column":107}},"47":{"start":{"line":52,"column":0},"end":{"line":52,"column":79}},"48":{"start":{"line":52,"column":46},"end":{"line":52,"column":76}},"49":{"start":{"line":53,"column":0},"end":{"line":61,"column":2}},"50":{"start":{"line":55,"column":17},"end":{"line":59,"column":16}},"51":{"start":{"line":60,"column":4},"end":{"line":60,"column":18}},"52":{"start":{"line":62,"column":0},"end":{"line":70,"column":2}},"53":{"start":{"line":64,"column":17},"end":{"line":68,"column":16}},"54":{"start":{"line":69,"column":4},"end":{"line":69,"column":18}},"55":{"start":{"line":71,"column":0},"end":{"line":78,"column":2}},"56":{"start":{"line":72,"column":17},"end":{"line":76,"column":16}},"57":{"start":{"line":77,"column":4},"end":{"line":77,"column":18}},"58":{"start":{"line":80,"column":0},"end":{"line":80,"column":91}},"59":{"start":{"line":80,"column":46},"end":{"line":80,"column":88}},"60":{"start":{"line":81,"column":0},"end":{"line":84,"column":3}},"61":{"start":{"line":82,"column":15},"end":{"line":82,"column":52}},"62":{"start":{"line":83,"column":4},"end":{"line":83,"column":30}},"63":{"start":{"line":85,"column":0},"end":{"line":87,"column":2}},"64":{"start":{"line":86,"column":4},"end":{"line":86,"column":144}},"65":{"start":{"line":86,"column":113},"end":{"line":86,"column":132}},"66":{"start":{"line":88,"column":0},"end":{"line":93,"column":2}},"67":{"start":{"line":89,"column":16},"end":{"line":89,"column":37}},"68":{"start":{"line":90,"column":4},"end":{"line":92,"column":14}},"69":{"start":{"line":94,"column":0},"end":{"line":96,"column":2}},"70":{"start":{"line":95,"column":4},"end":{"line":95,"column":48}},"71":{"start":{"line":99,"column":0},"end":{"line":99,"column":92}},"72":{"start":{"line":99,"column":44},"end":{"line":99,"column":89}},"73":{"start":{"line":100,"column":0},"end":{"line":100,"column":56}},"74":{"start":{"line":100,"column":38},"end":{"line":100,"column":53}},"75":{"start":{"line":101,"column":0},"end":{"line":101,"column":76}},"76":{"start":{"line":101,"column":38},"end":{"line":101,"column":73}},"77":{"start":{"line":102,"column":0},"end":{"line":102,"column":100}},"78":{"start":{"line":102,"column":50},"end":{"line":102,"column":97}},"79":{"start":{"line":103,"column":0},"end":{"line":122,"column":2}},"80":{"start":{"line":104,"column":19},"end":{"line":104,"column":72}},"81":{"start":{"line":105,"column":15},"end":{"line":119,"column":5}},"82":{"start":{"line":120,"column":4},"end":{"line":120,"column":19}},"83":{"start":{"line":121,"column":4},"end":{"line":121,"column":16}},"84":{"start":{"line":123,"column":15},"end":{"line":125,"column":1}},"85":{"start":{"line":124,"column":4},"end":{"line":124,"column":42}},"86":{"start":{"line":126,"column":0},"end":{"line":129,"column":2}},"87":{"start":{"line":127,"column":15},"end":{"line":127,"column":42}},"88":{"start":{"line":128,"column":4},"end":{"line":128,"column":56}},"89":{"start":{"line":131,"column":0},"end":{"line":131,"column":75}},"90":{"start":{"line":131,"column":37},"end":{"line":131,"column":72}},"91":{"start":{"line":132,"column":0},"end":{"line":132,"column":94}},"92":{"start":{"line":132,"column":45},"end":{"line":132,"column":91}},"93":{"start":{"line":134,"column":0},"end":{"line":134,"column":78}},"94":{"start":{"line":134,"column":39},"end":{"line":134,"column":75}},"95":{"start":{"line":135,"column":0},"end":{"line":135,"column":98}},"96":{"start":{"line":135,"column":46},"end":{"line":135,"column":95}},"97":{"start":{"line":136,"column":0},"end":{"line":136,"column":96}},"98":{"start":{"line":136,"column":48},"end":{"line":136,"column":93}},"99":{"start":{"line":137,"column":0},"end":{"line":200,"column":2}},"100":{"start":{"line":139,"column":18},"end":{"line":143,"column":16}},"101":{"start":{"line":141,"column":35},"end":{"line":141,"column":66}},"102":{"start":{"line":144,"column":17},"end":{"line":148,"column":16}},"103":{"start":{"line":149,"column":19},"end":{"line":149,"column":21}},"104":{"start":{"line":151,"column":4},"end":{"line":153,"column":5}},"105":{"start":{"line":151,"column":17},"end":{"line":151,"column":24}},"106":{"start":{"line":152,"column":8},"end":{"line":152,"column":35}},"107":{"start":{"line":154,"column":26},"end":{"line":197,"column":6}},"108":{"start":{"line":156,"column":34},"end":{"line":156,"column":100}},"109":{"start":{"line":156,"column":67},"end":{"line":156,"column":97}},"110":{"start":{"line":157,"column":28},"end":{"line":157,"column":90}},"111":{"start":{"line":158,"column":30},"end":{"line":158,"column":62}},"112":{"start":{"line":160,"column":31},"end":{"line":167,"column":10}},"113":{"start":{"line":162,"column":26},"end":{"line":162,"column":45}},"114":{"start":{"line":163,"column":12},"end":{"line":166,"column":15}},"115":{"start":{"line":164,"column":31},"end":{"line":164,"column":50}},"116":{"start":{"line":165,"column":16},"end":{"line":165,"column":44}},"117":{"start":{"line":168,"column":30},"end":{"line":168,"column":32}},"118":{"start":{"line":169,"column":22},"end":{"line":183,"column":9}},"119":{"start":{"line":170,"column":32},"end":{"line":170,"column":34}},"120":{"start":{"line":171,"column":37},"end":{"line":171,"column":114}},"121":{"start":{"line":171,"column":78},"end":{"line":171,"column":111}},"122":{"start":{"line":172,"column":31},"end":{"line":174,"column":19}},"123":{"start":{"line":175,"column":30},"end":{"line":175,"column":70}},"124":{"start":{"line":176,"column":12},"end":{"line":181,"column":15}},"125":{"start":{"line":177,"column":39},"end":{"line":177,"column":58}},"126":{"start":{"line":178,"column":16},"end":{"line":180,"column":17}},"127":{"start":{"line":179,"column":20},"end":{"line":179,"column":57}},"128":{"start":{"line":182,"column":12},"end":{"line":182,"column":55}},"129":{"start":{"line":185,"column":8},"end":{"line":187,"column":9}},"130":{"start":{"line":185,"column":21},"end":{"line":185,"column":31}},"131":{"start":{"line":186,"column":12},"end":{"line":186,"column":23}},"132":{"start":{"line":188,"column":23},"end":{"line":188,"column":94}},"133":{"start":{"line":189,"column":37},"end":{"line":191,"column":30}},"134":{"start":{"line":190,"column":61},"end":{"line":190,"column":111}},"135":{"start":{"line":192,"column":8},"end":{"line":196,"column":10}},"136":{"start":{"line":198,"column":4},"end":{"line":198,"column":133}},"137":{"start":{"line":198,"column":54},"end":{"line":198,"column":75}},"138":{"start":{"line":198,"column":108},"end":{"line":198,"column":125}},"139":{"start":{"line":199,"column":4},"end":{"line":199,"column":27}},"140":{"start":{"line":202,"column":0},"end":{"line":202,"column":98}},"141":{"start":{"line":202,"column":47},"end":{"line":202,"column":95}},"142":{"start":{"line":203,"column":0},"end":{"line":203,"column":102}},"143":{"start":{"line":203,"column":48},"end":{"line":203,"column":99}},"144":{"start":{"line":204,"column":0},"end":{"line":206,"column":2}},"145":{"start":{"line":205,"column":4},"end":{"line":205,"column":106}},"146":{"start":{"line":207,"column":0},"end":{"line":207,"column":100}},"147":{"start":{"line":207,"column":50},"end":{"line":207,"column":97}},"148":{"start":{"line":208,"column":0},"end":{"line":212,"column":2}},"149":{"start":{"line":209,"column":4},"end":{"line":209,"column":48}},"150":{"start":{"line":211,"column":4},"end":{"line":211,"column":50}},"151":{"start":{"line":213,"column":0},"end":{"line":216,"column":2}},"152":{"start":{"line":214,"column":18},"end":{"line":214,"column":55}},"153":{"start":{"line":215,"column":4},"end":{"line":215,"column":50}},"154":{"start":{"line":217,"column":0},"end":{"line":230,"column":2}},"155":{"start":{"line":218,"column":20},"end":{"line":218,"column":39}},"156":{"start":{"line":219,"column":18},"end":{"line":226,"column":5}},"157":{"start":{"line":228,"column":17},"end":{"line":228,"column":47}},"158":{"start":{"line":229,"column":4},"end":{"line":229,"column":18}},"159":{"start":{"line":232,"column":0},"end":{"line":232,"column":107}},"160":{"start":{"line":232,"column":51},"end":{"line":232,"column":104}},"161":{"start":{"line":233,"column":0},"end":{"line":233,"column":90}},"162":{"start":{"line":233,"column":45},"end":{"line":233,"column":87}},"163":{"start":{"line":234,"column":0},"end":{"line":236,"column":2}},"164":{"start":{"line":235,"column":4},"end":{"line":235,"column":60}},"165":{"start":{"line":237,"column":0},"end":{"line":241,"column":2}},"166":{"start":{"line":238,"column":4},"end":{"line":238,"column":57}},"167":{"start":{"line":240,"column":4},"end":{"line":240,"column":58}},"168":{"start":{"line":242,"column":0},"end":{"line":258,"column":2}},"169":{"start":{"line":243,"column":20},"end":{"line":243,"column":39}},"170":{"start":{"line":244,"column":22},"end":{"line":254,"column":5}},"171":{"start":{"line":256,"column":17},"end":{"line":256,"column":55}},"172":{"start":{"line":257,"column":4},"end":{"line":257,"column":18}},"173":{"start":{"line":259,"column":0},"end":{"line":264,"column":2}},"174":{"start":{"line":260,"column":4},"end":{"line":263,"column":17}},"175":{"start":{"line":272,"column":0},"end":{"line":274,"column":2}},"176":{"start":{"line":273,"column":4},"end":{"line":273,"column":61}},"177":{"start":{"line":275,"column":0},"end":{"line":275,"column":110}},"178":{"start":{"line":275,"column":55},"end":{"line":275,"column":107}},"179":{"start":{"line":289,"column":0},"end":{"line":289,"column":106}},"180":{"start":{"line":289,"column":51},"end":{"line":289,"column":103}},"181":{"start":{"line":290,"column":0},"end":{"line":290,"column":90}},"182":{"start":{"line":290,"column":45},"end":{"line":290,"column":87}},"183":{"start":{"line":291,"column":0},"end":{"line":291,"column":106}},"184":{"start":{"line":291,"column":50},"end":{"line":291,"column":103}},"185":{"start":{"line":292,"column":0},"end":{"line":294,"column":2}},"186":{"start":{"line":293,"column":4},"end":{"line":293,"column":87}},"187":{"start":{"line":295,"column":0},"end":{"line":297,"column":2}},"188":{"start":{"line":296,"column":4},"end":{"line":296,"column":115}},"189":{"start":{"line":298,"column":0},"end":{"line":298,"column":133}},"190":{"start":{"line":298,"column":49},"end":{"line":298,"column":130}},"191":{"start":{"line":299,"column":0},"end":{"line":309,"column":2}},"192":{"start":{"line":300,"column":19},"end":{"line":300,"column":62}},"193":{"start":{"line":301,"column":17},"end":{"line":301,"column":58}},"194":{"start":{"line":302,"column":23},"end":{"line":302,"column":73}},"195":{"start":{"line":303,"column":21},"end":{"line":303,"column":69}},"196":{"start":{"line":304,"column":16},"end":{"line":304,"column":63}},"197":{"start":{"line":305,"column":19},"end":{"line":305,"column":69}},"198":{"start":{"line":306,"column":4},"end":{"line":308,"column":43}},"199":{"start":{"line":310,"column":0},"end":{"line":312,"column":2}},"200":{"start":{"line":311,"column":4},"end":{"line":311,"column":212}},"201":{"start":{"line":311,"column":50},"end":{"line":311,"column":90}},"202":{"start":{"line":311,"column":147},"end":{"line":311,"column":207}},"203":{"start":{"line":313,"column":0},"end":{"line":326,"column":3}},"204":{"start":{"line":314,"column":35},"end":{"line":314,"column":97}},"205":{"start":{"line":315,"column":22},"end":{"line":315,"column":55}},"206":{"start":{"line":316,"column":27},"end":{"line":319,"column":6}},"207":{"start":{"line":320,"column":4},"end":{"line":324,"column":5}},"208":{"start":{"line":321,"column":17},"end":{"line":321,"column":61}},"209":{"start":{"line":321,"column":80},"end":{"line":321,"column":97}},"210":{"start":{"line":321,"column":114},"end":{"line":321,"column":129}},"211":{"start":{"line":322,"column":17},"end":{"line":322,"column":63}},"212":{"start":{"line":322,"column":77},"end":{"line":322,"column":89}},"213":{"start":{"line":322,"column":103},"end":{"line":322,"column":115}},"214":{"start":{"line":323,"column":8},"end":{"line":323,"column":171}},"215":{"start":{"line":325,"column":4},"end":{"line":325,"column":28}},"216":{"start":{"line":327,"column":0},"end":{"line":332,"column":3}},"217":{"start":{"line":328,"column":4},"end":{"line":330,"column":5}},"218":{"start":{"line":329,"column":8},"end":{"line":329,"column":28}},"219":{"start":{"line":331,"column":4},"end":{"line":331,"column":128}},"220":{"start":{"line":331,"column":48},"end":{"line":331,"column":110}},"221":{"start":{"line":333,"column":0},"end":{"line":343,"column":3}},"222":{"start":{"line":334,"column":4},"end":{"line":336,"column":5}},"223":{"start":{"line":335,"column":8},"end":{"line":335,"column":28}},"224":{"start":{"line":337,"column":4},"end":{"line":342,"column":21}},"225":{"start":{"line":338,"column":8},"end":{"line":341,"column":11}},"226":{"start":{"line":344,"column":0},"end":{"line":346,"column":3}},"227":{"start":{"line":345,"column":4},"end":{"line":345,"column":95}},"228":{"start":{"line":347,"column":0},"end":{"line":349,"column":2}},"229":{"start":{"line":348,"column":4},"end":{"line":348,"column":85}},"230":{"start":{"line":350,"column":0},"end":{"line":352,"column":2}},"231":{"start":{"line":351,"column":4},"end":{"line":351,"column":170}},"232":{"start":{"line":351,"column":65},"end":{"line":351,"column":127}},"233":{"start":{"line":353,"column":0},"end":{"line":353,"column":93}},"234":{"start":{"line":353,"column":54},"end":{"line":353,"column":90}},"235":{"start":{"line":354,"column":0},"end":{"line":356,"column":2}},"236":{"start":{"line":355,"column":4},"end":{"line":355,"column":96}},"237":{"start":{"line":357,"column":0},"end":{"line":360,"column":2}},"238":{"start":{"line":358,"column":33},"end":{"line":358,"column":74}},"239":{"start":{"line":359,"column":4},"end":{"line":359,"column":160}},"240":{"start":{"line":359,"column":92},"end":{"line":359,"column":153}},"241":{"start":{"line":361,"column":0},"end":{"line":363,"column":2}},"242":{"start":{"line":362,"column":4},"end":{"line":362,"column":109}},"243":{"start":{"line":364,"column":0},"end":{"line":367,"column":6}},"244":{"start":{"line":364,"column":63},"end":{"line":367,"column":3}},"245":{"start":{"line":368,"column":0},"end":{"line":383,"column":2}},"246":{"start":{"line":369,"column":4},"end":{"line":382,"column":5}},"247":{"start":{"line":370,"column":17},"end":{"line":370,"column":61}},"248":{"start":{"line":370,"column":80},"end":{"line":370,"column":97}},"249":{"start":{"line":370,"column":114},"end":{"line":370,"column":129}},"250":{"start":{"line":371,"column":17},"end":{"line":371,"column":63}},"251":{"start":{"line":371,"column":77},"end":{"line":371,"column":89}},"252":{"start":{"line":371,"column":103},"end":{"line":371,"column":115}},"253":{"start":{"line":372,"column":8},"end":{"line":375,"column":10}},"254":{"start":{"line":378,"column":8},"end":{"line":381,"column":10}},"255":{"start":{"line":384,"column":0},"end":{"line":384,"column":46}},"256":{"start":{"line":385,"column":0},"end":{"line":393,"column":2}},"257":{"start":{"line":386,"column":4},"end":{"line":392,"column":5}},"258":{"start":{"line":387,"column":8},"end":{"line":387,"column":106}},"259":{"start":{"line":394,"column":0},"end":{"line":396,"column":2}},"260":{"start":{"line":395,"column":4},"end":{"line":395,"column":117}},"261":{"start":{"line":407,"column":0},"end":{"line":409,"column":3}},"262":{"start":{"line":408,"column":4},"end":{"line":408,"column":80}},"263":{"start":{"line":410,"column":0},"end":{"line":441,"column":2}},"264":{"start":{"line":411,"column":17},"end":{"line":411,"column":44}},"265":{"start":{"line":412,"column":19},"end":{"line":412,"column":69}},"266":{"start":{"line":413,"column":22},"end":{"line":426,"column":5}},"267":{"start":{"line":427,"column":27},"end":{"line":427,"column":55}},"268":{"start":{"line":429,"column":4},"end":{"line":439,"column":5}},"269":{"start":{"line":430,"column":8},"end":{"line":430,"column":56}},"270":{"start":{"line":431,"column":8},"end":{"line":431,"column":59}},"271":{"start":{"line":432,"column":8},"end":{"line":434,"column":11}},"272":{"start":{"line":435,"column":8},"end":{"line":435,"column":127}},"273":{"start":{"line":438,"column":8},"end":{"line":438,"column":128}},"274":{"start":{"line":440,"column":4},"end":{"line":440,"column":28}},"275":{"start":{"line":442,"column":22},"end":{"line":446,"column":1}},"276":{"start":{"line":443,"column":4},"end":{"line":443,"column":56}},"277":{"start":{"line":445,"column":4},"end":{"line":445,"column":58}},"278":{"start":{"line":447,"column":0},"end":{"line":460,"column":2}},"279":{"start":{"line":448,"column":22},"end":{"line":448,"column":67}},"280":{"start":{"line":449,"column":19},"end":{"line":449,"column":39}},"281":{"start":{"line":449,"column":54},"end":{"line":449,"column":76}},"282":{"start":{"line":450,"column":17},"end":{"line":450,"column":46}},"283":{"start":{"line":451,"column":19},"end":{"line":451,"column":50}},"284":{"start":{"line":453,"column":4},"end":{"line":458,"column":5}},"285":{"start":{"line":454,"column":8},"end":{"line":454,"column":58}},"286":{"start":{"line":455,"column":8},"end":{"line":455,"column":57}},"287":{"start":{"line":456,"column":8},"end":{"line":456,"column":59}},"288":{"start":{"line":457,"column":8},"end":{"line":457,"column":125}},"289":{"start":{"line":459,"column":4},"end":{"line":459,"column":70}},"290":{"start":{"line":462,"column":0},"end":{"line":462,"column":92}},"291":{"start":{"line":462,"column":44},"end":{"line":462,"column":89}},"292":{"start":{"line":463,"column":0},"end":{"line":463,"column":92}},"293":{"start":{"line":463,"column":43},"end":{"line":463,"column":89}},"294":{"start":{"line":464,"column":0},"end":{"line":464,"column":76}},"295":{"start":{"line":464,"column":38},"end":{"line":464,"column":73}},"296":{"start":{"line":465,"column":0},"end":{"line":465,"column":127}},"297":{"start":{"line":465,"column":61},"end":{"line":465,"column":124}},"298":{"start":{"line":466,"column":0},"end":{"line":477,"column":2}},"299":{"start":{"line":467,"column":15},"end":{"line":474,"column":5}},"300":{"start":{"line":475,"column":20},"end":{"line":475,"column":34}},"301":{"start":{"line":476,"column":4},"end":{"line":476,"column":21}},"302":{"start":{"line":478,"column":0},"end":{"line":492,"column":2}},"303":{"start":{"line":479,"column":13},"end":{"line":479,"column":54}},"304":{"start":{"line":479,"column":67},"end":{"line":479,"column":78}},"305":{"start":{"line":479,"column":93},"end":{"line":479,"column":106}},"306":{"start":{"line":480,"column":15},"end":{"line":480,"column":56}},"307":{"start":{"line":493,"column":15},"end":{"line":497,"column":1}},"308":{"start":{"line":494,"column":4},"end":{"line":494,"column":42}},"309":{"start":{"line":496,"column":4},"end":{"line":496,"column":40}},"310":{"start":{"line":499,"column":0},"end":{"line":499,"column":98}},"311":{"start":{"line":499,"column":47},"end":{"line":499,"column":95}},"312":{"start":{"line":500,"column":0},"end":{"line":500,"column":98}},"313":{"start":{"line":500,"column":46},"end":{"line":500,"column":95}},"314":{"start":{"line":501,"column":0},"end":{"line":501,"column":82}},"315":{"start":{"line":501,"column":41},"end":{"line":501,"column":79}},"316":{"start":{"line":502,"column":0},"end":{"line":504,"column":2}},"317":{"start":{"line":503,"column":4},"end":{"line":503,"column":70}},"318":{"start":{"line":505,"column":0},"end":{"line":517,"column":2}},"319":{"start":{"line":506,"column":18},"end":{"line":514,"column":5}},"320":{"start":{"line":515,"column":23},"end":{"line":515,"column":43}},"321":{"start":{"line":516,"column":4},"end":{"line":516,"column":24}},"322":{"start":{"line":518,"column":0},"end":{"line":532,"column":2}},"323":{"start":{"line":519,"column":13},"end":{"line":519,"column":54}},"324":{"start":{"line":519,"column":67},"end":{"line":519,"column":78}},"325":{"start":{"line":519,"column":93},"end":{"line":519,"column":106}},"326":{"start":{"line":520,"column":18},"end":{"line":520,"column":71}},"327":{"start":{"line":533,"column":18},"end":{"line":537,"column":1}},"328":{"start":{"line":534,"column":4},"end":{"line":534,"column":48}},"329":{"start":{"line":536,"column":4},"end":{"line":536,"column":46}},"330":{"start":{"line":539,"column":0},"end":{"line":541,"column":2}},"331":{"start":{"line":540,"column":4},"end":{"line":540,"column":57}},"332":{"start":{"line":542,"column":0},"end":{"line":544,"column":2}},"333":{"start":{"line":543,"column":4},"end":{"line":543,"column":58}},"334":{"start":{"line":545,"column":0},"end":{"line":547,"column":2}},"335":{"start":{"line":546,"column":4},"end":{"line":546,"column":130}},"336":{"start":{"line":548,"column":0},"end":{"line":561,"column":2}},"337":{"start":{"line":549,"column":23},"end":{"line":558,"column":5}},"338":{"start":{"line":559,"column":4},"end":{"line":559,"column":35}},"339":{"start":{"line":560,"column":4},"end":{"line":560,"column":24}},"340":{"start":{"line":562,"column":0},"end":{"line":575,"column":2}},"341":{"start":{"line":563,"column":23},"end":{"line":572,"column":5}},"342":{"start":{"line":573,"column":4},"end":{"line":573,"column":35}},"343":{"start":{"line":574,"column":4},"end":{"line":574,"column":24}},"344":{"start":{"line":576,"column":0},"end":{"line":589,"column":2}},"345":{"start":{"line":577,"column":23},"end":{"line":586,"column":5}},"346":{"start":{"line":587,"column":4},"end":{"line":587,"column":35}},"347":{"start":{"line":588,"column":4},"end":{"line":588,"column":24}},"348":{"start":{"line":590,"column":23},"end":{"line":592,"column":1}},"349":{"start":{"line":591,"column":4},"end":{"line":591,"column":58}},"350":{"start":{"line":593,"column":0},"end":{"line":608,"column":2}},"351":{"start":{"line":594,"column":4},"end":{"line":607,"column":7}},"352":{"start":{"line":595,"column":8},"end":{"line":606,"column":9}},"353":{"start":{"line":596,"column":12},"end":{"line":596,"column":94}},"354":{"start":{"line":598,"column":13},"end":{"line":606,"column":9}},"355":{"start":{"line":599,"column":12},"end":{"line":599,"column":91}},"356":{"start":{"line":609,"column":0},"end":{"line":612,"column":2}},"357":{"start":{"line":610,"column":23},"end":{"line":610,"column":70}},"358":{"start":{"line":611,"column":4},"end":{"line":611,"column":72}},"359":{"start":{"line":613,"column":0},"end":{"line":628,"column":2}},"360":{"start":{"line":614,"column":23},"end":{"line":614,"column":70}},"361":{"start":{"line":615,"column":22},"end":{"line":615,"column":76}},"362":{"start":{"line":616,"column":4},"end":{"line":618,"column":5}},"363":{"start":{"line":617,"column":8},"end":{"line":617,"column":72}},"364":{"start":{"line":619,"column":4},"end":{"line":622,"column":5}},"365":{"start":{"line":620,"column":19},"end":{"line":620,"column":59}},"366":{"start":{"line":621,"column":8},"end":{"line":621,"column":63}},"367":{"start":{"line":623,"column":4},"end":{"line":626,"column":5}},"368":{"start":{"line":624,"column":22},"end":{"line":624,"column":68}},"369":{"start":{"line":625,"column":8},"end":{"line":625,"column":66}},"370":{"start":{"line":627,"column":4},"end":{"line":627,"column":66}},"371":{"start":{"line":629,"column":0},"end":{"line":631,"column":2}},"372":{"start":{"line":630,"column":4},"end":{"line":630,"column":218}},"373":{"start":{"line":630,"column":51},"end":{"line":630,"column":92}},"374":{"start":{"line":630,"column":151},"end":{"line":630,"column":213}},"375":{"start":{"line":643,"column":0},"end":{"line":643,"column":108}},"376":{"start":{"line":643,"column":54},"end":{"line":643,"column":105}},"377":{"start":{"line":658,"column":14},"end":{"line":658,"column":27}},"378":{"start":{"line":659,"column":14},"end":{"line":659,"column":28}},"379":{"start":{"line":660,"column":13},"end":{"line":660,"column":25}},"380":{"start":{"line":661,"column":14},"end":{"line":661,"column":24}},"381":{"start":{"line":663,"column":14},"end":{"line":663,"column":48}},"382":{"start":{"line":664,"column":15},"end":{"line":664,"column":17}},"383":{"start":{"line":665,"column":4},"end":{"line":669,"column":5}},"384":{"start":{"line":665,"column":17},"end":{"line":665,"column":18}},"385":{"start":{"line":666,"column":19},"end":{"line":666,"column":47}},"386":{"start":{"line":667,"column":18},"end":{"line":667,"column":83}},"387":{"start":{"line":668,"column":8},"end":{"line":668,"column":23}},"388":{"start":{"line":670,"column":4},"end":{"line":670,"column":16}},"389":{"start":{"line":673,"column":15},"end":{"line":673,"column":96}},"390":{"start":{"line":674,"column":14},"end":{"line":674,"column":16}},"391":{"start":{"line":675,"column":4},"end":{"line":679,"column":5}},"392":{"start":{"line":675,"column":17},"end":{"line":675,"column":18}},"393":{"start":{"line":676,"column":19},"end":{"line":676,"column":49}},"394":{"start":{"line":677,"column":18},"end":{"line":677,"column":95}},"395":{"start":{"line":678,"column":8},"end":{"line":678,"column":22}},"396":{"start":{"line":680,"column":4},"end":{"line":680,"column":15}},"397":{"start":{"line":682,"column":0},"end":{"line":723,"column":2}},"398":{"start":{"line":683,"column":15},"end":{"line":683,"column":25}},"399":{"start":{"line":684,"column":17},"end":{"line":684,"column":32}},"400":{"start":{"line":685,"column":21},"end":{"line":685,"column":76}},"401":{"start":{"line":686,"column":19},"end":{"line":686,"column":45}},"402":{"start":{"line":687,"column":23},"end":{"line":695,"column":16}},"403":{"start":{"line":689,"column":35},"end":{"line":689,"column":100}},"404":{"start":{"line":690,"column":34},"end":{"line":690,"column":59}},"405":{"start":{"line":692,"column":19},"end":{"line":692,"column":39}},"406":{"start":{"line":693,"column":8},"end":{"line":693,"column":81}},"407":{"start":{"line":696,"column":19},"end":{"line":696,"column":45}},"408":{"start":{"line":697,"column":4},"end":{"line":699,"column":5}},"409":{"start":{"line":698,"column":8},"end":{"line":698,"column":67}},"410":{"start":{"line":700,"column":20},"end":{"line":707,"column":6}},"411":{"start":{"line":701,"column":20},"end":{"line":704,"column":52}},"412":{"start":{"line":702,"column":23},"end":{"line":702,"column":39}},"413":{"start":{"line":703,"column":12},"end":{"line":703,"column":85}},"414":{"start":{"line":705,"column":8},"end":{"line":705,"column":74}},"415":{"start":{"line":706,"column":8},"end":{"line":706,"column":21}},"416":{"start":{"line":708,"column":4},"end":{"line":714,"column":7}},"417":{"start":{"line":709,"column":8},"end":{"line":712,"column":9}},"418":{"start":{"line":710,"column":23},"end":{"line":710,"column":51}},"419":{"start":{"line":711,"column":12},"end":{"line":711,"column":39}},"420":{"start":{"line":713,"column":8},"end":{"line":713,"column":32}},"421":{"start":{"line":715,"column":20},"end":{"line":715,"column":22}},"422":{"start":{"line":716,"column":4},"end":{"line":721,"column":7}},"423":{"start":{"line":717,"column":19},"end":{"line":717,"column":41}},"424":{"start":{"line":718,"column":8},"end":{"line":718,"column":38}},"425":{"start":{"line":719,"column":8},"end":{"line":719,"column":42}},"426":{"start":{"line":720,"column":8},"end":{"line":720,"column":29}},"427":{"start":{"line":722,"column":4},"end":{"line":722,"column":21}},"428":{"start":{"line":724,"column":0},"end":{"line":761,"column":2}},"429":{"start":{"line":725,"column":17},"end":{"line":725,"column":33}},"430":{"start":{"line":726,"column":23},"end":{"line":734,"column":16}},"431":{"start":{"line":728,"column":35},"end":{"line":728,"column":120}},"432":{"start":{"line":729,"column":34},"end":{"line":729,"column":59}},"433":{"start":{"line":731,"column":19},"end":{"line":731,"column":39}},"434":{"start":{"line":732,"column":8},"end":{"line":732,"column":93}},"435":{"start":{"line":735,"column":19},"end":{"line":735,"column":44}},"436":{"start":{"line":736,"column":4},"end":{"line":738,"column":5}},"437":{"start":{"line":737,"column":8},"end":{"line":737,"column":70}},"438":{"start":{"line":739,"column":20},"end":{"line":745,"column":6}},"439":{"start":{"line":740,"column":20},"end":{"line":743,"column":52}},"440":{"start":{"line":741,"column":23},"end":{"line":741,"column":39}},"441":{"start":{"line":742,"column":12},"end":{"line":742,"column":97}},"442":{"start":{"line":744,"column":8},"end":{"line":744,"column":21}},"443":{"start":{"line":746,"column":4},"end":{"line":752,"column":7}},"444":{"start":{"line":747,"column":8},"end":{"line":750,"column":9}},"445":{"start":{"line":748,"column":23},"end":{"line":748,"column":51}},"446":{"start":{"line":749,"column":12},"end":{"line":749,"column":39}},"447":{"start":{"line":751,"column":8},"end":{"line":751,"column":32}},"448":{"start":{"line":753,"column":20},"end":{"line":753,"column":22}},"449":{"start":{"line":754,"column":4},"end":{"line":759,"column":7}},"450":{"start":{"line":755,"column":19},"end":{"line":755,"column":41}},"451":{"start":{"line":756,"column":8},"end":{"line":756,"column":38}},"452":{"start":{"line":757,"column":8},"end":{"line":757,"column":42}},"453":{"start":{"line":758,"column":8},"end":{"line":758,"column":29}},"454":{"start":{"line":760,"column":4},"end":{"line":760,"column":21}},"455":{"start":{"line":762,"column":0},"end":{"line":769,"column":2}},"456":{"start":{"line":763,"column":23},"end":{"line":767,"column":16}},"457":{"start":{"line":765,"column":35},"end":{"line":765,"column":75}},"458":{"start":{"line":766,"column":34},"end":{"line":766,"column":59}},"459":{"start":{"line":768,"column":4},"end":{"line":768,"column":24}},"460":{"start":{"line":770,"column":0},"end":{"line":778,"column":2}},"461":{"start":{"line":771,"column":23},"end":{"line":776,"column":16}},"462":{"start":{"line":773,"column":35},"end":{"line":773,"column":79}},"463":{"start":{"line":774,"column":34},"end":{"line":774,"column":59}},"464":{"start":{"line":777,"column":4},"end":{"line":777,"column":24}},"465":{"start":{"line":779,"column":0},"end":{"line":779,"column":21}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":42},"end":{"line":2,"column":43}},"loc":{"start":{"line":2,"column":54},"end":{"line":12,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":3,"column":32},"end":{"line":3,"column":33}},"loc":{"start":{"line":3,"column":44},"end":{"line":10,"column":5}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":56},"end":{"line":13,"column":57}},"loc":{"start":{"line":13,"column":71},"end":{"line":15,"column":1}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":42,"column":23},"end":{"line":42,"column":24}},"loc":{"start":{"line":42,"column":35},"end":{"line":47,"column":1}},"line":42},"4":{"name":"(anonymous_4)","decl":{"start":{"line":48,"column":22},"end":{"line":48,"column":23}},"loc":{"start":{"line":48,"column":34},"end":{"line":48,"column":72}},"line":48},"5":{"name":"(anonymous_5)","decl":{"start":{"line":49,"column":35},"end":{"line":49,"column":36}},"loc":{"start":{"line":49,"column":47},"end":{"line":51,"column":1}},"line":49},"6":{"name":"(anonymous_6)","decl":{"start":{"line":52,"column":26},"end":{"line":52,"column":27}},"loc":{"start":{"line":52,"column":44},"end":{"line":52,"column":78}},"line":52},"7":{"name":"(anonymous_7)","decl":{"start":{"line":53,"column":19},"end":{"line":53,"column":20}},"loc":{"start":{"line":53,"column":49},"end":{"line":61,"column":1}},"line":53},"8":{"name":"(anonymous_8)","decl":{"start":{"line":62,"column":16},"end":{"line":62,"column":17}},"loc":{"start":{"line":62,"column":46},"end":{"line":70,"column":1}},"line":62},"9":{"name":"(anonymous_9)","decl":{"start":{"line":71,"column":22},"end":{"line":71,"column":23}},"loc":{"start":{"line":71,"column":47},"end":{"line":78,"column":1}},"line":71},"10":{"name":"(anonymous_10)","decl":{"start":{"line":80,"column":27},"end":{"line":80,"column":28}},"loc":{"start":{"line":80,"column":44},"end":{"line":80,"column":90}},"line":80},"11":{"name":"(anonymous_11)","decl":{"start":{"line":81,"column":33},"end":{"line":81,"column":34}},"loc":{"start":{"line":81,"column":66},"end":{"line":84,"column":1}},"line":81},"12":{"name":"(anonymous_12)","decl":{"start":{"line":85,"column":24},"end":{"line":85,"column":25}},"loc":{"start":{"line":85,"column":57},"end":{"line":87,"column":1}},"line":85},"13":{"name":"(anonymous_13)","decl":{"start":{"line":86,"column":93},"end":{"line":86,"column":94}},"loc":{"start":{"line":86,"column":111},"end":{"line":86,"column":134}},"line":86},"14":{"name":"(anonymous_14)","decl":{"start":{"line":88,"column":22},"end":{"line":88,"column":23}},"loc":{"start":{"line":88,"column":39},"end":{"line":93,"column":1}},"line":88},"15":{"name":"(anonymous_15)","decl":{"start":{"line":94,"column":32},"end":{"line":94,"column":33}},"loc":{"start":{"line":94,"column":59},"end":{"line":96,"column":1}},"line":94},"16":{"name":"(anonymous_16)","decl":{"start":{"line":99,"column":20},"end":{"line":99,"column":21}},"loc":{"start":{"line":99,"column":42},"end":{"line":99,"column":91}},"line":99},"17":{"name":"(anonymous_17)","decl":{"start":{"line":100,"column":20},"end":{"line":100,"column":21}},"loc":{"start":{"line":100,"column":36},"end":{"line":100,"column":55}},"line":100},"18":{"name":"(anonymous_18)","decl":{"start":{"line":101,"column":22},"end":{"line":101,"column":23}},"loc":{"start":{"line":101,"column":36},"end":{"line":101,"column":75}},"line":101},"19":{"name":"(anonymous_19)","decl":{"start":{"line":102,"column":28},"end":{"line":102,"column":29}},"loc":{"start":{"line":102,"column":48},"end":{"line":102,"column":99}},"line":102},"20":{"name":"(anonymous_20)","decl":{"start":{"line":103,"column":21},"end":{"line":103,"column":22}},"loc":{"start":{"line":103,"column":44},"end":{"line":122,"column":1}},"line":103},"21":{"name":"(anonymous_21)","decl":{"start":{"line":123,"column":15},"end":{"line":123,"column":16}},"loc":{"start":{"line":123,"column":31},"end":{"line":125,"column":1}},"line":123},"22":{"name":"(anonymous_22)","decl":{"start":{"line":126,"column":25},"end":{"line":126,"column":26}},"loc":{"start":{"line":126,"column":50},"end":{"line":129,"column":1}},"line":126},"23":{"name":"(anonymous_23)","decl":{"start":{"line":131,"column":23},"end":{"line":131,"column":24}},"loc":{"start":{"line":131,"column":35},"end":{"line":131,"column":74}},"line":131},"24":{"name":"(anonymous_24)","decl":{"start":{"line":132,"column":21},"end":{"line":132,"column":22}},"loc":{"start":{"line":132,"column":43},"end":{"line":132,"column":93}},"line":132},"25":{"name":"(anonymous_25)","decl":{"start":{"line":134,"column":23},"end":{"line":134,"column":24}},"loc":{"start":{"line":134,"column":37},"end":{"line":134,"column":77}},"line":134},"26":{"name":"(anonymous_26)","decl":{"start":{"line":135,"column":22},"end":{"line":135,"column":23}},"loc":{"start":{"line":135,"column":44},"end":{"line":135,"column":97}},"line":135},"27":{"name":"(anonymous_27)","decl":{"start":{"line":136,"column":28},"end":{"line":136,"column":29}},"loc":{"start":{"line":136,"column":46},"end":{"line":136,"column":95}},"line":136},"28":{"name":"(anonymous_28)","decl":{"start":{"line":137,"column":29},"end":{"line":137,"column":30}},"loc":{"start":{"line":137,"column":41},"end":{"line":200,"column":1}},"line":137},"29":{"name":"(anonymous_29)","decl":{"start":{"line":141,"column":16},"end":{"line":141,"column":17}},"loc":{"start":{"line":141,"column":33},"end":{"line":141,"column":68}},"line":141},"30":{"name":"(anonymous_30)","decl":{"start":{"line":154,"column":39},"end":{"line":154,"column":40}},"loc":{"start":{"line":154,"column":70},"end":{"line":197,"column":5}},"line":154},"31":{"name":"(anonymous_31)","decl":{"start":{"line":156,"column":47},"end":{"line":156,"column":48}},"loc":{"start":{"line":156,"column":65},"end":{"line":156,"column":99}},"line":156},"32":{"name":"(anonymous_32)","decl":{"start":{"line":161,"column":20},"end":{"line":161,"column":21}},"loc":{"start":{"line":161,"column":34},"end":{"line":167,"column":9}},"line":161},"33":{"name":"(anonymous_33)","decl":{"start":{"line":163,"column":40},"end":{"line":163,"column":41}},"loc":{"start":{"line":163,"column":54},"end":{"line":166,"column":13}},"line":163},"34":{"name":"(anonymous_34)","decl":{"start":{"line":169,"column":22},"end":{"line":169,"column":23}},"loc":{"start":{"line":169,"column":35},"end":{"line":183,"column":9}},"line":169},"35":{"name":"(anonymous_35)","decl":{"start":{"line":171,"column":59},"end":{"line":171,"column":60}},"loc":{"start":{"line":171,"column":76},"end":{"line":171,"column":113}},"line":171},"36":{"name":"(anonymous_36)","decl":{"start":{"line":176,"column":32},"end":{"line":176,"column":33}},"loc":{"start":{"line":176,"column":46},"end":{"line":181,"column":13}},"line":176},"37":{"name":"(anonymous_37)","decl":{"start":{"line":190,"column":34},"end":{"line":190,"column":35}},"loc":{"start":{"line":190,"column":59},"end":{"line":190,"column":113}},"line":190},"38":{"name":"(anonymous_38)","decl":{"start":{"line":198,"column":36},"end":{"line":198,"column":37}},"loc":{"start":{"line":198,"column":52},"end":{"line":198,"column":77}},"line":198},"39":{"name":"(anonymous_39)","decl":{"start":{"line":198,"column":86},"end":{"line":198,"column":87}},"loc":{"start":{"line":198,"column":106},"end":{"line":198,"column":127}},"line":198},"40":{"name":"(anonymous_40)","decl":{"start":{"line":202,"column":23},"end":{"line":202,"column":24}},"loc":{"start":{"line":202,"column":45},"end":{"line":202,"column":97}},"line":202},"41":{"name":"(anonymous_41)","decl":{"start":{"line":203,"column":24},"end":{"line":203,"column":25}},"loc":{"start":{"line":203,"column":46},"end":{"line":203,"column":101}},"line":203},"42":{"name":"(anonymous_42)","decl":{"start":{"line":204,"column":32},"end":{"line":204,"column":33}},"loc":{"start":{"line":204,"column":52},"end":{"line":206,"column":1}},"line":204},"43":{"name":"(anonymous_43)","decl":{"start":{"line":207,"column":30},"end":{"line":207,"column":31}},"loc":{"start":{"line":207,"column":48},"end":{"line":207,"column":99}},"line":207},"44":{"name":"(anonymous_44)","decl":{"start":{"line":208,"column":24},"end":{"line":208,"column":25}},"loc":{"start":{"line":208,"column":43},"end":{"line":212,"column":1}},"line":208},"45":{"name":"(anonymous_45)","decl":{"start":{"line":213,"column":28},"end":{"line":213,"column":29}},"loc":{"start":{"line":213,"column":49},"end":{"line":216,"column":1}},"line":213},"46":{"name":"(anonymous_46)","decl":{"start":{"line":217,"column":31},"end":{"line":217,"column":32}},"loc":{"start":{"line":217,"column":64},"end":{"line":230,"column":1}},"line":217},"47":{"name":"(anonymous_47)","decl":{"start":{"line":232,"column":27},"end":{"line":232,"column":28}},"loc":{"start":{"line":232,"column":49},"end":{"line":232,"column":106}},"line":232},"48":{"name":"(anonymous_48)","decl":{"start":{"line":233,"column":29},"end":{"line":233,"column":30}},"loc":{"start":{"line":233,"column":43},"end":{"line":233,"column":89}},"line":233},"49":{"name":"(anonymous_49)","decl":{"start":{"line":234,"column":28},"end":{"line":234,"column":29}},"loc":{"start":{"line":234,"column":50},"end":{"line":236,"column":1}},"line":234},"50":{"name":"(anonymous_50)","decl":{"start":{"line":237,"column":28},"end":{"line":237,"column":29}},"loc":{"start":{"line":237,"column":51},"end":{"line":241,"column":1}},"line":237},"51":{"name":"(anonymous_51)","decl":{"start":{"line":242,"column":35},"end":{"line":242,"column":36}},"loc":{"start":{"line":242,"column":69},"end":{"line":258,"column":1}},"line":242},"52":{"name":"(anonymous_52)","decl":{"start":{"line":259,"column":32},"end":{"line":259,"column":33}},"loc":{"start":{"line":259,"column":57},"end":{"line":264,"column":1}},"line":259},"53":{"name":"(anonymous_53)","decl":{"start":{"line":272,"column":29},"end":{"line":272,"column":30}},"loc":{"start":{"line":272,"column":51},"end":{"line":274,"column":1}},"line":272},"54":{"name":"(anonymous_54)","decl":{"start":{"line":275,"column":35},"end":{"line":275,"column":36}},"loc":{"start":{"line":275,"column":53},"end":{"line":275,"column":109}},"line":275},"55":{"name":"(anonymous_55)","decl":{"start":{"line":289,"column":27},"end":{"line":289,"column":28}},"loc":{"start":{"line":289,"column":49},"end":{"line":289,"column":105}},"line":289},"56":{"name":"(anonymous_56)","decl":{"start":{"line":290,"column":29},"end":{"line":290,"column":30}},"loc":{"start":{"line":290,"column":43},"end":{"line":290,"column":89}},"line":290},"57":{"name":"(anonymous_57)","decl":{"start":{"line":291,"column":31},"end":{"line":291,"column":32}},"loc":{"start":{"line":291,"column":48},"end":{"line":291,"column":105}},"line":291},"58":{"name":"(anonymous_58)","decl":{"start":{"line":292,"column":35},"end":{"line":292,"column":36}},"loc":{"start":{"line":292,"column":49},"end":{"line":294,"column":1}},"line":292},"59":{"name":"(anonymous_59)","decl":{"start":{"line":295,"column":39},"end":{"line":295,"column":40}},"loc":{"start":{"line":295,"column":64},"end":{"line":297,"column":1}},"line":295},"60":{"name":"(anonymous_60)","decl":{"start":{"line":298,"column":29},"end":{"line":298,"column":30}},"loc":{"start":{"line":298,"column":47},"end":{"line":298,"column":132}},"line":298},"61":{"name":"(anonymous_61)","decl":{"start":{"line":299,"column":42},"end":{"line":299,"column":43}},"loc":{"start":{"line":299,"column":65},"end":{"line":309,"column":1}},"line":299},"62":{"name":"(anonymous_62)","decl":{"start":{"line":310,"column":43},"end":{"line":310,"column":44}},"loc":{"start":{"line":310,"column":67},"end":{"line":312,"column":1}},"line":310},"63":{"name":"(anonymous_63)","decl":{"start":{"line":311,"column":25},"end":{"line":311,"column":26}},"loc":{"start":{"line":311,"column":48},"end":{"line":311,"column":92}},"line":311},"64":{"name":"(anonymous_64)","decl":{"start":{"line":311,"column":122},"end":{"line":311,"column":123}},"loc":{"start":{"line":311,"column":145},"end":{"line":311,"column":209}},"line":311},"65":{"name":"(anonymous_65)","decl":{"start":{"line":313,"column":52},"end":{"line":313,"column":53}},"loc":{"start":{"line":313,"column":77},"end":{"line":326,"column":1}},"line":313},"66":{"name":"(anonymous_66)","decl":{"start":{"line":327,"column":51},"end":{"line":327,"column":52}},"loc":{"start":{"line":327,"column":97},"end":{"line":332,"column":1}},"line":327},"67":{"name":"(anonymous_67)","decl":{"start":{"line":331,"column":23},"end":{"line":331,"column":24}},"loc":{"start":{"line":331,"column":46},"end":{"line":331,"column":112}},"line":331},"68":{"name":"(anonymous_68)","decl":{"start":{"line":333,"column":49},"end":{"line":333,"column":50}},"loc":{"start":{"line":333,"column":103},"end":{"line":343,"column":1}},"line":333},"69":{"name":"(anonymous_69)","decl":{"start":{"line":337,"column":23},"end":{"line":337,"column":24}},"loc":{"start":{"line":337,"column":46},"end":{"line":342,"column":5}},"line":337},"70":{"name":"(anonymous_70)","decl":{"start":{"line":344,"column":49},"end":{"line":344,"column":50}},"loc":{"start":{"line":344,"column":74},"end":{"line":346,"column":1}},"line":344},"71":{"name":"(anonymous_71)","decl":{"start":{"line":347,"column":31},"end":{"line":347,"column":32}},"loc":{"start":{"line":347,"column":49},"end":{"line":349,"column":1}},"line":347},"72":{"name":"(anonymous_72)","decl":{"start":{"line":350,"column":41},"end":{"line":350,"column":42}},"loc":{"start":{"line":350,"column":66},"end":{"line":352,"column":1}},"line":350},"73":{"name":"(anonymous_73)","decl":{"start":{"line":351,"column":42},"end":{"line":351,"column":43}},"loc":{"start":{"line":351,"column":63},"end":{"line":351,"column":129}},"line":351},"74":{"name":"(anonymous_74)","decl":{"start":{"line":353,"column":28},"end":{"line":353,"column":29}},"loc":{"start":{"line":353,"column":52},"end":{"line":353,"column":92}},"line":353},"75":{"name":"(anonymous_75)","decl":{"start":{"line":354,"column":36},"end":{"line":354,"column":37}},"loc":{"start":{"line":354,"column":54},"end":{"line":356,"column":1}},"line":354},"76":{"name":"(anonymous_76)","decl":{"start":{"line":357,"column":39},"end":{"line":357,"column":40}},"loc":{"start":{"line":357,"column":57},"end":{"line":360,"column":1}},"line":357},"77":{"name":"(anonymous_77)","decl":{"start":{"line":359,"column":67},"end":{"line":359,"column":68}},"loc":{"start":{"line":359,"column":90},"end":{"line":359,"column":155}},"line":359},"78":{"name":"(anonymous_78)","decl":{"start":{"line":361,"column":48},"end":{"line":361,"column":49}},"loc":{"start":{"line":361,"column":66},"end":{"line":363,"column":1}},"line":361},"79":{"name":"(anonymous_79)","decl":{"start":{"line":364,"column":43},"end":{"line":364,"column":44}},"loc":{"start":{"line":364,"column":61},"end":{"line":367,"column":5}},"line":364},"80":{"name":"(anonymous_80)","decl":{"start":{"line":368,"column":39},"end":{"line":368,"column":40}},"loc":{"start":{"line":368,"column":64},"end":{"line":383,"column":1}},"line":368},"81":{"name":"(anonymous_81)","decl":{"start":{"line":385,"column":29},"end":{"line":385,"column":30}},"loc":{"start":{"line":385,"column":58},"end":{"line":393,"column":1}},"line":385},"82":{"name":"(anonymous_82)","decl":{"start":{"line":394,"column":30},"end":{"line":394,"column":31}},"loc":{"start":{"line":394,"column":59},"end":{"line":396,"column":1}},"line":394},"83":{"name":"(anonymous_83)","decl":{"start":{"line":407,"column":39},"end":{"line":407,"column":40}},"loc":{"start":{"line":407,"column":66},"end":{"line":409,"column":1}},"line":407},"84":{"name":"(anonymous_84)","decl":{"start":{"line":410,"column":28},"end":{"line":410,"column":29}},"loc":{"start":{"line":410,"column":83},"end":{"line":441,"column":1}},"line":410},"85":{"name":"(anonymous_85)","decl":{"start":{"line":442,"column":22},"end":{"line":442,"column":23}},"loc":{"start":{"line":442,"column":45},"end":{"line":446,"column":1}},"line":442},"86":{"name":"(anonymous_86)","decl":{"start":{"line":447,"column":32},"end":{"line":447,"column":33}},"loc":{"start":{"line":447,"column":64},"end":{"line":460,"column":1}},"line":447},"87":{"name":"(anonymous_87)","decl":{"start":{"line":462,"column":20},"end":{"line":462,"column":21}},"loc":{"start":{"line":462,"column":42},"end":{"line":462,"column":91}},"line":462},"88":{"name":"(anonymous_88)","decl":{"start":{"line":463,"column":24},"end":{"line":463,"column":25}},"loc":{"start":{"line":463,"column":41},"end":{"line":463,"column":91}},"line":463},"89":{"name":"(anonymous_89)","decl":{"start":{"line":464,"column":22},"end":{"line":464,"column":23}},"loc":{"start":{"line":464,"column":36},"end":{"line":464,"column":75}},"line":464},"90":{"name":"(anonymous_90)","decl":{"start":{"line":465,"column":34},"end":{"line":465,"column":35}},"loc":{"start":{"line":465,"column":59},"end":{"line":465,"column":126}},"line":465},"91":{"name":"(anonymous_91)","decl":{"start":{"line":466,"column":21},"end":{"line":466,"column":22}},"loc":{"start":{"line":466,"column":54},"end":{"line":477,"column":1}},"line":466},"92":{"name":"(anonymous_92)","decl":{"start":{"line":478,"column":22},"end":{"line":478,"column":23}},"loc":{"start":{"line":478,"column":55},"end":{"line":492,"column":1}},"line":478},"93":{"name":"(anonymous_93)","decl":{"start":{"line":493,"column":15},"end":{"line":493,"column":16}},"loc":{"start":{"line":493,"column":31},"end":{"line":497,"column":1}},"line":493},"94":{"name":"(anonymous_94)","decl":{"start":{"line":499,"column":23},"end":{"line":499,"column":24}},"loc":{"start":{"line":499,"column":45},"end":{"line":499,"column":97}},"line":499},"95":{"name":"(anonymous_95)","decl":{"start":{"line":500,"column":27},"end":{"line":500,"column":28}},"loc":{"start":{"line":500,"column":44},"end":{"line":500,"column":97}},"line":500},"96":{"name":"(anonymous_96)","decl":{"start":{"line":501,"column":25},"end":{"line":501,"column":26}},"loc":{"start":{"line":501,"column":39},"end":{"line":501,"column":81}},"line":501},"97":{"name":"(anonymous_97)","decl":{"start":{"line":502,"column":37},"end":{"line":502,"column":38}},"loc":{"start":{"line":502,"column":62},"end":{"line":504,"column":1}},"line":502},"98":{"name":"(anonymous_98)","decl":{"start":{"line":505,"column":24},"end":{"line":505,"column":25}},"loc":{"start":{"line":505,"column":66},"end":{"line":517,"column":1}},"line":505},"99":{"name":"(anonymous_99)","decl":{"start":{"line":518,"column":25},"end":{"line":518,"column":26}},"loc":{"start":{"line":518,"column":67},"end":{"line":532,"column":1}},"line":518},"100":{"name":"(anonymous_100)","decl":{"start":{"line":533,"column":18},"end":{"line":533,"column":19}},"loc":{"start":{"line":533,"column":37},"end":{"line":537,"column":1}},"line":533},"101":{"name":"(anonymous_101)","decl":{"start":{"line":539,"column":28},"end":{"line":539,"column":29}},"loc":{"start":{"line":539,"column":50},"end":{"line":541,"column":1}},"line":539},"102":{"name":"(anonymous_102)","decl":{"start":{"line":542,"column":32},"end":{"line":542,"column":33}},"loc":{"start":{"line":542,"column":49},"end":{"line":544,"column":1}},"line":542},"103":{"name":"(anonymous_103)","decl":{"start":{"line":545,"column":41},"end":{"line":545,"column":42}},"loc":{"start":{"line":545,"column":59},"end":{"line":547,"column":1}},"line":545},"104":{"name":"(anonymous_104)","decl":{"start":{"line":548,"column":36},"end":{"line":548,"column":37}},"loc":{"start":{"line":548,"column":77},"end":{"line":561,"column":1}},"line":548},"105":{"name":"(anonymous_105)","decl":{"start":{"line":562,"column":33},"end":{"line":562,"column":34}},"loc":{"start":{"line":562,"column":74},"end":{"line":575,"column":1}},"line":562},"106":{"name":"(anonymous_106)","decl":{"start":{"line":576,"column":36},"end":{"line":576,"column":37}},"loc":{"start":{"line":576,"column":80},"end":{"line":589,"column":1}},"line":576},"107":{"name":"(anonymous_107)","decl":{"start":{"line":590,"column":23},"end":{"line":590,"column":24}},"loc":{"start":{"line":590,"column":47},"end":{"line":592,"column":1}},"line":590},"108":{"name":"(anonymous_108)","decl":{"start":{"line":593,"column":30},"end":{"line":593,"column":31}},"loc":{"start":{"line":593,"column":63},"end":{"line":608,"column":1}},"line":593},"109":{"name":"(anonymous_109)","decl":{"start":{"line":594,"column":33},"end":{"line":594,"column":34}},"loc":{"start":{"line":594,"column":49},"end":{"line":607,"column":5}},"line":594},"110":{"name":"(anonymous_110)","decl":{"start":{"line":609,"column":33},"end":{"line":609,"column":34}},"loc":{"start":{"line":609,"column":74},"end":{"line":612,"column":1}},"line":609},"111":{"name":"(anonymous_111)","decl":{"start":{"line":613,"column":43},"end":{"line":613,"column":44}},"loc":{"start":{"line":613,"column":67},"end":{"line":628,"column":1}},"line":613},"112":{"name":"(anonymous_112)","decl":{"start":{"line":629,"column":44},"end":{"line":629,"column":45}},"loc":{"start":{"line":629,"column":69},"end":{"line":631,"column":1}},"line":629},"113":{"name":"(anonymous_113)","decl":{"start":{"line":630,"column":25},"end":{"line":630,"column":26}},"loc":{"start":{"line":630,"column":49},"end":{"line":630,"column":94}},"line":630},"114":{"name":"(anonymous_114)","decl":{"start":{"line":630,"column":125},"end":{"line":630,"column":126}},"loc":{"start":{"line":630,"column":149},"end":{"line":630,"column":215}},"line":630},"115":{"name":"(anonymous_115)","decl":{"start":{"line":643,"column":34},"end":{"line":643,"column":35}},"loc":{"start":{"line":643,"column":52},"end":{"line":643,"column":107}},"line":643},"116":{"name":"generateWeekObject","decl":{"start":{"line":662,"column":9},"end":{"line":662,"column":27}},"loc":{"start":{"line":662,"column":36},"end":{"line":671,"column":1}},"line":662},"117":{"name":"generateDayObject","decl":{"start":{"line":672,"column":9},"end":{"line":672,"column":26}},"loc":{"start":{"line":672,"column":35},"end":{"line":681,"column":1}},"line":672},"118":{"name":"(anonymous_118)","decl":{"start":{"line":682,"column":33},"end":{"line":682,"column":34}},"loc":{"start":{"line":682,"column":51},"end":{"line":723,"column":1}},"line":682},"119":{"name":"(anonymous_119)","decl":{"start":{"line":689,"column":16},"end":{"line":689,"column":17}},"loc":{"start":{"line":689,"column":33},"end":{"line":689,"column":102}},"line":689},"120":{"name":"(anonymous_120)","decl":{"start":{"line":690,"column":14},"end":{"line":690,"column":15}},"loc":{"start":{"line":690,"column":32},"end":{"line":690,"column":61}},"line":690},"121":{"name":"(anonymous_121)","decl":{"start":{"line":691,"column":17},"end":{"line":691,"column":18}},"loc":{"start":{"line":691,"column":34},"end":{"line":694,"column":5}},"line":691},"122":{"name":"(anonymous_122)","decl":{"start":{"line":700,"column":46},"end":{"line":700,"column":47}},"loc":{"start":{"line":700,"column":61},"end":{"line":707,"column":5}},"line":700},"123":{"name":"(anonymous_123)","decl":{"start":{"line":701,"column":33},"end":{"line":701,"column":34}},"loc":{"start":{"line":701,"column":46},"end":{"line":704,"column":9}},"line":701},"124":{"name":"(anonymous_124)","decl":{"start":{"line":708,"column":30},"end":{"line":708,"column":31}},"loc":{"start":{"line":708,"column":52},"end":{"line":714,"column":5}},"line":708},"125":{"name":"(anonymous_125)","decl":{"start":{"line":716,"column":22},"end":{"line":716,"column":23}},"loc":{"start":{"line":716,"column":35},"end":{"line":721,"column":5}},"line":716},"126":{"name":"(anonymous_126)","decl":{"start":{"line":724,"column":32},"end":{"line":724,"column":33}},"loc":{"start":{"line":724,"column":50},"end":{"line":761,"column":1}},"line":724},"127":{"name":"(anonymous_127)","decl":{"start":{"line":728,"column":16},"end":{"line":728,"column":17}},"loc":{"start":{"line":728,"column":33},"end":{"line":728,"column":122}},"line":728},"128":{"name":"(anonymous_128)","decl":{"start":{"line":729,"column":14},"end":{"line":729,"column":15}},"loc":{"start":{"line":729,"column":32},"end":{"line":729,"column":61}},"line":729},"129":{"name":"(anonymous_129)","decl":{"start":{"line":730,"column":17},"end":{"line":730,"column":18}},"loc":{"start":{"line":730,"column":34},"end":{"line":733,"column":5}},"line":730},"130":{"name":"(anonymous_130)","decl":{"start":{"line":739,"column":46},"end":{"line":739,"column":47}},"loc":{"start":{"line":739,"column":61},"end":{"line":745,"column":5}},"line":739},"131":{"name":"(anonymous_131)","decl":{"start":{"line":740,"column":33},"end":{"line":740,"column":34}},"loc":{"start":{"line":740,"column":46},"end":{"line":743,"column":9}},"line":740},"132":{"name":"(anonymous_132)","decl":{"start":{"line":746,"column":30},"end":{"line":746,"column":31}},"loc":{"start":{"line":746,"column":52},"end":{"line":752,"column":5}},"line":746},"133":{"name":"(anonymous_133)","decl":{"start":{"line":754,"column":22},"end":{"line":754,"column":23}},"loc":{"start":{"line":754,"column":35},"end":{"line":759,"column":5}},"line":754},"134":{"name":"(anonymous_134)","decl":{"start":{"line":762,"column":26},"end":{"line":762,"column":27}},"loc":{"start":{"line":762,"column":38},"end":{"line":769,"column":1}},"line":762},"135":{"name":"(anonymous_135)","decl":{"start":{"line":765,"column":16},"end":{"line":765,"column":17}},"loc":{"start":{"line":765,"column":33},"end":{"line":765,"column":77}},"line":765},"136":{"name":"(anonymous_136)","decl":{"start":{"line":766,"column":14},"end":{"line":766,"column":15}},"loc":{"start":{"line":766,"column":32},"end":{"line":766,"column":61}},"line":766},"137":{"name":"(anonymous_137)","decl":{"start":{"line":770,"column":25},"end":{"line":770,"column":26}},"loc":{"start":{"line":770,"column":37},"end":{"line":778,"column":1}},"line":770},"138":{"name":"(anonymous_138)","decl":{"start":{"line":773,"column":16},"end":{"line":773,"column":17}},"loc":{"start":{"line":773,"column":33},"end":{"line":773,"column":81}},"line":773},"139":{"name":"(anonymous_139)","decl":{"start":{"line":774,"column":14},"end":{"line":774,"column":15}},"loc":{"start":{"line":774,"column":32},"end":{"line":774,"column":61}},"line":774}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":15},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":16},"end":{"line":2,"column":20}},{"start":{"line":2,"column":24},"end":{"line":2,"column":37}},{"start":{"line":2,"column":42},"end":{"line":12,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":15},"end":{"line":10,"column":5}},"type":"binary-expr","locations":[{"start":{"line":3,"column":15},"end":{"line":3,"column":28}},{"start":{"line":3,"column":32},"end":{"line":10,"column":5}}],"line":3},"2":{"loc":{"start":{"line":6,"column":29},"end":{"line":7,"column":28}},"type":"if","locations":[{"start":{"line":6,"column":29},"end":{"line":7,"column":28}},{"start":{"line":6,"column":29},"end":{"line":7,"column":28}}],"line":6},"3":{"loc":{"start":{"line":13,"column":22},"end":{"line":15,"column":1}},"type":"binary-expr","locations":[{"start":{"line":13,"column":23},"end":{"line":13,"column":27}},{"start":{"line":13,"column":31},"end":{"line":13,"column":51}},{"start":{"line":13,"column":56},"end":{"line":15,"column":1}}],"line":13},"4":{"loc":{"start":{"line":14,"column":11},"end":{"line":14,"column":61}},"type":"cond-expr","locations":[{"start":{"line":14,"column":37},"end":{"line":14,"column":40}},{"start":{"line":14,"column":43},"end":{"line":14,"column":61}}],"line":14},"5":{"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":33}},"type":"binary-expr","locations":[{"start":{"line":14,"column":12},"end":{"line":14,"column":15}},{"start":{"line":14,"column":19},"end":{"line":14,"column":33}}],"line":14},"6":{"loc":{"start":{"line":114,"column":17},"end":{"line":114,"column":41}},"type":"binary-expr","locations":[{"start":{"line":114,"column":17},"end":{"line":114,"column":36}},{"start":{"line":114,"column":40},"end":{"line":114,"column":41}}],"line":114},"7":{"loc":{"start":{"line":157,"column":28},"end":{"line":157,"column":90}},"type":"cond-expr","locations":[{"start":{"line":157,"column":50},"end":{"line":157,"column":86}},{"start":{"line":157,"column":89},"end":{"line":157,"column":90}}],"line":157},"8":{"loc":{"start":{"line":172,"column":31},"end":{"line":174,"column":19}},"type":"cond-expr","locations":[{"start":{"line":173,"column":18},"end":{"line":173,"column":62}},{"start":{"line":174,"column":18},"end":{"line":174,"column":19}}],"line":172},"9":{"loc":{"start":{"line":178,"column":16},"end":{"line":180,"column":17}},"type":"if","locations":[{"start":{"line":178,"column":16},"end":{"line":180,"column":17}},{"start":{"line":178,"column":16},"end":{"line":180,"column":17}}],"line":178},"10":{"loc":{"start":{"line":188,"column":24},"end":{"line":188,"column":86}},"type":"cond-expr","locations":[{"start":{"line":188,"column":61},"end":{"line":188,"column":76}},{"start":{"line":188,"column":79},"end":{"line":188,"column":86}}],"line":188},"11":{"loc":{"start":{"line":189,"column":50},"end":{"line":191,"column":29}},"type":"cond-expr","locations":[{"start":{"line":190,"column":14},"end":{"line":190,"column":114}},{"start":{"line":191,"column":14},"end":{"line":191,"column":29}}],"line":189},"12":{"loc":{"start":{"line":314,"column":35},"end":{"line":314,"column":97}},"type":"binary-expr","locations":[{"start":{"line":314,"column":35},"end":{"line":314,"column":40}},{"start":{"line":314,"column":44},"end":{"line":314,"column":97}}],"line":314},"13":{"loc":{"start":{"line":315,"column":22},"end":{"line":315,"column":55}},"type":"binary-expr","locations":[{"start":{"line":315,"column":22},"end":{"line":315,"column":46}},{"start":{"line":315,"column":50},"end":{"line":315,"column":55}}],"line":315},"14":{"loc":{"start":{"line":320,"column":4},"end":{"line":324,"column":5}},"type":"if","locations":[{"start":{"line":320,"column":4},"end":{"line":324,"column":5}},{"start":{"line":320,"column":4},"end":{"line":324,"column":5}}],"line":320},"15":{"loc":{"start":{"line":320,"column":8},"end":{"line":320,"column":113}},"type":"binary-expr","locations":[{"start":{"line":320,"column":8},"end":{"line":320,"column":13}},{"start":{"line":320,"column":18},"end":{"line":320,"column":62}},{"start":{"line":320,"column":66},"end":{"line":320,"column":112}}],"line":320},"16":{"loc":{"start":{"line":328,"column":4},"end":{"line":330,"column":5}},"type":"if","locations":[{"start":{"line":328,"column":4},"end":{"line":330,"column":5}},{"start":{"line":328,"column":4},"end":{"line":330,"column":5}}],"line":328},"17":{"loc":{"start":{"line":328,"column":8},"end":{"line":328,"column":32}},"type":"binary-expr","locations":[{"start":{"line":328,"column":8},"end":{"line":328,"column":18}},{"start":{"line":328,"column":22},"end":{"line":328,"column":32}}],"line":328},"18":{"loc":{"start":{"line":334,"column":4},"end":{"line":336,"column":5}},"type":"if","locations":[{"start":{"line":334,"column":4},"end":{"line":336,"column":5}},{"start":{"line":334,"column":4},"end":{"line":336,"column":5}}],"line":334},"19":{"loc":{"start":{"line":334,"column":8},"end":{"line":334,"column":40}},"type":"binary-expr","locations":[{"start":{"line":334,"column":8},"end":{"line":334,"column":23}},{"start":{"line":334,"column":27},"end":{"line":334,"column":40}}],"line":334},"20":{"loc":{"start":{"line":369,"column":4},"end":{"line":382,"column":5}},"type":"if","locations":[{"start":{"line":369,"column":4},"end":{"line":382,"column":5}},{"start":{"line":369,"column":4},"end":{"line":382,"column":5}}],"line":369},"21":{"loc":{"start":{"line":369,"column":8},"end":{"line":369,"column":113}},"type":"binary-expr","locations":[{"start":{"line":369,"column":8},"end":{"line":369,"column":13}},{"start":{"line":369,"column":18},"end":{"line":369,"column":62}},{"start":{"line":369,"column":66},"end":{"line":369,"column":112}}],"line":369},"22":{"loc":{"start":{"line":386,"column":4},"end":{"line":392,"column":5}},"type":"if","locations":[{"start":{"line":386,"column":4},"end":{"line":392,"column":5}},{"start":{"line":386,"column":4},"end":{"line":392,"column":5}}],"line":386},"23":{"loc":{"start":{"line":421,"column":22},"end":{"line":421,"column":83}},"type":"binary-expr","locations":[{"start":{"line":421,"column":22},"end":{"line":421,"column":53}},{"start":{"line":421,"column":57},"end":{"line":421,"column":83}}],"line":421},"24":{"loc":{"start":{"line":423,"column":23},"end":{"line":423,"column":108}},"type":"cond-expr","locations":[{"start":{"line":423,"column":55},"end":{"line":423,"column":96}},{"start":{"line":423,"column":99},"end":{"line":423,"column":108}}],"line":423},"25":{"loc":{"start":{"line":429,"column":4},"end":{"line":439,"column":5}},"type":"if","locations":[{"start":{"line":429,"column":4},"end":{"line":439,"column":5}},{"start":{"line":429,"column":4},"end":{"line":439,"column":5}}],"line":429},"26":{"loc":{"start":{"line":453,"column":4},"end":{"line":458,"column":5}},"type":"if","locations":[{"start":{"line":453,"column":4},"end":{"line":458,"column":5}},{"start":{"line":453,"column":4},"end":{"line":458,"column":5}}],"line":453},"27":{"loc":{"start":{"line":595,"column":8},"end":{"line":606,"column":9}},"type":"if","locations":[{"start":{"line":595,"column":8},"end":{"line":606,"column":9}},{"start":{"line":595,"column":8},"end":{"line":606,"column":9}}],"line":595},"28":{"loc":{"start":{"line":595,"column":12},"end":{"line":595,"column":80}},"type":"binary-expr","locations":[{"start":{"line":595,"column":12},"end":{"line":595,"column":28}},{"start":{"line":595,"column":32},"end":{"line":595,"column":80}}],"line":595},"29":{"loc":{"start":{"line":598,"column":13},"end":{"line":606,"column":9}},"type":"if","locations":[{"start":{"line":598,"column":13},"end":{"line":606,"column":9}},{"start":{"line":598,"column":13},"end":{"line":606,"column":9}}],"line":598},"30":{"loc":{"start":{"line":598,"column":17},"end":{"line":598,"column":82}},"type":"binary-expr","locations":[{"start":{"line":598,"column":17},"end":{"line":598,"column":33}},{"start":{"line":598,"column":37},"end":{"line":598,"column":82}}],"line":598},"31":{"loc":{"start":{"line":616,"column":4},"end":{"line":618,"column":5}},"type":"if","locations":[{"start":{"line":616,"column":4},"end":{"line":618,"column":5}},{"start":{"line":616,"column":4},"end":{"line":618,"column":5}}],"line":616},"32":{"loc":{"start":{"line":619,"column":4},"end":{"line":622,"column":5}},"type":"if","locations":[{"start":{"line":619,"column":4},"end":{"line":622,"column":5}},{"start":{"line":619,"column":4},"end":{"line":622,"column":5}}],"line":619},"33":{"loc":{"start":{"line":623,"column":4},"end":{"line":626,"column":5}},"type":"if","locations":[{"start":{"line":623,"column":4},"end":{"line":626,"column":5}},{"start":{"line":623,"column":4},"end":{"line":626,"column":5}}],"line":623},"34":{"loc":{"start":{"line":677,"column":18},"end":{"line":677,"column":95}},"type":"cond-expr","locations":[{"start":{"line":677,"column":40},"end":{"line":677,"column":63}},{"start":{"line":677,"column":66},"end":{"line":677,"column":95}}],"line":677},"35":{"loc":{"start":{"line":689,"column":42},"end":{"line":689,"column":99}},"type":"binary-expr","locations":[{"start":{"line":689,"column":42},"end":{"line":689,"column":63}},{"start":{"line":689,"column":67},"end":{"line":689,"column":99}}],"line":689},"36":{"loc":{"start":{"line":698,"column":24},"end":{"line":698,"column":66}},"type":"cond-expr","locations":[{"start":{"line":698,"column":44},"end":{"line":698,"column":61}},{"start":{"line":698,"column":64},"end":{"line":698,"column":66}}],"line":698},"37":{"loc":{"start":{"line":709,"column":8},"end":{"line":712,"column":9}},"type":"if","locations":[{"start":{"line":709,"column":8},"end":{"line":712,"column":9}},{"start":{"line":709,"column":8},"end":{"line":712,"column":9}}],"line":709},"38":{"loc":{"start":{"line":728,"column":42},"end":{"line":728,"column":119}},"type":"binary-expr","locations":[{"start":{"line":728,"column":42},"end":{"line":728,"column":83}},{"start":{"line":728,"column":87},"end":{"line":728,"column":119}}],"line":728},"39":{"loc":{"start":{"line":732,"column":15},"end":{"line":732,"column":92}},"type":"cond-expr","locations":[{"start":{"line":732,"column":37},"end":{"line":732,"column":60}},{"start":{"line":732,"column":63},"end":{"line":732,"column":92}}],"line":732},"40":{"loc":{"start":{"line":737,"column":25},"end":{"line":737,"column":69}},"type":"cond-expr","locations":[{"start":{"line":737,"column":46},"end":{"line":737,"column":64}},{"start":{"line":737,"column":67},"end":{"line":737,"column":69}}],"line":737},"41":{"loc":{"start":{"line":742,"column":19},"end":{"line":742,"column":96}},"type":"cond-expr","locations":[{"start":{"line":742,"column":41},"end":{"line":742,"column":64}},{"start":{"line":742,"column":67},"end":{"line":742,"column":96}}],"line":742},"42":{"loc":{"start":{"line":747,"column":8},"end":{"line":750,"column":9}},"type":"if","locations":[{"start":{"line":747,"column":8},"end":{"line":750,"column":9}},{"start":{"line":747,"column":8},"end":{"line":750,"column":9}}],"line":747}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":7,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":0,"41":0,"42":0,"43":1,"44":0,"45":1,"46":0,"47":1,"48":0,"49":1,"50":0,"51":0,"52":1,"53":0,"54":0,"55":1,"56":0,"57":0,"58":1,"59":0,"60":1,"61":0,"62":0,"63":1,"64":0,"65":0,"66":1,"67":0,"68":0,"69":1,"70":0,"71":1,"72":0,"73":1,"74":0,"75":1,"76":0,"77":1,"78":0,"79":1,"80":0,"81":0,"82":0,"83":0,"84":1,"85":0,"86":1,"87":0,"88":0,"89":1,"90":4,"91":1,"92":0,"93":1,"94":0,"95":1,"96":0,"97":1,"98":0,"99":1,"100":4,"101":20040,"102":4,"103":4,"104":4,"105":4,"106":180,"107":4,"108":180,"109":232,"110":180,"111":180,"112":180,"113":444780,"114":444780,"115":79072,"116":79072,"117":180,"118":180,"119":4140,"120":4140,"121":9168,"122":4140,"123":4140,"124":4140,"125":7152,"126":7152,"127":552,"128":4140,"129":180,"130":180,"131":4140,"132":180,"133":180,"134":652,"135":180,"136":4,"137":180,"138":180,"139":4,"140":1,"141":0,"142":1,"143":0,"144":1,"145":0,"146":1,"147":0,"148":1,"149":0,"150":0,"151":1,"152":0,"153":0,"154":1,"155":0,"156":0,"157":0,"158":0,"159":1,"160":0,"161":1,"162":0,"163":1,"164":0,"165":1,"166":0,"167":0,"168":1,"169":0,"170":0,"171":0,"172":0,"173":1,"174":0,"175":1,"176":0,"177":1,"178":0,"179":1,"180":0,"181":1,"182":0,"183":1,"184":0,"185":1,"186":0,"187":1,"188":0,"189":1,"190":0,"191":1,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":1,"200":0,"201":0,"202":0,"203":1,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":1,"217":0,"218":0,"219":0,"220":0,"221":1,"222":0,"223":0,"224":0,"225":0,"226":1,"227":0,"228":1,"229":0,"230":1,"231":0,"232":0,"233":1,"234":0,"235":1,"236":0,"237":1,"238":0,"239":0,"240":0,"241":1,"242":0,"243":1,"244":0,"245":1,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":1,"256":1,"257":0,"258":0,"259":1,"260":0,"261":1,"262":0,"263":1,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":1,"276":0,"277":0,"278":1,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":1,"291":0,"292":1,"293":0,"294":1,"295":0,"296":1,"297":0,"298":1,"299":0,"300":0,"301":0,"302":1,"303":0,"304":0,"305":0,"306":0,"307":1,"308":0,"309":0,"310":1,"311":0,"312":1,"313":0,"314":1,"315":0,"316":1,"317":0,"318":1,"319":0,"320":0,"321":0,"322":1,"323":0,"324":0,"325":0,"326":0,"327":1,"328":0,"329":0,"330":1,"331":0,"332":1,"333":0,"334":1,"335":0,"336":1,"337":0,"338":0,"339":0,"340":1,"341":0,"342":0,"343":0,"344":1,"345":0,"346":0,"347":0,"348":1,"349":0,"350":1,"351":0,"352":0,"353":0,"354":0,"355":0,"356":1,"357":0,"358":0,"359":1,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":1,"372":0,"373":0,"374":0,"375":1,"376":0,"377":1,"378":1,"379":1,"380":1,"381":4,"382":4,"383":4,"384":4,"385":28,"386":28,"387":28,"388":4,"389":8,"390":8,"391":8,"392":8,"393":192,"394":192,"395":192,"396":8,"397":1,"398":4,"399":4,"400":4,"401":4,"402":4,"403":20040,"404":19076,"405":2412,"406":2412,"407":4,"408":4,"409":28,"410":4,"411":28,"412":2412,"413":2412,"414":28,"415":28,"416":4,"417":28,"418":0,"419":0,"420":28,"421":4,"422":4,"423":28,"424":28,"425":28,"426":28,"427":4,"428":1,"429":8,"430":8,"431":40080,"432":2100,"433":392,"434":392,"435":8,"436":8,"437":192,"438":8,"439":192,"440":392,"441":392,"442":192,"443":8,"444":192,"445":104,"446":104,"447":192,"448":8,"449":8,"450":192,"451":192,"452":192,"453":192,"454":8,"455":1,"456":0,"457":0,"458":0,"459":0,"460":1,"461":4,"462":20040,"463":18596,"464":4,"465":1},"f":{"0":0,"1":0,"2":7,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":4,"24":0,"25":0,"26":0,"27":0,"28":4,"29":20040,"30":180,"31":232,"32":444780,"33":79072,"34":4140,"35":9168,"36":7152,"37":652,"38":180,"39":180,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":4,"117":8,"118":4,"119":20040,"120":19076,"121":2412,"122":28,"123":2412,"124":28,"125":28,"126":8,"127":40080,"128":2100,"129":392,"130":192,"131":392,"132":192,"133":192,"134":0,"135":0,"136":0,"137":4,"138":20040,"139":18596},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[1,1,1],"4":[0,7],"5":[7,7],"6":[0,0],"7":[160,20],"8":[552,3588],"9":[552,6600],"10":[176,4],"11":[36,144],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[112,80],"35":[20040,2412],"36":[28,0],"37":[0,28],"38":[40080,392],"39":[256,136],"40":[88,104],"41":[256,136],"42":[104,88]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/database.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/database.ts"],"names":[],"mappings":"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","sourcesContent":["import path from \"path\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport fs from \"fs\";\r\nimport { v4 } from \"uuid\";\r\nimport {\r\n  uniqBy,\r\n  sortedUniqBy,\r\n  map,\r\n  sample,\r\n  reject,\r\n  includes,\r\n  orderBy,\r\n  flow,\r\n  flatMap,\r\n  curry,\r\n  get,\r\n  constant,\r\n  filter,\r\n  inRange,\r\n  remove,\r\n  countBy,\r\n  groupBy,\r\n} from \"lodash/fp\";\r\nimport { isWithinInterval } from \"date-fns\";\r\nimport low from \"lowdb\";\r\nimport FileSync from \"lowdb/adapters/FileSync\";\r\nimport shortid from \"shortid\";\r\nimport {\r\n  BankAccount,\r\n  Transaction,\r\n  User,\r\n  Contact,\r\n  TransactionStatus,\r\n  TransactionRequestStatus,\r\n  Like,\r\n  Comment,\r\n  PaymentNotification,\r\n  PaymentNotificationStatus,\r\n  LikeNotification,\r\n  CommentNotification,\r\n  NotificationType,\r\n  NotificationPayloadType,\r\n  NotificationsType,\r\n  TransactionResponseItem,\r\n  TransactionPayload,\r\n  BankTransfer,\r\n  BankTransferPayload,\r\n  BankTransferType,\r\n  NotificationResponseItem,\r\n  TransactionQueryPayload,\r\n  DefaultPrivacyLevel,\r\n  Event,\r\n} from \"../src/models\";\r\nimport Fuse from \"fuse.js\";\r\nimport {\r\n  isPayment,\r\n  getTransferAmount,\r\n  hasSufficientFunds,\r\n  getChargeAmount,\r\n  hasDateQueryFields,\r\n  getDateQueryFields,\r\n  hasAmountQueryFields,\r\n  getAmountQueryFields,\r\n  getQueryWithoutFilterFields,\r\n  getPayAppCreditedAmount,\r\n  isRequestTransaction,\r\n  formatFullName,\r\n  isLikeNotification,\r\n  isCommentNotification,\r\n} from \"../src/utils/transactionUtils\";\r\nimport { DbSchema } from \"../src/models/db-schema\";\r\nimport { EventNoteTwoTone } from \"@material-ui/icons\";\r\n\r\n\r\nexport type TDatabase = {\r\n  users: User[];\r\n  contacts: Contact[];\r\n  bankaccounts: BankAccount[];\r\n  transactions: Transaction[];\r\n  likes: Like[];\r\n  comments: Comment[];\r\n  notifications: NotificationType[];\r\n  banktransfers: BankTransfer[];\r\n  events: Event[];\r\n};\r\n\r\nconst USER_TABLE = \"users\";\r\nconst CONTACT_TABLE = \"contacts\";\r\nconst BANK_ACCOUNT_TABLE = \"bankaccounts\";\r\nconst TRANSACTION_TABLE = \"transactions\";\r\nconst LIKE_TABLE = \"likes\";\r\nconst COMMENT_TABLE = \"comments\";\r\nconst NOTIFICATION_TABLE = \"notifications\";\r\nconst BANK_TRANSFER_TABLE = \"banktransfers\";\r\nconst EVENT_TABLE = \"events\";\r\n\r\nconst databaseFile = path.join(__dirname, \"../data/database.json\");\r\nconst adapter = new FileSync<DbSchema>(databaseFile);\r\n\r\nconst db = low(adapter);\r\n\r\nexport const seedDatabase = () => {\r\n  const testSeed = JSON.parse(\r\n    fs.readFileSync(path.join(process.cwd(), \"data\", \"database-seed.json\"), \"utf-8\")\r\n  );\r\n\r\n  // seed database with test data\r\n  db.setState(testSeed).write();\r\n  return;\r\n};\r\n\r\nexport const getAllUsers = () => db.get(USER_TABLE).value();\r\n\r\nexport const getAllPublicTransactions = () =>\r\n  db.get(TRANSACTION_TABLE).filter({ privacyLevel: DefaultPrivacyLevel.public }).value();\r\n\r\nexport const getAllForEntity = (entity: keyof DbSchema) => db.get(entity).value();\r\n\r\nexport const getAllBy = (entity: keyof DbSchema, key: string, value: any) => {\r\n  const result = db\r\n    .get(entity)\r\n    // @ts-ignore\r\n    .filter({ [`${key}`]: value })\r\n    .value();\r\n\r\n  return result;\r\n};\r\n\r\nexport const getBy = (entity: keyof DbSchema, key: string, value: any) => {\r\n  const result = db\r\n    .get(entity)\r\n    // @ts-ignore\r\n    .find({ [`${key}`]: value })\r\n    .value();\r\n\r\n  return result;\r\n};\r\n\r\nexport const getAllByObj = (entity: keyof DbSchema, query: object) => {\r\n  const result = db\r\n    .get(entity)\r\n    // @ts-ignore\r\n    .filter(query)\r\n    .value();\r\n\r\n  return result;\r\n};\r\n\r\n// Search\r\nexport const cleanSearchQuery = (query: string) => query.replace(/[^a-zA-Z0-9]/g, \"\");\r\n\r\nexport const setupSearch = curry((items: object[], options: {}, query: string) => {\r\n  const fuse = new Fuse(items, options);\r\n  return fuse.search(query);\r\n});\r\n\r\nexport const performSearch = (items: object[], options: {}, query: string) =>\r\n  flow(\r\n    cleanSearchQuery,\r\n    setupSearch(items, options),\r\n    map((result) => result.item)\r\n  )(query);\r\n\r\nexport const searchUsers = (query: string) => {\r\n  const items = getAllUsers();\r\n  return performSearch(\r\n    items,\r\n    {\r\n      keys: [\"firstName\", \"lastName\", \"username\", \"email\", \"phoneNumber\"],\r\n    },\r\n    query\r\n  ) as User[];\r\n};\r\n\r\nexport const removeUserFromResults = (userId: User[\"id\"], results: User[]) =>\r\n  remove({ id: userId }, results);\r\n\r\n// convenience methods\r\n\r\n// User\r\nexport const getUserBy = (key: string, value: any) => getBy(USER_TABLE, key, value);\r\nexport const getUserId = (user: User): string => user.id;\r\nexport const getUserById = (id: string) => getUserBy(\"id\", id);\r\nexport const getUserByUsername = (username: string) => getUserBy(\"username\", username);\r\n\r\nexport const createUser = (userDetails: Partial<User>): User => {\r\n  const password = bcrypt.hashSync(userDetails.password!, 10);\r\n  const user: User = {\r\n    id: shortid(),\r\n    uuid: v4(),\r\n    firstName: userDetails.firstName!,\r\n    lastName: userDetails.lastName!,\r\n    username: userDetails.username!,\r\n    password,\r\n    email: userDetails.email!,\r\n    phoneNumber: userDetails.phoneNumber!,\r\n    balance: userDetails.balance! || 0,\r\n    avatar: userDetails.avatar!,\r\n    defaultPrivacyLevel: userDetails.defaultPrivacyLevel!,\r\n    createdAt: new Date(),\r\n    modifiedAt: new Date(),\r\n  };\r\n\r\n  saveUser(user);\r\n  return user;\r\n};\r\n\r\nconst saveUser = (user: User) => {\r\n  db.get(USER_TABLE).push(user).write();\r\n};\r\n\r\nexport const updateUserById = (userId: string, edits: Partial<User>) => {\r\n  const user = getUserById(userId);\r\n\r\n  db.get(USER_TABLE).find(user).assign(edits).write();\r\n};\r\n\r\n// Event\r\nexport const getAllEvents = () => db.get(EVENT_TABLE).value();\r\n\r\nexport const getEventBy = (key: string, value: any) => getBy(EVENT_TABLE, key, value);\r\n// export const getEventId = (event: Event): string => event.id;\r\nexport const getEventById = (id: string): Event => getEventBy(\"id\", id);\r\n\r\nexport const getEventsBy = (key: string, value: any) => getAllBy(EVENT_TABLE, key, value);\r\n\r\nexport const getEventsByUserId = (userId: string): Event[] => getEventsBy(\"userId\", userId);\r\n\r\nexport const getRetentionCohort = () => {\r\n  type weeklyRetentionObject ={\r\n    registrationWeek:number;\r\n    newUsers:number\r\n    weeklyRetention:number[]\r\n  }\r\n  const signups:Event[] = db\r\n  .get('events')\r\n  .filter(\r\n    (event: Event) => event.name === \"signup\"\r\n  )\r\n  .orderBy('date')\r\n  .value()\r\n  const logins : Event[] = db\r\n  .get('events')\r\n  .filter({ ['name']: 'login' })\r\n  .orderBy('date')\r\n  .value()\r\n  \r\n  const weekEnds:number[] = []\r\n  // stores the end time of every week since dayZero\r\n  for(let d = dayZero ; d<=Date.now()+OneWeek;d+=OneWeek ){ \r\n    weekEnds.push(d+OneWeek)\r\n  }\r\n\r\n  const weeklyRetention:weeklyRetentionObject[] = weekEnds.map((weekEnd,weekNumber) => {\r\n    //first isolate the new Users the week\r\n    const firstSignupNextWeek = signups.find(signup=>signup.date>=weekEnd)\r\n    const indexOfSignup = firstSignupNextWeek?signups.indexOf(firstSignupNextWeek):0\r\n    let weeksNewSignups = signups.splice(0,indexOfSignup)\r\n    //second isolate the logins of users who started this week\r\n    const loginsByNewUsers = logins\r\n    .filter(({ distinct_user_id : loginId })=>{\r\n      return weeksNewSignups.some(({distinct_user_id:signupId})=>loginId===signupId)\r\n    })\r\n    const weeklyRetention:number[] = []\r\n    //third for every following week we must find how many of the new Users came back \r\n    for(let i=weekNumber;i<weekEnds.length;i++){\r\n      const returnedUsers : string[] = []\r\n      const firstLoginNextWeek:Event|undefined = loginsByNewUsers.find(login=>login.date>=weekEnds[i])\r\n      const indexOfLogin:number = firstLoginNextWeek\r\n      ?loginsByNewUsers.indexOf(firstLoginNextWeek)\r\n      :0\r\n      let weeksLogins = loginsByNewUsers.splice(0,indexOfLogin)\r\n      weeksLogins.forEach(({distinct_user_id})=>{\r\n        if(!returnedUsers.includes(distinct_user_id)){\r\n          returnedUsers.push(distinct_user_id)\r\n        }\r\n      })\r\n     \r\n      weeklyRetention.push(returnedUsers.length)\r\n    }\r\n    \r\n    const newUsers = (weekNumber!==weekEnds.length-1?weeksNewSignups:signups).length\r\n    const weeklyRetentionPercent= [100].concat(newUsers\r\n      ?weeklyRetention.map(returnedUsers=>Math.round(100*returnedUsers/newUsers))\r\n      :weeklyRetention\r\n    )\r\n    return {\r\n      registrationWeek: weekNumber,\r\n      newUsers:newUsers,\r\n      weeklyRetention:weeklyRetentionPercent\r\n    }\r\n  })\r\n\r\n  console.log(weeklyRetention.map(user=>user.newUsers).reduce((acc,cur)=>acc+cur,0)\r\n  )\r\n  return weeklyRetention\r\n}\r\n// Contact\r\nexport const getContactBy = (key: string, value: any) => getBy(CONTACT_TABLE, key, value);\r\n\r\nexport const getContactsBy = (key: string, value: any) => getAllBy(CONTACT_TABLE, key, value);\r\n\r\nexport const getContactsByUsername = (username: string) =>\r\n  flow(getUserByUsername, getUserId, getContactsByUserId)(username);\r\n\r\nexport const getContactsByUserId = (userId: string): Contact[] => getContactsBy(\"userId\", userId);\r\n\r\nexport const createContact = (contact: Contact) => {\r\n  db.get(CONTACT_TABLE).push(contact).write();\r\n\r\n  // manual lookup after create\r\n  return getContactBy(\"id\", contact.id);\r\n};\r\n\r\nexport const removeContactById = (contactId: string) => {\r\n  const contact = getContactBy(\"id\", contactId);\r\n\r\n  db.get(CONTACT_TABLE).remove(contact).write();\r\n};\r\n\r\nexport const createContactForUser = (userId: string, contactUserId: string) => {\r\n  const contactId = shortid();\r\n  const contact: Contact = {\r\n    id: contactId,\r\n    uuid: v4(),\r\n    userId,\r\n    contactUserId,\r\n    createdAt: new Date(),\r\n    modifiedAt: new Date(),\r\n  };\r\n\r\n  // Write contact record to the database\r\n  const result = createContact(contact);\r\n\r\n  return result;\r\n};\r\n\r\n// Bank Account\r\nexport const getBankAccountBy = (key: string, value: any) => getBy(BANK_ACCOUNT_TABLE, key, value);\r\n\r\nexport const getBankAccountById = (id: string) => getBankAccountBy(\"id\", id);\r\n\r\nexport const getBankAccountsBy = (key: string, value: any) =>\r\n  getAllBy(BANK_ACCOUNT_TABLE, key, value);\r\n\r\nexport const createBankAccount = (bankaccount: BankAccount) => {\r\n  db.get(BANK_ACCOUNT_TABLE).push(bankaccount).write();\r\n\r\n  // manual lookup after create\r\n  return getBankAccountBy(\"id\", bankaccount.id);\r\n};\r\n\r\nexport const createBankAccountForUser = (userId: string, accountDetails: Partial<BankAccount>) => {\r\n  const accountId = shortid();\r\n  const bankaccount: BankAccount = {\r\n    id: accountId,\r\n    uuid: v4(),\r\n    userId,\r\n    bankName: accountDetails.bankName!,\r\n    accountNumber: accountDetails.accountNumber!,\r\n    routingNumber: accountDetails.routingNumber!,\r\n    isDeleted: false,\r\n    createdAt: new Date(),\r\n    modifiedAt: new Date(),\r\n  };\r\n\r\n  // Write bank account record to the database\r\n  const result = createBankAccount(bankaccount);\r\n\r\n  return result;\r\n};\r\n\r\nexport const removeBankAccountById = (bankAccountId: string) => {\r\n  db.get(BANK_ACCOUNT_TABLE)\r\n    .find({ id: bankAccountId })\r\n    .assign({ isDeleted: true }) // soft delete\r\n    .write();\r\n};\r\n\r\n// Bank Transfer\r\n// Note: Balance transfers from/to bank accounts is a future feature,\r\n// but some of the backend database functionality is already implemented here.\r\n\r\n/* istanbul ignore next */\r\nexport const getBankTransferBy = (key: string, value: any) =>\r\n  getBy(BANK_TRANSFER_TABLE, key, value);\r\n\r\nexport const getBankTransfersBy = (key: string, value: any) =>\r\n  getAllBy(BANK_TRANSFER_TABLE, key, value);\r\n\r\nexport const getBankTransfersByUserId = (userId: string) => getBankTransfersBy(\"userId\", userId);\r\n\r\n/* istanbul ignore next */\r\nexport const createBankTransfer = (bankTransferDetails: BankTransferPayload) => {\r\n  const bankTransfer: BankTransfer = {\r\n    id: shortid(),\r\n    uuid: v4(),\r\n    ...bankTransferDetails,\r\n    createdAt: new Date(),\r\n    modifiedAt: new Date(),\r\n  };\r\n\r\n  const savedBankTransfer = saveBankTransfer(bankTransfer);\r\n  return savedBankTransfer;\r\n};\r\n\r\n/* istanbul ignore next */\r\nconst saveBankTransfer = (bankTransfer: BankTransfer): BankTransfer => {\r\n  db.get(BANK_TRANSFER_TABLE).push(bankTransfer).write();\r\n\r\n  // manual lookup after banktransfer created\r\n  return getBankTransferBy(\"id\", bankTransfer.id);\r\n};\r\n\r\n// Transaction\r\n\r\nexport const getTransactionBy = (key: string, value: any) => getBy(TRANSACTION_TABLE, key, value);\r\n\r\nexport const getTransactionById = (id: string) => getTransactionBy(\"id\", id);\r\n\r\nexport const getTransactionsByObj = (query: object) => getAllByObj(TRANSACTION_TABLE, query);\r\n\r\nexport const getTransactionByIdForApi = (id: string) =>\r\n  formatTransactionForApiResponse(getTransactionBy(\"id\", id));\r\n\r\nexport const getTransactionsForUserForApi = (userId: string, query?: object) =>\r\n  flow(getTransactionsForUserByObj(userId), formatTransactionsForApiResponse)(query);\r\n\r\nexport const getFullNameForUser = (userId: User[\"id\"]) => flow(getUserById, formatFullName)(userId);\r\n\r\nexport const formatTransactionForApiResponse = (\r\n  transaction: Transaction\r\n): TransactionResponseItem => {\r\n  const receiver = getUserById(transaction.receiverId);\r\n  const sender = getUserById(transaction.senderId);\r\n\r\n  const receiverName = getFullNameForUser(transaction.receiverId);\r\n  const senderName = getFullNameForUser(transaction.senderId);\r\n  const likes = getLikesByTransactionId(transaction.id);\r\n  const comments = getCommentsByTransactionId(transaction.id);\r\n\r\n  return {\r\n    receiverName,\r\n    senderName,\r\n    receiverAvatar: receiver.avatar,\r\n    senderAvatar: sender.avatar,\r\n    likes,\r\n    comments,\r\n    ...transaction,\r\n  };\r\n};\r\n\r\nexport const formatTransactionsForApiResponse = (\r\n  transactions: Transaction[]\r\n): TransactionResponseItem[] =>\r\n  orderBy(\r\n    [(transaction: Transaction) => new Date(transaction.modifiedAt)],\r\n    [\"desc\"],\r\n    transactions.map((transaction) => formatTransactionForApiResponse(transaction))\r\n  );\r\n\r\nexport const getAllTransactionsForUserByObj = curry((userId: string, query?: object) => {\r\n  const queryWithoutFilterFields = query && getQueryWithoutFilterFields(query);\r\n\r\n  const queryFields = queryWithoutFilterFields || query;\r\n\r\n  const userTransactions = flatMap(getTransactionsByObj)([\r\n    {\r\n      receiverId: userId,\r\n      ...queryFields,\r\n    },\r\n    {\r\n      senderId: userId,\r\n      ...queryFields,\r\n    },\r\n  ]);\r\n\r\n  if (query && (hasDateQueryFields(query) || hasAmountQueryFields(query))) {\r\n    const { dateRangeStart, dateRangeEnd } = getDateQueryFields(query);\r\n    const { amountMin, amountMax } = getAmountQueryFields(query);\r\n\r\n    return flow(\r\n      transactionsWithinDateRange(dateRangeStart!, dateRangeEnd!),\r\n      transactionsWithinAmountRange(amountMin!, amountMax!)\r\n    )(userTransactions);\r\n  }\r\n  return userTransactions;\r\n});\r\n\r\nexport const transactionsWithinAmountRange = curry(\r\n  (amountMin: number, amountMax: number, transactions: Transaction[]) => {\r\n    if (!amountMin || !amountMax) {\r\n      return transactions;\r\n    }\r\n\r\n    return filter(\r\n      (transaction: Transaction) => inRange(amountMin, amountMax, transaction.amount),\r\n      transactions\r\n    );\r\n  }\r\n);\r\n\r\nexport const transactionsWithinDateRange = curry(\r\n  (dateRangeStart: string, dateRangeEnd: string, transactions: Transaction[]) => {\r\n    if (!dateRangeStart || !dateRangeEnd) {\r\n      return transactions;\r\n    }\r\n\r\n    return filter(\r\n      (transaction: Transaction) =>\r\n        isWithinInterval(new Date(transaction.createdAt), {\r\n          start: new Date(dateRangeStart),\r\n          end: new Date(dateRangeEnd),\r\n        }),\r\n      transactions\r\n    );\r\n  }\r\n);\r\n\r\nexport const getTransactionsForUserByObj = curry((userId: string, query?: object) =>\r\n  flow(getAllTransactionsForUserByObj(userId), uniqBy(\"id\"))(query)\r\n);\r\n\r\nexport const getContactIdsForUser = (userId: string): Contact[\"id\"][] =>\r\n  flow(getContactsByUserId, map(\"contactUserId\"))(userId);\r\n\r\nexport const getTransactionsForUserContacts = (userId: string, query?: object) =>\r\n  uniqBy(\r\n    \"id\",\r\n    flatMap(\r\n      (contactId) => getTransactionsForUserForApi(contactId, query),\r\n      getContactIdsForUser(userId)\r\n    )\r\n  );\r\n\r\nexport const getTransactionIds = (transactions: Transaction[]) => map(\"id\", transactions);\r\n\r\nexport const getContactsTransactionIds = (userId: string): Transaction[\"id\"][] =>\r\n  flow(getTransactionsForUserContacts, getTransactionIds)(userId);\r\n\r\nexport const nonContactPublicTransactions = (userId: string): Transaction[] => {\r\n  const contactsTransactionIds = getContactsTransactionIds(userId);\r\n  return flow(\r\n    getAllPublicTransactions,\r\n    reject((transaction: Transaction) => includes(transaction.id, contactsTransactionIds))\r\n  )();\r\n};\r\n\r\nexport const getNonContactPublicTransactionsForApi = (userId: string) =>\r\n  flow(nonContactPublicTransactions, formatTransactionsForApiResponse)(userId);\r\n\r\nexport const getPublicTransactionsDefaultSort = (userId: string) => ({\r\n  contactsTransactions: getTransactionsForUserContacts(userId),\r\n  publicTransactions: getNonContactPublicTransactionsForApi(userId),\r\n});\r\n\r\nexport const getPublicTransactionsByQuery = (userId: string, query: TransactionQueryPayload) => {\r\n  if (query && (hasDateQueryFields(query) || hasAmountQueryFields(query))) {\r\n    const { dateRangeStart, dateRangeEnd } = getDateQueryFields(query);\r\n    const { amountMin, amountMax } = getAmountQueryFields(query);\r\n\r\n    return {\r\n      contactsTransactions: getTransactionsForUserContacts(userId, query),\r\n      publicTransactions: flow(\r\n        transactionsWithinDateRange(dateRangeStart!, dateRangeEnd!),\r\n        transactionsWithinAmountRange(amountMin!, amountMax!)\r\n      )(getNonContactPublicTransactionsForApi(userId)),\r\n    };\r\n  } else {\r\n    return {\r\n      contactsTransactions: getTransactionsForUserContacts(userId),\r\n      publicTransactions: getNonContactPublicTransactionsForApi(userId),\r\n    };\r\n  }\r\n};\r\n\r\nexport const resetPayAppBalance = constant(0);\r\n\r\nexport const debitPayAppBalance = (user: User, transaction: Transaction) => {\r\n  if (hasSufficientFunds(user, transaction)) {\r\n    flow(getChargeAmount, savePayAppBalance(user))(user, transaction);\r\n  } else {\r\n    /* istanbul ignore next */\r\n    flow(\r\n      getTransferAmount(user),\r\n      createBankTransferWithdrawal(user, transaction),\r\n      resetPayAppBalance,\r\n      savePayAppBalance(user)\r\n    )(transaction);\r\n  }\r\n};\r\n\r\nexport const creditPayAppBalance = (user: User, transaction: Transaction) =>\r\n  flow(getPayAppCreditedAmount, savePayAppBalance(user))(user, transaction);\r\n\r\n/* istanbul ignore next */\r\nexport const createBankTransferWithdrawal = curry(\r\n  (sender: User, transaction: Transaction, transferAmount: number) =>\r\n    createBankTransfer({\r\n      userId: sender.id,\r\n      source: transaction.source,\r\n      amount: transferAmount,\r\n      transactionId: transaction.id,\r\n      type: BankTransferType.withdrawal,\r\n    })\r\n);\r\n\r\nexport const savePayAppBalance = curry((sender: User, balance: number) =>\r\n  updateUserById(get(\"id\", sender), { balance })\r\n);\r\n\r\nexport const createTransaction = (\r\n  userId: User[\"id\"],\r\n  transactionType: \"payment\" | \"request\",\r\n  transactionDetails: TransactionPayload\r\n): Transaction => {\r\n  const sender = getUserById(userId);\r\n  const receiver = getUserById(transactionDetails.receiverId);\r\n  const transaction: Transaction = {\r\n    id: shortid(),\r\n    uuid: v4(),\r\n    source: transactionDetails.source,\r\n    amount: transactionDetails.amount * 100,\r\n    description: transactionDetails.description,\r\n    receiverId: transactionDetails.receiverId,\r\n    senderId: userId,\r\n    privacyLevel: transactionDetails.privacyLevel || sender.defaultPrivacyLevel,\r\n    status: TransactionStatus.pending,\r\n    requestStatus: transactionType === \"request\" ? TransactionRequestStatus.pending : undefined,\r\n    createdAt: new Date(),\r\n    modifiedAt: new Date(),\r\n  };\r\n\r\n  const savedTransaction = saveTransaction(transaction);\r\n\r\n  // if payment, debit sender's balance for payment amount\r\n  if (isPayment(transaction)) {\r\n    debitPayAppBalance(sender, transaction);\r\n    creditPayAppBalance(receiver, transaction);\r\n    updateTransactionById(transaction.id, {\r\n      status: TransactionStatus.complete,\r\n    });\r\n    createPaymentNotification(\r\n      transaction.receiverId,\r\n      transaction.id,\r\n      PaymentNotificationStatus.received\r\n    );\r\n  } else {\r\n    createPaymentNotification(\r\n      transaction.receiverId,\r\n      transaction.id,\r\n      PaymentNotificationStatus.requested\r\n    );\r\n  }\r\n\r\n  return savedTransaction;\r\n};\r\n\r\nconst saveTransaction = (transaction: Transaction): Transaction => {\r\n  db.get(TRANSACTION_TABLE).push(transaction).write();\r\n\r\n  // manual lookup after transaction created\r\n  return getTransactionBy(\"id\", transaction.id);\r\n};\r\n\r\nexport const updateTransactionById = (transactionId: string, edits: Partial<Transaction>) => {\r\n  const transaction = getTransactionBy(\"id\", transactionId);\r\n  const { senderId, receiverId } = transaction;\r\n  const sender = getUserById(senderId);\r\n  const receiver = getUserById(receiverId);\r\n\r\n  // if payment, debit sender's balance for payment amount\r\n  if (isRequestTransaction(transaction)) {\r\n    debitPayAppBalance(receiver, transaction);\r\n    creditPayAppBalance(sender, transaction);\r\n    edits.status = TransactionStatus.complete;\r\n\r\n    createPaymentNotification(\r\n      transaction.senderId,\r\n      transaction.id,\r\n      PaymentNotificationStatus.received\r\n    );\r\n  }\r\n\r\n  db.get(TRANSACTION_TABLE).find(transaction).assign(edits).write();\r\n};\r\n\r\n// Likes\r\n\r\nexport const getLikeBy = (key: string, value: any): Like => getBy(LIKE_TABLE, key, value);\r\nexport const getLikesByObj = (query: object) => getAllByObj(LIKE_TABLE, query);\r\n\r\nexport const getLikeById = (id: string): Like => getLikeBy(\"id\", id);\r\nexport const getLikesByTransactionId = (transactionId: string) => getLikesByObj({ transactionId });\r\n\r\nexport const createLike = (userId: string, transactionId: string): Like => {\r\n  const like = {\r\n    id: shortid(),\r\n    uuid: v4(),\r\n    userId,\r\n    transactionId,\r\n    createdAt: new Date(),\r\n    modifiedAt: new Date(),\r\n  };\r\n\r\n  const savedLike = saveLike(like);\r\n  return savedLike;\r\n};\r\n\r\nexport const createLikes = (userId: string, transactionId: string) => {\r\n  const { senderId, receiverId } = getTransactionById(transactionId);\r\n\r\n  const like = createLike(userId, transactionId);\r\n\r\n  /* istanbul ignore next */\r\n  if (userId !== senderId || userId !== receiverId) {\r\n    createLikeNotification(senderId, transactionId, like.id);\r\n    createLikeNotification(receiverId, transactionId, like.id);\r\n  } else if (userId === senderId) {\r\n    createLikeNotification(senderId, transactionId, like.id);\r\n  } else {\r\n    createLikeNotification(receiverId, transactionId, like.id);\r\n  }\r\n};\r\n\r\nconst saveLike = (like: Like): Like => {\r\n  db.get(LIKE_TABLE).push(like).write();\r\n\r\n  // manual lookup after like created\r\n  return getLikeById(like.id);\r\n};\r\n\r\n// Comments\r\n\r\nexport const getCommentBy = (key: string, value: any): Comment => getBy(COMMENT_TABLE, key, value);\r\nexport const getCommentsByObj = (query: object) => getAllByObj(COMMENT_TABLE, query);\r\n\r\nexport const getCommentById = (id: string): Comment => getCommentBy(\"id\", id);\r\nexport const getCommentsByTransactionId = (transactionId: string) =>\r\n  getCommentsByObj({ transactionId });\r\n\r\nexport const createComment = (userId: string, transactionId: string, content: string): Comment => {\r\n  const comment = {\r\n    id: shortid(),\r\n    uuid: v4(),\r\n    content,\r\n    userId,\r\n    transactionId,\r\n    createdAt: new Date(),\r\n    modifiedAt: new Date(),\r\n  };\r\n\r\n  const savedComment = saveComment(comment);\r\n  return savedComment;\r\n};\r\n\r\nexport const createComments = (userId: string, transactionId: string, content: string) => {\r\n  const { senderId, receiverId } = getTransactionById(transactionId);\r\n\r\n  const comment = createComment(userId, transactionId, content);\r\n\r\n  /* istanbul ignore next */\r\n  if (userId !== senderId || userId !== receiverId) {\r\n    createCommentNotification(senderId, transactionId, comment.id);\r\n    createCommentNotification(receiverId, transactionId, comment.id);\r\n  } else if (userId === senderId) {\r\n    createCommentNotification(senderId, transactionId, comment.id);\r\n  } else {\r\n    createCommentNotification(receiverId, transactionId, comment.id);\r\n  }\r\n};\r\n\r\nconst saveComment = (comment: Comment): Comment => {\r\n  db.get(COMMENT_TABLE).push(comment).write();\r\n\r\n  // manual lookup after comment created\r\n  return getCommentById(comment.id);\r\n};\r\n\r\n// Notifications\r\n\r\nexport const getNotificationBy = (key: string, value: any): NotificationType =>\r\n  getBy(NOTIFICATION_TABLE, key, value);\r\n\r\nexport const getNotificationsByObj = (query: object): Notification[] =>\r\n  getAllByObj(NOTIFICATION_TABLE, query);\r\n\r\nexport const getUnreadNotificationsByUserId = (userId: string) =>\r\n  flow(getNotificationsByObj, formatNotificationsForApiResponse)({ userId, isRead: false });\r\n\r\nexport const createPaymentNotification = (\r\n  userId: string,\r\n  transactionId: string,\r\n  status: PaymentNotificationStatus\r\n): PaymentNotification => {\r\n  const notification: PaymentNotification = {\r\n    id: shortid(),\r\n    uuid: v4(),\r\n    userId: userId,\r\n    transactionId: transactionId,\r\n    status,\r\n    isRead: false,\r\n    createdAt: new Date(),\r\n    modifiedAt: new Date(),\r\n  };\r\n\r\n  saveNotification(notification);\r\n  return notification;\r\n};\r\n\r\nexport const createLikeNotification = (\r\n  userId: string,\r\n  transactionId: string,\r\n  likeId: string\r\n): LikeNotification => {\r\n  const notification: LikeNotification = {\r\n    id: shortid(),\r\n    uuid: v4(),\r\n    userId: userId,\r\n    transactionId: transactionId,\r\n    likeId: likeId,\r\n    isRead: false,\r\n    createdAt: new Date(),\r\n    modifiedAt: new Date(),\r\n  };\r\n\r\n  saveNotification(notification);\r\n  return notification;\r\n};\r\n\r\nexport const createCommentNotification = (\r\n  userId: string,\r\n  transactionId: string,\r\n  commentId: string\r\n): CommentNotification => {\r\n  const notification: CommentNotification = {\r\n    id: shortid(),\r\n    uuid: v4(),\r\n    userId: userId,\r\n    transactionId: transactionId,\r\n    commentId: commentId,\r\n    isRead: false,\r\n    createdAt: new Date(),\r\n    modifiedAt: new Date(),\r\n  };\r\n\r\n  saveNotification(notification);\r\n  return notification;\r\n};\r\n\r\nconst saveNotification = (notification: NotificationType) => {\r\n  db.get(NOTIFICATION_TABLE).push(notification).write();\r\n};\r\n\r\nexport const createNotifications = (userId: string, notifications: NotificationPayloadType[]) =>\r\n  notifications.flatMap((item: NotificationPayloadType) => {\r\n    if (\"status\" in item && item.type === NotificationsType.payment) {\r\n      return createPaymentNotification(userId, item.transactionId, item.status);\r\n    } else if (\"likeId\" in item && item.type === NotificationsType.like) {\r\n      return createLikeNotification(userId, item.transactionId, item.likeId);\r\n    } else {\r\n      /* istanbul ignore next */\r\n      if (\"commentId\" in item) {\r\n        return createCommentNotification(userId, item.transactionId, item.commentId);\r\n      }\r\n    }\r\n  });\r\n\r\nexport const updateNotificationById = (\r\n  userId: string,\r\n  notificationId: string,\r\n  edits: Partial<NotificationType>\r\n) => {\r\n  const notification = getNotificationBy(\"id\", notificationId);\r\n\r\n  db.get(NOTIFICATION_TABLE).find(notification).assign(edits).write();\r\n};\r\n\r\nexport const formatNotificationForApiResponse = (\r\n  notification: NotificationType\r\n): NotificationResponseItem => {\r\n  let userFullName = getFullNameForUser(notification.userId);\r\n  const transaction = getTransactionById(notification.transactionId);\r\n\r\n  if (isRequestTransaction(transaction)) {\r\n    userFullName = getFullNameForUser(transaction.senderId);\r\n  }\r\n\r\n  if (isLikeNotification(notification)) {\r\n    const like = getLikeById(notification.likeId);\r\n    userFullName = getFullNameForUser(like.userId);\r\n  }\r\n\r\n  if (isCommentNotification(notification)) {\r\n    const comment = getCommentById(notification.commentId);\r\n    userFullName = getFullNameForUser(comment.userId);\r\n  }\r\n\r\n  return {\r\n    userFullName,\r\n    ...notification,\r\n  };\r\n};\r\n\r\nexport const formatNotificationsForApiResponse = (\r\n  notifications: NotificationResponseItem[]\r\n): NotificationResponseItem[] =>\r\n  orderBy(\r\n    [(notification: NotificationResponseItem) => new Date(notification.modifiedAt)],\r\n    [\"desc\"],\r\n    notifications.map((notification) => formatNotificationForApiResponse(notification))\r\n  );\r\n\r\n// dev/test private methods\r\n/* istanbul ignore next */\r\nexport const getRandomUser = () => {\r\n  const users = getAllUsers();\r\n  return sample(users)!;\r\n};\r\n\r\n/* istanbul ignore next */\r\nexport const getAllContacts = () => db.get(CONTACT_TABLE).value();\r\n\r\n/* istanbul ignore next */\r\nexport const getAllTransactions = () => db.get(TRANSACTION_TABLE).value();\r\n\r\n/* istanbul ignore */\r\nexport const getBankAccountsByUserId = (userId: string) => getBankAccountsBy(\"userId\", userId);\r\n\r\n/* istanbul ignore next */\r\nexport const getNotificationById = (id: string): NotificationType => getNotificationBy(\"id\", id);\r\n\r\n/* istanbul ignore next */\r\nexport const getNotificationsByUserId = (userId: string) => getNotificationsByObj({ userId });\r\n\r\n/* istanbul ignore next */\r\nexport const getBankTransferByTransactionId = (transactionId: string) =>\r\n  getBankTransferBy(\"transactionId\", transactionId);\r\n\r\n/* istanbul ignore next */\r\nexport const getTransactionsBy = (key: string, value: string) =>\r\n  getAllBy(TRANSACTION_TABLE, key, value);\r\n\r\n/* istanbul ignore next */\r\nexport const getTransactionsByUserId = (userId: string) => getTransactionsBy(\"receiverId\", userId);\r\n\r\n// interface GroupedSessions {\r\n\r\n// }\r\n\r\ninterface day {\r\n  date: string;\r\n  count: number;\r\n}\r\n\r\ninterface hour {\r\n  hour: string;\r\n  count: number;\r\n}\r\n\r\nconst dayZero:number = 1577829600000\r\nconst OneHour: number = 1000 * 60 * 60; \r\nconst OneDay: number = OneHour * 24\r\nconst OneWeek: number = OneDay*7\r\nfunction generateWeekObject(offset: number): {[day: string]: Event[]}{\r\n\r\n  let day: number = Date.now() - (offset + 7) * OneDay;\r\n\r\n  const week: {[day: string]: []} = {}\r\n\r\n  for(let i = 0; i < 7; i++){\r\n    const date = new Date(day + (OneDay * i));\r\n    const key = `${date.getFullYear()}/${date.getMonth()}/${date.getDate()}`\r\n    week[key] =[];\r\n  }\r\n   return week;\r\n\r\n}\r\n\r\nfunction generateDayObject(offset: number): {[day: string]: Event[]}{\r\n\r\n  let hour: number = new Date(new Date(Date.now()).toDateString()).getTime() - (offset + 24) * OneHour;\r\n\r\n  const day: {[hour: string]: []} = {}\r\n\r\n  for(let i = 0; i < 24; i++){\r\n    const time = new Date(hour + (OneHour * i));\r\n    const key = time.getHours() > 9 ? `${time.getHours()}:00` : `0${time.getHours()}:00`\r\n    day[key] =[];\r\n  }\r\n   return day;\r\n\r\n}\r\n\r\nexport const getLastWeekEventsCount = (offset: number) => {\r\n  const Days = OneDay * 7;\r\n  const Offset = OneDay * offset;\r\n  const dateInMili = new Date(new Date(Date.now()).toDateString()).getTime()\r\n  const dayLimit =  dateInMili - Days - Offset\r\n  const groupByDates = db\r\n    .get(EVENT_TABLE)\r\n    .filter(\r\n      (event: Event) => event.date > dayLimit && event.date < dateInMili - Offset\r\n    )\r\n    .sort((e1: Event, e2: Event) => e1.date - e2.date)\r\n    .groupBy((event) => {\r\n      const date = new Date(event.date);\r\n      return `${date.getFullYear()}/${date.getMonth()}/${date.getDate()}`;\r\n    })\r\n    .value();\r\n\r\n  const weekDays = generateWeekObject(offset);\r\n\r\n  for(let day in weekDays ){\r\n    weekDays[day] = groupByDates[day] ? groupByDates[day] : []\r\n  }\r\n\r\n  let arrResult = Object.keys(weekDays).map((day: string) => {\r\n    const count = countBy((e: Event) => {\r\n      const date = new Date(e.date);\r\n      return `${date.getFullYear()}/${date.getMonth()}/${date.getDate()}`;\r\n    }, uniqBy(\"session_id\", weekDays[day]));\r\n    console.log(day, uniqBy(\"session_id\", weekDays[day]).length)\r\n    return count;\r\n  });\r\n\r\n\r\n  arrResult = arrResult.map((day, index: number)  => {\r\n    if(Object.keys(day).length === 0){\r\n      const date: string = Object.keys(weekDays)[index]\r\n      arrResult[index][date] = 0\r\n    }\r\n    return arrResult[index];\r\n  } )\r\n\r\n\r\n  const objResult: day[] = [];\r\n  arrResult.forEach((e) => {\r\n    const temp: day = { date: \"\", count: 0 };\r\n    temp.date = Object.keys(e)[0];\r\n    temp.count = e[Object.keys(e)[0]];\r\n    objResult.push(temp);\r\n  });\r\n\r\n  return objResult;\r\n};\r\n\r\nexport const getLastDayEventsCount = ( offset: number) => {\r\n\r\n  const Offset: number = OneHour * offset;\r\n  const groupByHours = db\r\n    .get(EVENT_TABLE)\r\n    .filter(\r\n      (event: Event) => event.date > Date.now() - OneDay - Offset && event.date < Date.now() - Offset\r\n    )\r\n    .sort((e1: Event, e2: Event) => e1.date - e2.date)\r\n    .groupBy((event) => {\r\n      const time = new Date(event.date);\r\n      return time.getHours() > 9 ? `${time.getHours()}:00` : `0${time.getHours()}:00`;\r\n    })\r\n    .value();\r\n\r\n    const dayHours = generateDayObject(offset)\r\n    \r\n    for(let hour in dayHours ){\r\n      dayHours[hour] = groupByHours[hour] ? groupByHours[hour] : []\r\n    }\r\n\r\n    let arrResult = Object.keys(dayHours).map((key: string) => {\r\n      const count = countBy((e: Event) => {\r\n        const time = new Date(e.date);\r\n        return time.getHours() > 9 ? `${time.getHours()}:00` : `0${time.getHours()}:00`;\r\n      }, uniqBy(\"session_id\", dayHours[key]));\r\n      return count;\r\n    });\r\n\r\n    arrResult = arrResult.map((day, index: number)  => {\r\n      if(Object.keys(day).length === 0){\r\n        const date: string = Object.keys(dayHours)[index]\r\n        arrResult[index][date] = 0\r\n      }\r\n      return arrResult[index];\r\n    } )\r\n\r\n    const objResult: hour[] = [];\r\n    arrResult.forEach((e) => {\r\n      const temp: hour = { hour: \"\", count: 0 };\r\n      temp.hour = Object.keys(e)[0];\r\n      temp.count = e[Object.keys(e)[0]];\r\n      objResult.push(temp);\r\n  });\r\n\r\n  return objResult\r\n}\r\nexport const getTodaysEvents = () => {\r\n\r\n  const todaysEvents = db\r\n    .get(EVENT_TABLE)\r\n    .filter(\r\n      (event: Event) => event.date > Date.now() - OneDay\r\n    )\r\n    .sort((e1: Event, e2: Event) => e1.date - e2.date)\r\n    .value();\r\n\r\n  return todaysEvents\r\n}\r\nexport const getWeeksEvents = () => {\r\n\r\n  const todaysEvents = db\r\n    .get(EVENT_TABLE)\r\n    .filter(\r\n      (event: Event) => event.date > Date.now() - 7*OneDay\r\n    )\r\n    .sort((e1: Event, e2: Event) => e1.date - e2.date)\r\n    .uniqBy('session_id')\r\n    .value();\r\n\r\n  return todaysEvents\r\n}\r\n\r\nexport default db;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ef50ef4d371f0953884afc81068572fa66271446","contentHash":"7faad787bda864b9d2f1b5f14ba77a356a504ebb423113d3cb282832883d4da3"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\src\\utils\\transactionUtils.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\src\\utils\\transactionUtils.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":1257}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":35}},"5":{"start":{"line":8,"column":14},"end":{"line":8,"column":47}},"6":{"start":{"line":9,"column":18},"end":{"line":9,"column":55}},"7":{"start":{"line":10,"column":11},"end":{"line":10,"column":31}},"8":{"start":{"line":11,"column":0},"end":{"line":13,"column":2}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":88}},"10":{"start":{"line":26,"column":0},"end":{"line":26,"column":62}},"11":{"start":{"line":37,"column":0},"end":{"line":39,"column":3}},"12":{"start":{"line":38,"column":4},"end":{"line":38,"column":147}},"13":{"start":{"line":40,"column":0},"end":{"line":42,"column":3}},"14":{"start":{"line":41,"column":4},"end":{"line":41,"column":142}},"15":{"start":{"line":43,"column":0},"end":{"line":45,"column":2}},"16":{"start":{"line":44,"column":4},"end":{"line":44,"column":79}},"17":{"start":{"line":46,"column":0},"end":{"line":48,"column":3}},"18":{"start":{"line":47,"column":4},"end":{"line":47,"column":79}},"19":{"start":{"line":49,"column":0},"end":{"line":51,"column":2}},"20":{"start":{"line":50,"column":4},"end":{"line":50,"column":79}},"21":{"start":{"line":52,"column":0},"end":{"line":54,"column":2}},"22":{"start":{"line":53,"column":4},"end":{"line":53,"column":70}},"23":{"start":{"line":59,"column":0},"end":{"line":61,"column":2}},"24":{"start":{"line":60,"column":4},"end":{"line":60,"column":94}},"25":{"start":{"line":62,"column":0},"end":{"line":62,"column":104}},"26":{"start":{"line":62,"column":58},"end":{"line":62,"column":101}},"27":{"start":{"line":63,"column":0},"end":{"line":63,"column":98}},"28":{"start":{"line":63,"column":55},"end":{"line":63,"column":95}},"29":{"start":{"line":64,"column":0},"end":{"line":66,"column":2}},"30":{"start":{"line":65,"column":4},"end":{"line":65,"column":44}},"31":{"start":{"line":79,"column":0},"end":{"line":81,"column":2}},"32":{"start":{"line":80,"column":4},"end":{"line":80,"column":80}},"33":{"start":{"line":82,"column":0},"end":{"line":84,"column":2}},"34":{"start":{"line":83,"column":4},"end":{"line":83,"column":64}},"35":{"start":{"line":85,"column":0},"end":{"line":87,"column":2}},"36":{"start":{"line":86,"column":4},"end":{"line":86,"column":64}},"37":{"start":{"line":88,"column":0},"end":{"line":88,"column":121}},"38":{"start":{"line":88,"column":50},"end":{"line":88,"column":118}},"39":{"start":{"line":89,"column":0},"end":{"line":91,"column":2}},"40":{"start":{"line":90,"column":4},"end":{"line":90,"column":56}},"41":{"start":{"line":92,"column":0},"end":{"line":94,"column":2}},"42":{"start":{"line":93,"column":4},"end":{"line":93,"column":56}},"43":{"start":{"line":97,"column":0},"end":{"line":99,"column":2}},"44":{"start":{"line":98,"column":4},"end":{"line":98,"column":47}},"45":{"start":{"line":108,"column":0},"end":{"line":110,"column":2}},"46":{"start":{"line":109,"column":4},"end":{"line":109,"column":123}},"47":{"start":{"line":127,"column":0},"end":{"line":134,"column":2}},"48":{"start":{"line":128,"column":17},"end":{"line":128,"column":35}},"49":{"start":{"line":129,"column":21},"end":{"line":129,"column":61}},"50":{"start":{"line":130,"column":4},"end":{"line":133,"column":6}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":31},"end":{"line":11,"column":32}},"loc":{"start":{"line":11,"column":54},"end":{"line":13,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":37,"column":38},"end":{"line":37,"column":39}},"loc":{"start":{"line":37,"column":69},"end":{"line":39,"column":1}},"line":37},"3":{"name":"(anonymous_3)","decl":{"start":{"line":40,"column":36},"end":{"line":40,"column":37}},"loc":{"start":{"line":40,"column":67},"end":{"line":42,"column":1}},"line":40},"4":{"name":"(anonymous_4)","decl":{"start":{"line":43,"column":26},"end":{"line":43,"column":27}},"loc":{"start":{"line":43,"column":57},"end":{"line":45,"column":1}},"line":43},"5":{"name":"(anonymous_5)","decl":{"start":{"line":46,"column":39},"end":{"line":46,"column":40}},"loc":{"start":{"line":46,"column":70},"end":{"line":48,"column":1}},"line":46},"6":{"name":"(anonymous_6)","decl":{"start":{"line":49,"column":34},"end":{"line":49,"column":35}},"loc":{"start":{"line":49,"column":67},"end":{"line":51,"column":1}},"line":49},"7":{"name":"(anonymous_7)","decl":{"start":{"line":52,"column":29},"end":{"line":52,"column":30}},"loc":{"start":{"line":52,"column":60},"end":{"line":54,"column":1}},"line":52},"8":{"name":"(anonymous_8)","decl":{"start":{"line":59,"column":25},"end":{"line":59,"column":26}},"loc":{"start":{"line":59,"column":41},"end":{"line":61,"column":1}},"line":59},"9":{"name":"(anonymous_9)","decl":{"start":{"line":62,"column":32},"end":{"line":62,"column":33}},"loc":{"start":{"line":62,"column":56},"end":{"line":62,"column":103}},"line":62},"10":{"name":"(anonymous_10)","decl":{"start":{"line":63,"column":29},"end":{"line":63,"column":30}},"loc":{"start":{"line":63,"column":53},"end":{"line":63,"column":97}},"line":63},"11":{"name":"(anonymous_11)","decl":{"start":{"line":64,"column":32},"end":{"line":64,"column":33}},"loc":{"start":{"line":64,"column":56},"end":{"line":66,"column":1}},"line":64},"12":{"name":"(anonymous_12)","decl":{"start":{"line":79,"column":29},"end":{"line":79,"column":30}},"loc":{"start":{"line":79,"column":46},"end":{"line":81,"column":1}},"line":79},"13":{"name":"(anonymous_13)","decl":{"start":{"line":82,"column":29},"end":{"line":82,"column":30}},"loc":{"start":{"line":82,"column":46},"end":{"line":84,"column":1}},"line":82},"14":{"name":"(anonymous_14)","decl":{"start":{"line":85,"column":30},"end":{"line":85,"column":31}},"loc":{"start":{"line":85,"column":47},"end":{"line":87,"column":1}},"line":85},"15":{"name":"(anonymous_15)","decl":{"start":{"line":88,"column":31},"end":{"line":88,"column":32}},"loc":{"start":{"line":88,"column":48},"end":{"line":88,"column":120}},"line":88},"16":{"name":"(anonymous_16)","decl":{"start":{"line":89,"column":31},"end":{"line":89,"column":32}},"loc":{"start":{"line":89,"column":48},"end":{"line":91,"column":1}},"line":89},"17":{"name":"(anonymous_17)","decl":{"start":{"line":92,"column":32},"end":{"line":92,"column":33}},"loc":{"start":{"line":92,"column":49},"end":{"line":94,"column":1}},"line":92},"18":{"name":"(anonymous_18)","decl":{"start":{"line":97,"column":36},"end":{"line":97,"column":37}},"loc":{"start":{"line":97,"column":53},"end":{"line":99,"column":1}},"line":97},"19":{"name":"(anonymous_19)","decl":{"start":{"line":108,"column":38},"end":{"line":108,"column":39}},"loc":{"start":{"line":108,"column":55},"end":{"line":110,"column":1}},"line":108},"20":{"name":"(anonymous_20)","decl":{"start":{"line":127,"column":28},"end":{"line":127,"column":29}},"loc":{"start":{"line":127,"column":58},"end":{"line":134,"column":1}},"line":127}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":80,"column":11},"end":{"line":80,"column":79}},"type":"binary-expr","locations":[{"start":{"line":80,"column":11},"end":{"line":80,"column":44}},{"start":{"line":80,"column":48},"end":{"line":80,"column":79}}],"line":80},"4":{"loc":{"start":{"line":88,"column":57},"end":{"line":88,"column":117}},"type":"binary-expr","locations":[{"start":{"line":88,"column":57},"end":{"line":88,"column":85}},{"start":{"line":88,"column":89},"end":{"line":88,"column":117}}],"line":88}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":1,"12":0,"13":1,"14":0,"15":1,"16":0,"17":1,"18":0,"19":1,"20":0,"21":1,"22":0,"23":1,"24":0,"25":1,"26":0,"27":1,"28":0,"29":1,"30":0,"31":1,"32":0,"33":1,"34":0,"35":1,"36":0,"37":1,"38":0,"39":1,"40":0,"41":1,"42":0,"43":1,"44":0,"45":1,"46":0,"47":1,"48":0,"49":0,"50":0},"f":{"0":2,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"b":{"0":[1,1,1],"1":[0,2],"2":[2,2],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/src/utils/transactionUtils.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/src/utils/transactionUtils.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  Transaction,\r\n  User,\r\n  TransactionRequestStatus,\r\n  NotificationType,\r\n  PaymentNotificationStatus,\r\n  TransactionResponseItem,\r\n  TransactionQueryPayload,\r\n  TransactionDateRangePayload,\r\n  TransactionAmountRangePayload,\r\n  LikeNotification,\r\n  CommentNotification,\r\n} from \"../models\";\r\nimport faker from \"faker\";\r\nimport Dinero from \"dinero.js\";\r\nimport {\r\n  flow,\r\n  get,\r\n  isEmpty,\r\n  negate,\r\n  curry,\r\n  isEqual,\r\n  join,\r\n  pick,\r\n  values,\r\n  has,\r\n  find,\r\n  omit,\r\n  map,\r\n  drop,\r\n} from \"lodash/fp\";\r\n\r\nexport const isRequestTransaction = (transaction: Transaction) =>\r\n  flow(get(\"requestStatus\"), negate(isEmpty))(transaction);\r\n\r\n/* istanbul ignore next */\r\nexport const isPendingRequestTransaction = (transaction: Transaction) =>\r\n  flow(get(\"requestStatus\"), isEqual(TransactionRequestStatus.pending))(transaction);\r\n\r\n/* istanbul ignore next */\r\nexport const isAcceptedRequestTransaction = (transaction: Transaction) =>\r\n  flow(get(\"requestStatus\"), isEqual(TransactionRequestStatus.accepted))(transaction);\r\n\r\n/* istanbul ignore next */\r\nexport const isRejectedRequestTransaction = (transaction: Transaction) =>\r\n  flow(get(\"requestStatus\"), isEqual(TransactionRequestStatus.rejected))(transaction);\r\n\r\nexport const isPayment = negate(isRequestTransaction);\r\n\r\n/* istanbul ignore next */\r\nexport const getFakeAmount = (min: number = 1000, max: number = 50000) =>\r\n  parseInt(faker.finance.amount(min, max), 10);\r\n\r\n/* istanbul ignore next */\r\nexport const formatAmount = (amount: number) => Dinero({ amount }).toFormat();\r\n\r\n/* istanbul ignore next */\r\nexport const formatAmountSlider = (amount: number) => Dinero({ amount }).toFormat(\"$0,0\");\r\n\r\nexport const payAppDifference = curry((sender: User, transaction: Transaction) =>\r\n  Dinero({ amount: get(\"balance\", sender) }).subtract(\r\n    Dinero({ amount: get(\"amount\", transaction) })\r\n  )\r\n);\r\n\r\nexport const payAppAddition = curry((sender: User, transaction: Transaction) =>\r\n  Dinero({ amount: get(\"balance\", sender) }).add(Dinero({ amount: get(\"amount\", transaction) }))\r\n);\r\n\r\nexport const getChargeAmount = (sender: User, transaction: Transaction) =>\r\n  Math.abs(payAppDifference(sender, transaction).getAmount());\r\n\r\nexport const getTransferAmount = curry((sender: User, transaction: Transaction) =>\r\n  Math.abs(payAppDifference(sender, transaction).getAmount())\r\n);\r\n\r\nexport const getPayAppCreditedAmount = (receiver: User, transaction: Transaction) =>\r\n  Math.abs(payAppAddition(receiver, transaction).getAmount());\r\n\r\nexport const hasSufficientFunds = (sender: User, transaction: Transaction) =>\r\n  payAppDifference(sender, transaction).isPositive();\r\n\r\n/* istanbul ignore next */\r\nexport const receiverIsCurrentUser = (currentUser: User, transaction: Transaction) =>\r\n  isEqual(get(\"id\", currentUser), get(\"receiverId\", transaction));\r\n\r\nexport const formatFullName = (user: User) =>\r\n  flow(pick([\"firstName\", \"lastName\"]), values, join(\" \"))(user);\r\n\r\nexport const isCommentNotification = (\r\n  notification: NotificationType\r\n): notification is CommentNotification => has(\"commentId\")(notification);\r\n\r\nexport const isLikeNotification = (\r\n  notification: NotificationType\r\n): notification is LikeNotification => has(\"likeId\")(notification);\r\n\r\nexport const isPaymentNotification = (notification: NotificationType) =>\r\n  has(\"status\")(notification);\r\n\r\n/* istanbul ignore next */\r\nexport const isPaymentRequestedNotification = (notification: NotificationType) =>\r\n  flow(get(\"status\"), isEqual(PaymentNotificationStatus.requested))(notification);\r\n\r\n/* istanbul ignore next */\r\nexport const isPaymentReceivedNotification = (notification: NotificationType) =>\r\n  flow(get(\"status\"), isEqual(PaymentNotificationStatus.received))(notification);\r\n\r\n/* istanbul ignore next */\r\nexport const currentUserLikesTransaction = (\r\n  currentUser: User,\r\n  transaction: TransactionResponseItem\r\n) =>\r\n  flow(\r\n    find((like) => flow(get(\"userId\"), isEqual(get(\"id\", currentUser)))(like)),\r\n    negate(isEmpty)\r\n  )(transaction.likes);\r\n\r\nexport const hasDateQueryFields = (query: TransactionQueryPayload | TransactionDateRangePayload) =>\r\n  has(\"dateRangeStart\", query) && has(\"dateRangeEnd\", query);\r\n\r\nexport const getDateQueryFields = (query: TransactionDateRangePayload) =>\r\n  pick([\"dateRangeStart\", \"dateRangeEnd\"], query);\r\n\r\nexport const omitDateQueryFields = (query: TransactionQueryPayload) =>\r\n  omit([\"dateRangeStart\", \"dateRangeEnd\"], query);\r\n\r\nexport const hasAmountQueryFields = (\r\n  query: TransactionQueryPayload | TransactionAmountRangePayload\r\n) => has(\"amountMin\", query) && has(\"amountMax\", query);\r\n\r\nexport const getAmountQueryFields = (query: TransactionAmountRangePayload) =>\r\n  pick([\"amountMin\", \"amountMax\"], query);\r\n\r\nexport const omitAmountQueryFields = (query: TransactionQueryPayload) =>\r\n  omit([\"amountMin\", \"amountMax\"], query);\r\n\r\n/* istanbul ignore next */\r\nexport const hasPaginationQueryFields = (\r\n  query: TransactionQueryPayload | TransactionAmountRangePayload\r\n) => has(\"page\", query) && has(\"limit\", query);\r\n\r\nexport const omitPaginationQueryFields = (query: TransactionQueryPayload) =>\r\n  omit([\"page\", \"limit\"], query);\r\n\r\n/* istanbul ignore next */\r\nexport const getQueryWithoutDateFields = (query: TransactionQueryPayload) =>\r\n  query && hasDateQueryFields(query) ? omitDateQueryFields(query) : query;\r\n\r\n/* istanbul ignore next */\r\nexport const getQueryWithoutAmountFields = (query: TransactionQueryPayload) =>\r\n  query && hasAmountQueryFields(query) ? omitAmountQueryFields(query) : query;\r\n\r\nexport const getQueryWithoutFilterFields = (query: TransactionQueryPayload) =>\r\n  flow(omitAmountQueryFields, omitDateQueryFields, omitPaginationQueryFields)(query);\r\n\r\n/* istanbul ignore next */\r\nexport const padAmountWithZeros = (number: number) => Math.ceil(number * 1000);\r\n\r\n/* istanbul ignore next */\r\nexport const amountRangeValueText = (value: number) =>\r\n  flow(padAmountWithZeros, formatAmount)(value);\r\n\r\n/* istanbul ignore next */\r\nexport const amountRangeValueTextLabel = (value: number) =>\r\n  /* istanbul ignore next */\r\n  flow(padAmountWithZeros, formatAmountSlider)(value);\r\n\r\n/* istanbul ignore next */\r\nexport const formatAmountRangeValues = (amountRangeValues: number[]) =>\r\n  /* istanbul ignore next */\r\n  flow(map(padAmountWithZeros), map(formatAmountSlider), join(\" - \"))(amountRangeValues);\r\n\r\nexport const getPaginatedItems = (page: number, limit: number, items: any) => {\r\n  const offset = (page - 1) * limit;\r\n  const pagedItems = drop(offset, items).slice(0, limit);\r\n\r\n  return {\r\n    totalPages: Math.ceil(items.length / limit),\r\n    data: pagedItems,\r\n  };\r\n};\r\n\r\n// Custom UTC functions per:\r\n// https://github.com/date-fns/date-fns/issues/376#issuecomment-544274031\r\n// not used in application code\r\n/* istanbul ignore next */\r\nexport const startOfDayUTC = (date: Date) => new Date(new Date(date).setUTCHours(0, 0, 0, 0));\r\n\r\n// not used in application code\r\n/* istanbul ignore next */\r\nexport const endOfDayUTC = (date: Date) => new Date(new Date(date).setUTCHours(23, 59, 59, 999));\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"635752a98078030302d8d0fc6abd317a39ba9e5c","contentHash":"a1296429643e6f41a8338c9de4bcc0abce487d541ced3c01ab5748b7fff60ad9"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\user-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\user-routes.ts","statementMap":{"0":{"start":{"line":3,"column":21},"end":{"line":9,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":88}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":18}},"3":{"start":{"line":4,"column":24},"end":{"line":4,"column":25}},"4":{"start":{"line":4,"column":32},"end":{"line":4,"column":48}},"5":{"start":{"line":4,"column":63},"end":{"line":4,"column":88}},"6":{"start":{"line":5,"column":4},"end":{"line":7,"column":24}},"7":{"start":{"line":5,"column":17},"end":{"line":5,"column":25}},"8":{"start":{"line":5,"column":31},"end":{"line":5,"column":32}},"9":{"start":{"line":5,"column":38},"end":{"line":5,"column":39}},"10":{"start":{"line":6,"column":8},"end":{"line":7,"column":24}},"11":{"start":{"line":6,"column":21},"end":{"line":6,"column":33}},"12":{"start":{"line":6,"column":39},"end":{"line":6,"column":40}},"13":{"start":{"line":6,"column":47},"end":{"line":6,"column":55}},"14":{"start":{"line":7,"column":12},"end":{"line":7,"column":24}},"15":{"start":{"line":8,"column":4},"end":{"line":8,"column":13}},"16":{"start":{"line":10,"column":22},"end":{"line":12,"column":1}},"17":{"start":{"line":11,"column":4},"end":{"line":11,"column":62}},"18":{"start":{"line":13,"column":0},"end":{"line":13,"column":62}},"19":{"start":{"line":14,"column":16},"end":{"line":14,"column":51}},"20":{"start":{"line":15,"column":11},"end":{"line":15,"column":31}},"21":{"start":{"line":16,"column":17},"end":{"line":16,"column":38}},"22":{"start":{"line":17,"column":16},"end":{"line":17,"column":36}},"23":{"start":{"line":18,"column":19},"end":{"line":18,"column":42}},"24":{"start":{"line":19,"column":13},"end":{"line":19,"column":39}},"25":{"start":{"line":21,"column":0},"end":{"line":26,"column":3}},"26":{"start":{"line":25,"column":4},"end":{"line":25,"column":45}},"27":{"start":{"line":27,"column":0},"end":{"line":33,"column":3}},"28":{"start":{"line":29,"column":12},"end":{"line":29,"column":23}},"29":{"start":{"line":32,"column":4},"end":{"line":32,"column":45}},"30":{"start":{"line":34,"column":0},"end":{"line":39,"column":3}},"31":{"start":{"line":35,"column":22},"end":{"line":35,"column":30}},"32":{"start":{"line":36,"column":15},"end":{"line":36,"column":49}},"33":{"start":{"line":37,"column":4},"end":{"line":37,"column":20}},"34":{"start":{"line":38,"column":4},"end":{"line":38,"column":29}},"35":{"start":{"line":40,"column":0},"end":{"line":53,"column":3}},"36":{"start":{"line":42,"column":17},"end":{"line":42,"column":34}},"37":{"start":{"line":50,"column":15},"end":{"line":50,"column":45}},"38":{"start":{"line":51,"column":4},"end":{"line":51,"column":20}},"39":{"start":{"line":52,"column":4},"end":{"line":52,"column":29}},"40":{"start":{"line":54,"column":0},"end":{"line":59,"column":3}},"41":{"start":{"line":55,"column":19},"end":{"line":55,"column":38}},"42":{"start":{"line":56,"column":15},"end":{"line":56,"column":101}},"43":{"start":{"line":57,"column":4},"end":{"line":57,"column":20}},"44":{"start":{"line":58,"column":4},"end":{"line":58,"column":29}},"45":{"start":{"line":60,"column":0},"end":{"line":65,"column":3}},"46":{"start":{"line":61,"column":17},"end":{"line":61,"column":34}},"47":{"start":{"line":62,"column":16},"end":{"line":62,"column":24}},"48":{"start":{"line":63,"column":4},"end":{"line":63,"column":45}},"49":{"start":{"line":64,"column":4},"end":{"line":64,"column":24}},"50":{"start":{"line":66,"column":0},"end":{"line":66,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":54},"end":{"line":3,"column":55}},"loc":{"start":{"line":3,"column":66},"end":{"line":9,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":56},"end":{"line":10,"column":57}},"loc":{"start":{"line":10,"column":71},"end":{"line":12,"column":1}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":47},"end":{"line":21,"column":48}},"loc":{"start":{"line":21,"column":67},"end":{"line":26,"column":1}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":27,"column":116},"end":{"line":27,"column":117}},"loc":{"start":{"line":27,"column":136},"end":{"line":33,"column":1}},"line":27},"4":{"name":"(anonymous_4)","decl":{"start":{"line":34,"column":111},"end":{"line":34,"column":112}},"loc":{"start":{"line":34,"column":131},"end":{"line":39,"column":1}},"line":34},"5":{"name":"(anonymous_5)","decl":{"start":{"line":40,"column":128},"end":{"line":40,"column":129}},"loc":{"start":{"line":40,"column":148},"end":{"line":53,"column":1}},"line":40},"6":{"name":"(anonymous_6)","decl":{"start":{"line":54,"column":33},"end":{"line":54,"column":34}},"loc":{"start":{"line":54,"column":53},"end":{"line":59,"column":1}},"line":54},"7":{"name":"(anonymous_7)","decl":{"start":{"line":60,"column":210},"end":{"line":60,"column":211}},"loc":{"start":{"line":60,"column":230},"end":{"line":65,"column":1}},"line":60}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":22},"end":{"line":3,"column":26}},{"start":{"line":3,"column":30},"end":{"line":3,"column":49}},{"start":{"line":3,"column":54},"end":{"line":9,"column":1}}],"line":3},"1":{"loc":{"start":{"line":10,"column":22},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":10,"column":23},"end":{"line":10,"column":27}},{"start":{"line":10,"column":31},"end":{"line":10,"column":51}},{"start":{"line":10,"column":56},"end":{"line":12,"column":1}}],"line":10},"2":{"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":61}},"type":"cond-expr","locations":[{"start":{"line":11,"column":37},"end":{"line":11,"column":40}},{"start":{"line":11,"column":43},"end":{"line":11,"column":61}}],"line":11},"3":{"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":33}},"type":"binary-expr","locations":[{"start":{"line":11,"column":12},"end":{"line":11,"column":15}},{"start":{"line":11,"column":19},"end":{"line":11,"column":33}}],"line":11}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":1,"8":1,"9":1,"10":2,"11":2,"12":2,"13":2,"14":10,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":1,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":1},"f":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"b":{"0":[1,1,1],"1":[1,1,1],"2":[0,1],"3":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/user-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/user-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;;;;;;;;AAEhC,oDAA8B;AAC9B,gCAA0C;AAE1C,uCAQoB;AAEpB,qCAAoE;AACpE,2CAKsB;AACtB,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,SAAS;AACT,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,6BAAmB,EAAE,UAAC,GAAG,EAAE,GAAG;;IAC5C,0BAA0B;IAC1B,IAAM,KAAK,GAAG,gCAAqB,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,EAAE,sBAAW,EAAE,CAAC,CAAC;IAClE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;AAC3C,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,SAAS,EAAE,6BAAmB,EAAE,4BAAkB,CAAC,CAAC,6BAAgB,CAAC,CAAC,EAAE,UAAC,GAAG,EAAE,GAAG;;IAClF,IAAA,CAAC,GAAK,GAAG,CAAC,KAAK,EAAd,CAAe;IAExB,0BAA0B;IAC1B,IAAM,KAAK,GAAG,gCAAqB,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,EAAE,sBAAW,CAAC,CAAC,CAAC,CAAC,CAAC;IAEnE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;AAC3C,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,gCAAmB,EAAE,4BAAkB,CAAC,4BAAe,CAAC,EAAE,UAAC,GAAG,EAAE,GAAG;IAClF,IAAM,WAAW,GAAS,GAAG,CAAC,IAAI,CAAC;IAEnC,IAAM,IAAI,GAAG,qBAAU,CAAC,WAAW,CAAC,CAAC;IAErC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;AAC3B,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CACR,UAAU,EACV,6BAAmB,EACnB,4BAAkB,CAAC,CAAC,8BAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC,EACjD,UAAC,GAAG,EAAE,GAAG;;IACC,IAAA,MAAM,GAAK,GAAG,CAAC,MAAM,OAAf,CAAgB;IAE9B,4BAA4B;IAC5B,0BAA0B;IAC1B,IAAI,CAAC,YAAO,CAAC,MAAM,QAAE,GAAG,CAAC,IAAI,0CAAE,EAAE,CAAC,EAAE;QAClC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;KACJ;IAED,IAAM,IAAI,GAAG,sBAAW,CAAC,MAAM,CAAC,CAAC;IAEjC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI,MAAA,EAAE,CAAC,CAAC;AACrB,CAAC,CACF,CAAC;AAEF,MAAM,CAAC,GAAG,CAAC,oBAAoB,EAAE,UAAC,GAAG,EAAE,GAAG;IAChC,IAAA,QAAQ,GAAK,GAAG,CAAC,MAAM,SAAf,CAAgB;IAEhC,IAAM,IAAI,GAAG,SAAI,CAAC,CAAC,WAAW,EAAE,UAAU,EAAE,QAAQ,CAAC,EAAE,4BAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC;IAEpF,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI,MAAA,EAAE,CAAC,CAAC;AACrB,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,KAAK,CACV,UAAU,EACV,6BAAmB,EACnB,gCAAmB,EACnB,4BAAkB,iBAAE,8BAAiB,CAAC,QAAQ,CAAC,GAAK,4BAAe,EAAE,EACrE,UAAC,GAAG,EAAE,GAAG;IACC,IAAA,MAAM,GAAK,GAAG,CAAC,MAAM,OAAf,CAAgB;IAE9B,IAAM,KAAK,GAAS,GAAG,CAAC,IAAI,CAAC;IAE7B,yBAAc,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAE9B,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;AACtB,CAAC,CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\nimport { isEqual, pick } from \"lodash/fp\";\r\n\r\nimport {\r\n  getAllUsers,\r\n  createUser,\r\n  updateUserById,\r\n  getUserById,\r\n  getUserByUsername,\r\n  searchUsers,\r\n  removeUserFromResults,\r\n} from \"./database\";\r\nimport { User } from \"../src/models/user\";\r\nimport { ensureAuthenticated, validateMiddleware } from \"./helpers\";\r\nimport {\r\n  shortIdValidation,\r\n  searchValidation,\r\n  userFieldsValidator,\r\n  isUserValidator,\r\n} from \"./validators\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\nrouter.get(\"/\", ensureAuthenticated, (req, res) => {\r\n  /* istanbul ignore next */\r\n  const users = removeUserFromResults(req.user?.id!, getAllUsers());\r\n  res.status(200).json({ results: users });\r\n});\r\n\r\nrouter.get(\"/search\", ensureAuthenticated, validateMiddleware([searchValidation]), (req, res) => {\r\n  const { q } = req.query;\r\n\r\n  /* istanbul ignore next */\r\n  const users = removeUserFromResults(req.user?.id!, searchUsers(q));\r\n\r\n  res.status(200).json({ results: users });\r\n});\r\n\r\nrouter.post(\"/\", userFieldsValidator, validateMiddleware(isUserValidator), (req, res) => {\r\n  const userDetails: User = req.body;\r\n\r\n  const user = createUser(userDetails);\r\n\r\n  res.status(201);\r\n  res.json({ user: user });\r\n});\r\n\r\nrouter.get(\r\n  \"/:userId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"userId\")]),\r\n  (req, res) => {\r\n    const { userId } = req.params;\r\n\r\n    // Permission: account owner\r\n    /* istanbul ignore next */\r\n    if (!isEqual(userId, req.user?.id)) {\r\n      return res.status(401).send({\r\n        error: \"Unauthorized\",\r\n      });\r\n    }\r\n\r\n    const user = getUserById(userId);\r\n\r\n    res.status(200);\r\n    res.json({ user });\r\n  }\r\n);\r\n\r\nrouter.get(\"/profile/:username\", (req, res) => {\r\n  const { username } = req.params;\r\n\r\n  const user = pick([\"firstName\", \"lastName\", \"avatar\"], getUserByUsername(username));\r\n\r\n  res.status(200);\r\n  res.json({ user });\r\n});\r\n\r\nrouter.patch(\r\n  \"/:userId\",\r\n  ensureAuthenticated,\r\n  userFieldsValidator,\r\n  validateMiddleware([shortIdValidation(\"userId\"), ...isUserValidator]),\r\n  (req, res) => {\r\n    const { userId } = req.params;\r\n\r\n    const edits: User = req.body;\r\n\r\n    updateUserById(userId, edits);\r\n\r\n    res.sendStatus(204);\r\n  }\r\n);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d125e7f57b250c76293966f71a111e71ec93e1ea","contentHash":"cbbb12a3782ba6654caced281fabea3e1a9281c3989e634da35e24da6de91f00"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\helpers.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\helpers.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"13":{"start":{"line":12,"column":12},"end":{"line":12,"column":104}},"14":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"15":{"start":{"line":12,"column":57},"end":{"line":12,"column":68}},"16":{"start":{"line":12,"column":69},"end":{"line":12,"column":81}},"17":{"start":{"line":13,"column":4},"end":{"line":13,"column":157}},"18":{"start":{"line":13,"column":138},"end":{"line":13,"column":150}},"19":{"start":{"line":14,"column":23},"end":{"line":14,"column":68}},"20":{"start":{"line":14,"column":45},"end":{"line":14,"column":65}},"21":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"22":{"start":{"line":16,"column":15},"end":{"line":16,"column":70}},"23":{"start":{"line":17,"column":8},"end":{"line":34,"column":66}},"24":{"start":{"line":17,"column":18},"end":{"line":34,"column":66}},"25":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"26":{"start":{"line":18,"column":160},"end":{"line":18,"column":169}},"27":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"28":{"start":{"line":19,"column":26},"end":{"line":19,"column":52}},"29":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"30":{"start":{"line":21,"column":32},"end":{"line":21,"column":39}},"31":{"start":{"line":21,"column":40},"end":{"line":21,"column":46}},"32":{"start":{"line":22,"column":24},"end":{"line":22,"column":34}},"33":{"start":{"line":22,"column":35},"end":{"line":22,"column":72}},"34":{"start":{"line":23,"column":24},"end":{"line":23,"column":34}},"35":{"start":{"line":23,"column":35},"end":{"line":23,"column":45}},"36":{"start":{"line":23,"column":46},"end":{"line":23,"column":55}},"37":{"start":{"line":23,"column":56},"end":{"line":23,"column":65}},"38":{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},"39":{"start":{"line":24,"column":42},"end":{"line":24,"column":55}},"40":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"41":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"42":{"start":{"line":26,"column":110},"end":{"line":26,"column":116}},"43":{"start":{"line":26,"column":117},"end":{"line":26,"column":126}},"44":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"45":{"start":{"line":27,"column":81},"end":{"line":27,"column":97}},"46":{"start":{"line":27,"column":98},"end":{"line":27,"column":104}},"47":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"48":{"start":{"line":28,"column":57},"end":{"line":28,"column":72}},"49":{"start":{"line":28,"column":73},"end":{"line":28,"column":80}},"50":{"start":{"line":28,"column":81},"end":{"line":28,"column":87}},"51":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"52":{"start":{"line":29,"column":47},"end":{"line":29,"column":62}},"53":{"start":{"line":29,"column":63},"end":{"line":29,"column":78}},"54":{"start":{"line":29,"column":79},"end":{"line":29,"column":85}},"55":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"56":{"start":{"line":30,"column":30},"end":{"line":30,"column":42}},"57":{"start":{"line":31,"column":20},"end":{"line":31,"column":33}},"58":{"start":{"line":31,"column":34},"end":{"line":31,"column":43}},"59":{"start":{"line":33,"column":12},"end":{"line":33,"column":39}},"60":{"start":{"line":34,"column":22},"end":{"line":34,"column":34}},"61":{"start":{"line":34,"column":35},"end":{"line":34,"column":41}},"62":{"start":{"line":34,"column":54},"end":{"line":34,"column":64}},"63":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"64":{"start":{"line":35,"column":23},"end":{"line":35,"column":35}},"65":{"start":{"line":35,"column":36},"end":{"line":35,"column":89}},"66":{"start":{"line":38,"column":0},"end":{"line":38,"column":62}},"67":{"start":{"line":39,"column":0},"end":{"line":39,"column":92}},"68":{"start":{"line":40,"column":26},"end":{"line":40,"column":54}},"69":{"start":{"line":41,"column":17},"end":{"line":41,"column":38}},"70":{"start":{"line":42,"column":0},"end":{"line":50,"column":2}},"71":{"start":{"line":43,"column":4},"end":{"line":45,"column":5}},"72":{"start":{"line":44,"column":8},"end":{"line":44,"column":22}},"73":{"start":{"line":51,"column":0},"end":{"line":68,"column":2}},"74":{"start":{"line":52,"column":4},"end":{"line":67,"column":10}},"75":{"start":{"line":52,"column":39},"end":{"line":67,"column":7}},"76":{"start":{"line":54,"column":8},"end":{"line":66,"column":11}},"77":{"start":{"line":55,"column":12},"end":{"line":65,"column":13}},"78":{"start":{"line":56,"column":24},"end":{"line":56,"column":130}},"79":{"start":{"line":56,"column":97},"end":{"line":56,"column":124}},"80":{"start":{"line":58,"column":20},"end":{"line":58,"column":30}},"81":{"start":{"line":59,"column":20},"end":{"line":59,"column":71}},"82":{"start":{"line":60,"column":20},"end":{"line":62,"column":21}},"83":{"start":{"line":61,"column":24},"end":{"line":61,"column":54}},"84":{"start":{"line":63,"column":20},"end":{"line":63,"column":69}},"85":{"start":{"line":64,"column":20},"end":{"line":64,"column":42}},"86":{"start":{"line":70,"column":17},"end":{"line":70,"column":42}},"87":{"start":{"line":71,"column":15},"end":{"line":71,"column":45}},"88":{"start":{"line":72,"column":4},"end":{"line":79,"column":5}},"89":{"start":{"line":73,"column":8},"end":{"line":73,"column":15}},"90":{"start":{"line":76,"column":8},"end":{"line":78,"column":11}},"91":{"start":{"line":81,"column":0},"end":{"line":81,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":48},"end":{"line":11,"column":49}},"loc":{"start":{"line":11,"column":73},"end":{"line":37,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":83}},"line":12},"9":{"name":"(anonymous_9)","decl":{"start":{"line":13,"column":125},"end":{"line":13,"column":126}},"loc":{"start":{"line":13,"column":136},"end":{"line":13,"column":152}},"line":13},"10":{"name":"verb","decl":{"start":{"line":14,"column":13},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"line":14},"11":{"name":"(anonymous_11)","decl":{"start":{"line":14,"column":30},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":67}},"line":14},"12":{"name":"step","decl":{"start":{"line":15,"column":13},"end":{"line":15,"column":17}},"loc":{"start":{"line":15,"column":22},"end":{"line":36,"column":5}},"line":15},"13":{"name":"(anonymous_13)","decl":{"start":{"line":42,"column":30},"end":{"line":42,"column":31}},"loc":{"start":{"line":42,"column":56},"end":{"line":50,"column":1}},"line":42},"14":{"name":"(anonymous_14)","decl":{"start":{"line":51,"column":29},"end":{"line":51,"column":30}},"loc":{"start":{"line":51,"column":52},"end":{"line":68,"column":1}},"line":51},"15":{"name":"(anonymous_15)","decl":{"start":{"line":52,"column":11},"end":{"line":52,"column":12}},"loc":{"start":{"line":52,"column":37},"end":{"line":67,"column":9}},"line":52},"16":{"name":"(anonymous_16)","decl":{"start":{"line":52,"column":80},"end":{"line":52,"column":81}},"loc":{"start":{"line":52,"column":92},"end":{"line":67,"column":5}},"line":52},"17":{"name":"(anonymous_17)","decl":{"start":{"line":54,"column":33},"end":{"line":54,"column":34}},"loc":{"start":{"line":54,"column":47},"end":{"line":66,"column":9}},"line":54},"18":{"name":"(anonymous_18)","decl":{"start":{"line":56,"column":73},"end":{"line":56,"column":74}},"loc":{"start":{"line":56,"column":95},"end":{"line":56,"column":126}},"line":56},"19":{"name":"AdminValidation","decl":{"start":{"line":69,"column":9},"end":{"line":69,"column":24}},"loc":{"start":{"line":69,"column":41},"end":{"line":80,"column":1}},"line":69}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":18},"end":{"line":37,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":23}},{"start":{"line":11,"column":27},"end":{"line":11,"column":43}},{"start":{"line":11,"column":48},"end":{"line":37,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},"type":"if","locations":[{"start":{"line":12,"column":43},"end":{"line":12,"column":68}},{"start":{"line":12,"column":43},"end":{"line":12,"column":68}}],"line":12},"7":{"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":153}},"type":"binary-expr","locations":[{"start":{"line":13,"column":71},"end":{"line":13,"column":99}},{"start":{"line":13,"column":104},"end":{"line":13,"column":152}}],"line":13},"8":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":70}},{"start":{"line":16,"column":8},"end":{"line":16,"column":70}}],"line":16},"9":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":169}},{"start":{"line":18,"column":12},"end":{"line":18,"column":169}}],"line":18},"10":{"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":158}},"type":"binary-expr","locations":[{"start":{"line":18,"column":23},"end":{"line":18,"column":24}},{"start":{"line":18,"column":29},"end":{"line":18,"column":125}},{"start":{"line":18,"column":130},"end":{"line":18,"column":158}}],"line":18},"11":{"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":56}},{"start":{"line":18,"column":59},"end":{"line":18,"column":125}}],"line":18},"12":{"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":125}},"type":"cond-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},{"start":{"line":18,"column":119},"end":{"line":18,"column":125}}],"line":18},"13":{"loc":{"start":{"line":18,"column":67},"end":{"line":18,"column":116}},"type":"binary-expr","locations":[{"start":{"line":18,"column":67},"end":{"line":18,"column":77}},{"start":{"line":18,"column":82},"end":{"line":18,"column":115}}],"line":18},"14":{"loc":{"start":{"line":18,"column":82},"end":{"line":18,"column":112}},"type":"binary-expr","locations":[{"start":{"line":18,"column":83},"end":{"line":18,"column":98}},{"start":{"line":18,"column":103},"end":{"line":18,"column":112}}],"line":18},"15":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":52}},{"start":{"line":19,"column":12},"end":{"line":19,"column":52}}],"line":19},"16":{"loc":{"start":{"line":20,"column":12},"end":{"line":32,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":23}},{"start":{"line":21,"column":24},"end":{"line":21,"column":46}},{"start":{"line":22,"column":16},"end":{"line":22,"column":72}},{"start":{"line":23,"column":16},"end":{"line":23,"column":65}},{"start":{"line":24,"column":16},"end":{"line":24,"column":65}},{"start":{"line":25,"column":16},"end":{"line":31,"column":43}}],"line":20},"17":{"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},"type":"if","locations":[{"start":{"line":26,"column":20},"end":{"line":26,"column":128}},{"start":{"line":26,"column":20},"end":{"line":26,"column":128}}],"line":26},"18":{"loc":{"start":{"line":26,"column":24},"end":{"line":26,"column":106}},"type":"binary-expr","locations":[{"start":{"line":26,"column":24},"end":{"line":26,"column":74}},{"start":{"line":26,"column":79},"end":{"line":26,"column":90}},{"start":{"line":26,"column":94},"end":{"line":26,"column":105}}],"line":26},"19":{"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":73}},"type":"binary-expr","locations":[{"start":{"line":26,"column":42},"end":{"line":26,"column":54}},{"start":{"line":26,"column":58},"end":{"line":26,"column":73}}],"line":26},"20":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":106}},{"start":{"line":27,"column":20},"end":{"line":27,"column":106}}],"line":27},"21":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":77}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":35}},{"start":{"line":27,"column":40},"end":{"line":27,"column":42}},{"start":{"line":27,"column":47},"end":{"line":27,"column":59}},{"start":{"line":27,"column":63},"end":{"line":27,"column":75}}],"line":27},"22":{"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},"type":"if","locations":[{"start":{"line":28,"column":20},"end":{"line":28,"column":89}},{"start":{"line":28,"column":20},"end":{"line":28,"column":89}}],"line":28},"23":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":53}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":35}},{"start":{"line":28,"column":39},"end":{"line":28,"column":53}}],"line":28},"24":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":87}},{"start":{"line":29,"column":20},"end":{"line":29,"column":87}}],"line":29},"25":{"loc":{"start":{"line":29,"column":24},"end":{"line":29,"column":43}},"type":"binary-expr","locations":[{"start":{"line":29,"column":24},"end":{"line":29,"column":25}},{"start":{"line":29,"column":29},"end":{"line":29,"column":43}}],"line":29},"26":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":30,"column":42}},{"start":{"line":30,"column":20},"end":{"line":30,"column":42}}],"line":30},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},{"start":{"line":35,"column":8},"end":{"line":35,"column":35}}],"line":35},"28":{"loc":{"start":{"line":35,"column":52},"end":{"line":35,"column":74}},"type":"cond-expr","locations":[{"start":{"line":35,"column":60},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}],"line":35},"29":{"loc":{"start":{"line":43,"column":4},"end":{"line":45,"column":5}},"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":45,"column":5}},{"start":{"line":43,"column":4},"end":{"line":45,"column":5}}],"line":43},"30":{"loc":{"start":{"line":55,"column":12},"end":{"line":65,"column":13}},"type":"switch","locations":[{"start":{"line":56,"column":16},"end":{"line":56,"column":130}},{"start":{"line":57,"column":16},"end":{"line":64,"column":42}}],"line":55},"31":{"loc":{"start":{"line":60,"column":20},"end":{"line":62,"column":21}},"type":"if","locations":[{"start":{"line":60,"column":20},"end":{"line":62,"column":21}},{"start":{"line":60,"column":20},"end":{"line":62,"column":21}}],"line":60},"32":{"loc":{"start":{"line":72,"column":4},"end":{"line":79,"column":5}},"type":"if","locations":[{"start":{"line":72,"column":4},"end":{"line":79,"column":5}},{"start":{"line":72,"column":4},"end":{"line":79,"column":5}}],"line":72}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1,"67":1,"68":1,"69":1,"70":1,"71":11,"72":0,"73":1,"74":23,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":11,"14":23,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0,0,0,0,0],"17":[0,0],"18":[0,0,0],"19":[0,0],"20":[0,0],"21":[0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,11],"30":[0,0],"31":[0,0],"32":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/helpers.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/helpers.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,uDAAqD;AACrD,uCAAyC;AAE5B,QAAA,mBAAmB,GAAG,UAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;IACjF,IAAI,GAAG,CAAC,eAAe,EAAE,EAAE;QACzB,OAAO,IAAI,EAAE,CAAC;KACf;IACD,0BAA0B;IAC1B,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;QACnB,KAAK,EAAE,cAAc;KACtB,CAAC,CAAC;AACL,CAAC,CAAC;AAEW,QAAA,kBAAkB,GAAG,UAAC,WAAkB;IACnD,OAAO,UAAO,GAAY,EAAE,GAAa,EAAE,IAAkB;;;;wBAC3D,qBAAM,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,UAAC,UAAe,IAAK,OAAA,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAnB,CAAmB,CAAC,CAAC,EAAA;;oBAA5E,SAA4E,CAAC;oBAEvE,MAAM,GAAG,oCAAgB,CAAC,GAAG,CAAC,CAAC;oBACrC,IAAI,MAAM,CAAC,OAAO,EAAE,EAAE;wBACpB,sBAAO,IAAI,EAAE,EAAC;qBACf;oBAED,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;;;;SAClD,CAAC;AACJ,CAAC,CAAC;AAEF,SAAgB,eAAe,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;IAC7E,IAAM,MAAM,GAAG,GAAG,CAAC,OAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC;IAC1C,IAAM,IAAI,GAAG,sBAAW,CAAC,MAAM,CAAC,CAAC;IAEjC,IAAI,IAAI,CAAC,OAAO,EAAE;QAChB,IAAI,EAAE,CAAC;KACR;SAAM;QACL,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;KACJ;AACH,CAAC;AAXD,0CAWC","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\nimport { validationResult } from \"express-validator\";\r\nimport { getUserById } from \"./database\";\r\n\r\nexport const ensureAuthenticated = (req: Request, res: Response, next: NextFunction) => {\r\n  if (req.isAuthenticated()) {\r\n    return next();\r\n  }\r\n  /* istanbul ignore next */\r\n  res.status(401).send({\r\n    error: \"Unauthorized\",\r\n  });\r\n};\r\n\r\nexport const validateMiddleware = (validations: any[]) => {\r\n  return async (req: Request, res: Response, next: NextFunction) => {\r\n    await Promise.all(validations.map((validation: any) => validation.run(req)));\r\n\r\n    const errors = validationResult(req);\r\n    if (errors.isEmpty()) {\r\n      return next();\r\n    }\r\n\r\n    res.status(422).json({ errors: errors.array() });\r\n  };\r\n};\r\n\r\nexport function AdminValidation(req: Request, res: Response, next: NextFunction) {\r\n  const userId = req.session!.passport.user;\r\n  const user = getUserById(userId);\r\n\r\n  if (user.isAdmin) {\r\n    next();\r\n  } else {\r\n    res.status(401).send({\r\n      error: \"Unauthorized\",\r\n    });\r\n  }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ca4ad8f58a7983e8a466f1c319d6ba102d9d25a2","contentHash":"e75e0f93c0c7e44dc2dc3fb29f2efd08dd93cb6ed9209751289cdf98917146a8"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\validators.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\validators.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":513}},"2":{"start":{"line":4,"column":26},"end":{"line":4,"column":54}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":6,"column":15},"end":{"line":6,"column":39}},"5":{"start":{"line":7,"column":11},"end":{"line":7,"column":31}},"6":{"start":{"line":8,"column":30},"end":{"line":8,"column":71}},"7":{"start":{"line":9,"column":26},"end":{"line":9,"column":74}},"8":{"start":{"line":10,"column":32},"end":{"line":10,"column":75}},"9":{"start":{"line":11,"column":30},"end":{"line":11,"column":71}},"10":{"start":{"line":13,"column":16},"end":{"line":13,"column":69}},"11":{"start":{"line":13,"column":35},"end":{"line":13,"column":67}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":104}},"13":{"start":{"line":14,"column":45},"end":{"line":14,"column":101}},"14":{"start":{"line":15,"column":0},"end":{"line":15,"column":67}},"15":{"start":{"line":16,"column":0},"end":{"line":23,"column":3}},"16":{"start":{"line":24,"column":0},"end":{"line":28,"column":2}},"17":{"start":{"line":29,"column":0},"end":{"line":41,"column":2}},"18":{"start":{"line":42,"column":0},"end":{"line":48,"column":3}},"19":{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},"20":{"start":{"line":47,"column":4},"end":{"line":47,"column":11}},"21":{"start":{"line":50,"column":0},"end":{"line":56,"column":3}},"22":{"start":{"line":52,"column":4},"end":{"line":54,"column":5}},"23":{"start":{"line":55,"column":4},"end":{"line":55,"column":11}},"24":{"start":{"line":57,"column":0},"end":{"line":66,"column":2}},"25":{"start":{"line":67,"column":0},"end":{"line":74,"column":2}},"26":{"start":{"line":75,"column":0},"end":{"line":75,"column":108}},"27":{"start":{"line":76,"column":0},"end":{"line":78,"column":2}},"28":{"start":{"line":79,"column":0},"end":{"line":79,"column":83}},"29":{"start":{"line":80,"column":0},"end":{"line":83,"column":2}},"30":{"start":{"line":84,"column":0},"end":{"line":84,"column":88}},"31":{"start":{"line":85,"column":0},"end":{"line":98,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":13,"column":16},"end":{"line":13,"column":17}},"loc":{"start":{"line":13,"column":33},"end":{"line":13,"column":69}},"line":13},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":28},"end":{"line":14,"column":29}},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":103}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":42,"column":96},"end":{"line":42,"column":97}},"loc":{"start":{"line":42,"column":113},"end":{"line":48,"column":1}},"line":42},"3":{"name":"(anonymous_3)","decl":{"start":{"line":50,"column":99},"end":{"line":50,"column":100}},"loc":{"start":{"line":50,"column":116},"end":{"line":56,"column":1}},"line":50}},"branchMap":{"0":{"loc":{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},"type":"if","locations":[{"start":{"line":44,"column":4},"end":{"line":46,"column":5}}],"line":44},"1":{"loc":{"start":{"line":52,"column":4},"end":{"line":54,"column":5}},"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":54,"column":5}}],"line":52}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":1,"13":14,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":1,"22":0,"23":0,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1},"f":{"0":0,"1":14,"2":0,"3":0},"b":{"0":[0],"1":[0]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/validators.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/validators.ts"],"names":[],"mappings":"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","sourcesContent":["import { body, check, oneOf, query, sanitizeQuery } from \"express-validator\";\r\nimport { isValid } from \"shortid\";\r\nimport {\r\n  TransactionStatus,\r\n  TransactionRequestStatus,\r\n  DefaultPrivacyLevel,\r\n  NotificationsType,\r\n} from \"../src/models\";\r\nimport { includes } from \"lodash/fp\";\r\n\r\nconst TransactionStatusValues = Object.values(TransactionStatus);\r\nconst RequestStatusValues = Object.values(TransactionRequestStatus);\r\nconst DefaultPrivacyLevelValues = Object.values(DefaultPrivacyLevel);\r\nconst NotificationsTypeValues = Object.values(NotificationsType);\r\n\r\n// Validators\r\n\r\nconst isShortId = (value: string) => isValid(value);\r\n\r\nexport const shortIdValidation = (key: string) => check(key).custom(isShortId);\r\n\r\nexport const searchValidation = query(\"q\").exists();\r\n\r\nexport const userFieldsValidator = oneOf([\r\n  check(\"firstName\").exists(),\r\n  check(\"lastName\").exists(),\r\n  check(\"password\").exists(),\r\n  check(\"balance\").exists(),\r\n  check(\"avatar\").exists(),\r\n  check(\"defaultPrivacyLevel\").exists(),\r\n]);\r\n\r\nexport const isBankAccountValidator = [\r\n  body(\"bankName\").isString().trim(),\r\n  body(\"accountNumber\").isString().trim(),\r\n  body(\"routingNumber\").isString().trim(),\r\n];\r\n\r\nexport const isUserValidator = [\r\n  check(\"firstName\").optional({ checkFalsy: true }).isString().trim(),\r\n  check(\"lastName\").optional({ checkFalsy: true }).isString().trim(),\r\n  check(\"username\").optional({ checkFalsy: true }).isString().trim(),\r\n  check(\"password\").optional({ checkFalsy: true }).isString().trim(),\r\n  check(\"email\").optional({ checkFalsy: true }).isString().trim(),\r\n  check(\"phoneNumber\").optional({ checkFalsy: true }).isString().trim(),\r\n  check(\"balance\").optional({ checkFalsy: true }).isNumeric().trim(),\r\n  check(\"avatar\").optional({ checkFalsy: true }).isURL().trim(),\r\n  check(\"defaultPrivacyLevel\")\r\n    .optional({ checkFalsy: true })\r\n    .isIn([\"public\", \"private\", \"contacts\"]),\r\n];\r\n\r\nexport const sanitizeTransactionStatus = sanitizeQuery(\"status\").customSanitizer((value) => {\r\n  /* istanbul ignore if*/\r\n  if (includes(value, TransactionStatusValues)) {\r\n    return value;\r\n  }\r\n  return;\r\n});\r\n\r\n// default request status to undefined if not provided\r\nexport const sanitizeRequestStatus = sanitizeQuery(\"requestStatus\").customSanitizer((value) => {\r\n  /* istanbul ignore if*/\r\n  if (includes(value, RequestStatusValues)) {\r\n    return value;\r\n  }\r\n  return;\r\n});\r\n\r\nexport const isTransactionQSValidator = [\r\n  query(\"status\").isIn(TransactionStatusValues).optional().trim(),\r\n  query(\"requestStatus\").optional({ checkFalsy: true }).isIn(RequestStatusValues).trim(),\r\n  query(\"receiverId\").optional({ checkFalsy: true }).isString().trim(),\r\n  query(\"senderId\").optional({ checkFalsy: true }).isString().trim(),\r\n  query(\"rangeStartTs\").optional({ checkFalsy: true }).isString().trim(),\r\n  query(\"rangeEndTs\").optional({ checkFalsy: true }).isString().trim(),\r\n  query(\"amountMax\").optional({ checkFalsy: true }).isNumeric().trim(),\r\n  query(\"amountMin\").optional({ checkFalsy: true }).isNumeric().trim(),\r\n];\r\n\r\nexport const isTransactionPayloadValidator = [\r\n  body(\"transactionType\").isIn([\"payment\", \"request\"]).trim(),\r\n  body(\"privacyLevel\").optional().isIn(DefaultPrivacyLevelValues).trim(),\r\n  body(\"source\").optional().isString().trim(),\r\n  body(\"receiverId\").isString().trim(),\r\n  body(\"description\").isString().trim(),\r\n  body(\"amount\").isNumeric().trim().toInt(),\r\n];\r\n\r\nexport const isTransactionPatchValidator = [body(\"requestStatus\").isIn(RequestStatusValues)];\r\n\r\nexport const isTransactionPublicQSValidator = [\r\n  query(\"order\").optional({ checkFalsy: true }).isIn([\"default\"]),\r\n];\r\n\r\nexport const isCommentValidator = body(\"content\").isString().trim();\r\n\r\nexport const isNotificationsBodyValidator = [\r\n  body(\"items.*.type\").isIn(NotificationsTypeValues).trim(),\r\n  body(\"items.*.transactionId\").custom(isShortId),\r\n];\r\n\r\nexport const isNotificationPatchValidator = [body(\"isRead\").isBoolean()];\r\n\r\nexport const isValidEntityValidator = [\r\n  check(\"entity\")\r\n    .isIn([\r\n      \"users\",\r\n      \"contacts\",\r\n      \"bankaccounts\",\r\n      \"notifications\",\r\n      \"transactions\",\r\n      \"likes\",\r\n      \"comments\",\r\n      \"banktransfers\",\r\n    ])\r\n    .trim(),\r\n];\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c75649393140688e807c71a77dab49cb90b234d9","contentHash":"cceec9a3b768bafbe9405cde4dfbe33c7716458bca7f463296c1de8191aec9b2"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\contact-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\contact-routes.ts","statementMap":{"0":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":62}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"3":{"start":{"line":7,"column":16},"end":{"line":7,"column":51}},"4":{"start":{"line":8,"column":17},"end":{"line":8,"column":38}},"5":{"start":{"line":9,"column":16},"end":{"line":9,"column":36}},"6":{"start":{"line":10,"column":19},"end":{"line":10,"column":42}},"7":{"start":{"line":11,"column":13},"end":{"line":11,"column":39}},"8":{"start":{"line":14,"column":0},"end":{"line":19,"column":3}},"9":{"start":{"line":15,"column":19},"end":{"line":15,"column":38}},"10":{"start":{"line":16,"column":19},"end":{"line":16,"column":61}},"11":{"start":{"line":17,"column":4},"end":{"line":17,"column":20}},"12":{"start":{"line":18,"column":4},"end":{"line":18,"column":37}},"13":{"start":{"line":21,"column":0},"end":{"line":28,"column":3}},"14":{"start":{"line":23,"column":24},"end":{"line":23,"column":46}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":20}},"16":{"start":{"line":27,"column":4},"end":{"line":27,"column":35}},"17":{"start":{"line":30,"column":0},"end":{"line":35,"column":3}},"18":{"start":{"line":31,"column":20},"end":{"line":31,"column":40}},"19":{"start":{"line":32,"column":19},"end":{"line":32,"column":58}},"20":{"start":{"line":33,"column":4},"end":{"line":33,"column":20}},"21":{"start":{"line":34,"column":4},"end":{"line":34,"column":37}},"22":{"start":{"line":36,"column":0},"end":{"line":36,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":56},"end":{"line":3,"column":57}},"loc":{"start":{"line":3,"column":71},"end":{"line":5,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":25},"end":{"line":14,"column":26}},"loc":{"start":{"line":14,"column":45},"end":{"line":19,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":129},"end":{"line":21,"column":130}},"loc":{"start":{"line":21,"column":149},"end":{"line":28,"column":1}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":30,"column":137},"end":{"line":30,"column":138}},"loc":{"start":{"line":30,"column":157},"end":{"line":35,"column":1}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":23},"end":{"line":3,"column":27}},{"start":{"line":3,"column":31},"end":{"line":3,"column":51}},{"start":{"line":3,"column":56},"end":{"line":5,"column":1}}],"line":3},"1":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":61}},"type":"cond-expr","locations":[{"start":{"line":4,"column":37},"end":{"line":4,"column":40}},{"start":{"line":4,"column":43},"end":{"line":4,"column":61}}],"line":4},"2":{"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":33}},"type":"binary-expr","locations":[{"start":{"line":4,"column":12},"end":{"line":4,"column":15}},{"start":{"line":4,"column":19},"end":{"line":4,"column":33}}],"line":4}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":1},"f":{"0":1,"1":0,"2":0,"3":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/contact-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/contact-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;AAEhC,oDAA8B;AAE9B,uCAA4F;AAC5F,qCAAoE;AACpE,2CAAiD;AACjD,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,SAAS;AACT,yBAAyB;AACzB,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,UAAC,GAAG,EAAE,GAAG;IACxB,IAAA,QAAQ,GAAK,GAAG,CAAC,MAAM,SAAf,CAAgB;IAEhC,IAAM,QAAQ,GAAG,gCAAqB,CAAC,QAAQ,CAAC,CAAC;IAEjD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,QAAQ,UAAA,EAAE,CAAC,CAAC;AACzB,CAAC,CAAC,CAAC;AAEH,8BAA8B;AAC9B,MAAM,CAAC,IAAI,CACT,GAAG,EACH,6BAAmB,EACnB,4BAAkB,CAAC,CAAC,8BAAiB,CAAC,eAAe,CAAC,CAAC,CAAC,EACxD,UAAC,GAAG,EAAE,GAAG;;IACC,IAAA,aAAa,GAAK,GAAG,CAAC,IAAI,cAAb,CAAc;IACnC,0BAA0B;IAC1B,IAAM,OAAO,GAAG,+BAAoB,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,EAAE,aAAa,CAAC,CAAC;IAEnE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,SAAA,EAAE,CAAC,CAAC;AACxB,CAAC,CACF,CAAC;AACF,2CAA2C;AAC3C,MAAM,CAAC,MAAM,CACX,aAAa,EACb,6BAAmB,EACnB,4BAAkB,CAAC,CAAC,8BAAiB,CAAC,WAAW,CAAC,CAAC,CAAC,EACpD,UAAC,GAAG,EAAE,GAAG;IACC,IAAA,SAAS,GAAK,GAAG,CAAC,MAAM,UAAf,CAAgB;IAEjC,IAAM,QAAQ,GAAG,4BAAiB,CAAC,SAAS,CAAC,CAAC;IAE9C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,QAAQ,UAAA,EAAE,CAAC,CAAC;AACzB,CAAC,CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\n\r\nimport { getContactsByUsername, removeContactById, createContactForUser } from \"./database\";\r\nimport { ensureAuthenticated, validateMiddleware } from \"./helpers\";\r\nimport { shortIdValidation } from \"./validators\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\n//GET /contacts/:username\r\nrouter.get(\"/:username\", (req, res) => {\r\n  const { username } = req.params;\r\n\r\n  const contacts = getContactsByUsername(username);\r\n\r\n  res.status(200);\r\n  res.json({ contacts });\r\n});\r\n\r\n//POST /contacts (scoped-user)\r\nrouter.post(\r\n  \"/\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"contactUserId\")]),\r\n  (req, res) => {\r\n    const { contactUserId } = req.body;\r\n    /* istanbul ignore next */\r\n    const contact = createContactForUser(req.user?.id!, contactUserId);\r\n\r\n    res.status(200);\r\n    res.json({ contact });\r\n  }\r\n);\r\n//DELETE /contacts/:contactId (scoped-user)\r\nrouter.delete(\r\n  \"/:contactId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"contactId\")]),\r\n  (req, res) => {\r\n    const { contactId } = req.params;\r\n\r\n    const contacts = removeContactById(contactId);\r\n\r\n    res.status(200);\r\n    res.json({ contacts });\r\n  }\r\n);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6b646a001b9c9ee2dd1418c0b094da4858058513","contentHash":"1e8a5efd1d9b031d4d4c3552ed3a3f612c0c28063416c00f56a7ef83d8d26ef7"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\bankaccount-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\bankaccount-routes.ts","statementMap":{"0":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":62}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"3":{"start":{"line":7,"column":16},"end":{"line":7,"column":51}},"4":{"start":{"line":8,"column":17},"end":{"line":8,"column":38}},"5":{"start":{"line":9,"column":16},"end":{"line":9,"column":36}},"6":{"start":{"line":10,"column":19},"end":{"line":10,"column":42}},"7":{"start":{"line":11,"column":13},"end":{"line":11,"column":39}},"8":{"start":{"line":14,"column":0},"end":{"line":20,"column":3}},"9":{"start":{"line":18,"column":4},"end":{"line":18,"column":20}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":36}},"11":{"start":{"line":22,"column":0},"end":{"line":27,"column":3}},"12":{"start":{"line":23,"column":24},"end":{"line":23,"column":48}},"13":{"start":{"line":24,"column":18},"end":{"line":24,"column":62}},"14":{"start":{"line":25,"column":4},"end":{"line":25,"column":20}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":35}},"16":{"start":{"line":29,"column":0},"end":{"line":35,"column":3}},"17":{"start":{"line":33,"column":4},"end":{"line":33,"column":20}},"18":{"start":{"line":34,"column":4},"end":{"line":34,"column":35}},"19":{"start":{"line":37,"column":0},"end":{"line":42,"column":3}},"20":{"start":{"line":38,"column":24},"end":{"line":38,"column":48}},"21":{"start":{"line":39,"column":18},"end":{"line":39,"column":65}},"22":{"start":{"line":40,"column":4},"end":{"line":40,"column":20}},"23":{"start":{"line":41,"column":4},"end":{"line":41,"column":35}},"24":{"start":{"line":43,"column":0},"end":{"line":43,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":56},"end":{"line":3,"column":57}},"loc":{"start":{"line":3,"column":71},"end":{"line":5,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":47},"end":{"line":14,"column":48}},"loc":{"start":{"line":14,"column":67},"end":{"line":20,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":142},"end":{"line":22,"column":143}},"loc":{"start":{"line":22,"column":162},"end":{"line":27,"column":1}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":115},"end":{"line":29,"column":116}},"loc":{"start":{"line":29,"column":135},"end":{"line":35,"column":1}},"line":29},"4":{"name":"(anonymous_4)","decl":{"start":{"line":37,"column":145},"end":{"line":37,"column":146}},"loc":{"start":{"line":37,"column":165},"end":{"line":42,"column":1}},"line":37}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":23},"end":{"line":3,"column":27}},{"start":{"line":3,"column":31},"end":{"line":3,"column":51}},{"start":{"line":3,"column":56},"end":{"line":5,"column":1}}],"line":3},"1":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":61}},"type":"cond-expr","locations":[{"start":{"line":4,"column":37},"end":{"line":4,"column":40}},{"start":{"line":4,"column":43},"end":{"line":4,"column":61}}],"line":4},"2":{"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":33}},"type":"binary-expr","locations":[{"start":{"line":4,"column":12},"end":{"line":4,"column":15}},{"start":{"line":4,"column":19},"end":{"line":4,"column":33}}],"line":4}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/bankaccount-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/bankaccount-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;AAEhC,oDAA8B;AAE9B,uCAKoB;AACpB,qCAAoE;AACpE,2CAAyE;AACzE,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,SAAS;AAET,iCAAiC;AACjC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,6BAAmB,EAAE,UAAC,GAAG,EAAE,GAAG;;IAC5C,0BAA0B;IAC1B,IAAM,QAAQ,GAAG,kCAAuB,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,CAAC,CAAC;IAExD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC,CAAC;AAClC,CAAC,CAAC,CAAC;AAEH,gDAAgD;AAChD,MAAM,CAAC,GAAG,CACR,iBAAiB,EACjB,6BAAmB,EACnB,4BAAkB,CAAC,CAAC,8BAAiB,CAAC,eAAe,CAAC,CAAC,CAAC,EACxD,UAAC,GAAG,EAAE,GAAG;IACC,IAAA,aAAa,GAAK,GAAG,CAAC,MAAM,cAAf,CAAgB;IAErC,IAAM,OAAO,GAAG,6BAAkB,CAAC,aAAa,CAAC,CAAC;IAElD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,SAAA,EAAE,CAAC,CAAC;AACxB,CAAC,CACF,CAAC;AAEF,kCAAkC;AAClC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,6BAAmB,EAAE,4BAAkB,CAAC,mCAAsB,CAAC,EAAE,UAAC,GAAG,EAAE,GAAG;;IACzF,0BAA0B;IAC1B,IAAM,OAAO,GAAG,mCAAwB,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;IAElE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,SAAA,EAAE,CAAC,CAAC;AACxB,CAAC,CAAC,CAAC;AAEH,2CAA2C;AAC3C,MAAM,CAAC,MAAM,CACX,iBAAiB,EACjB,6BAAmB,EACnB,4BAAkB,CAAC,CAAC,8BAAiB,CAAC,eAAe,CAAC,CAAC,CAAC,EACxD,UAAC,GAAG,EAAE,GAAG;IACC,IAAA,aAAa,GAAK,GAAG,CAAC,MAAM,cAAf,CAAgB;IAErC,IAAM,OAAO,GAAG,gCAAqB,CAAC,aAAa,CAAC,CAAC;IAErD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,SAAA,EAAE,CAAC,CAAC;AACxB,CAAC,CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\n\r\nimport {\r\n  getBankAccountsByUserId,\r\n  getBankAccountById,\r\n  createBankAccountForUser,\r\n  removeBankAccountById,\r\n} from \"./database\";\r\nimport { ensureAuthenticated, validateMiddleware } from \"./helpers\";\r\nimport { shortIdValidation, isBankAccountValidator } from \"./validators\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\n\r\n//GET /bankAccounts (scoped-user)\r\nrouter.get(\"/\", ensureAuthenticated, (req, res) => {\r\n  /* istanbul ignore next */\r\n  const accounts = getBankAccountsByUserId(req.user?.id!);\r\n\r\n  res.status(200);\r\n  res.json({ results: accounts });\r\n});\r\n\r\n//GET /bankAccounts/:bankAccountId (scoped-user)\r\nrouter.get(\r\n  \"/:bankAccountId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"bankAccountId\")]),\r\n  (req, res) => {\r\n    const { bankAccountId } = req.params;\r\n\r\n    const account = getBankAccountById(bankAccountId);\r\n\r\n    res.status(200);\r\n    res.json({ account });\r\n  }\r\n);\r\n\r\n//POST /bankAccounts (scoped-user)\r\nrouter.post(\"/\", ensureAuthenticated, validateMiddleware(isBankAccountValidator), (req, res) => {\r\n  /* istanbul ignore next */\r\n  const account = createBankAccountForUser(req.user?.id!, req.body);\r\n\r\n  res.status(200);\r\n  res.json({ account });\r\n});\r\n\r\n//DELETE (soft) /bankAccounts (scoped-user)\r\nrouter.delete(\r\n  \"/:bankAccountId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"bankAccountId\")]),\r\n  (req, res) => {\r\n    const { bankAccountId } = req.params;\r\n\r\n    const account = removeBankAccountById(bankAccountId);\r\n\r\n    res.status(200);\r\n    res.json({ account });\r\n  }\r\n);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8e09c96b9f93942c10aaebb2057dfb61c7bd7c13","contentHash":"83cbc232ae105a56dfb5c5e9693e42aae2c39bf9b4fa8dc45eb9c42ef6dc4fe9"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\transaction-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\transaction-routes.ts","statementMap":{"0":{"start":{"line":3,"column":21},"end":{"line":9,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":88}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":18}},"3":{"start":{"line":4,"column":24},"end":{"line":4,"column":25}},"4":{"start":{"line":4,"column":32},"end":{"line":4,"column":48}},"5":{"start":{"line":4,"column":63},"end":{"line":4,"column":88}},"6":{"start":{"line":5,"column":4},"end":{"line":7,"column":24}},"7":{"start":{"line":5,"column":17},"end":{"line":5,"column":25}},"8":{"start":{"line":5,"column":31},"end":{"line":5,"column":32}},"9":{"start":{"line":5,"column":38},"end":{"line":5,"column":39}},"10":{"start":{"line":6,"column":8},"end":{"line":7,"column":24}},"11":{"start":{"line":6,"column":21},"end":{"line":6,"column":33}},"12":{"start":{"line":6,"column":39},"end":{"line":6,"column":40}},"13":{"start":{"line":6,"column":47},"end":{"line":6,"column":55}},"14":{"start":{"line":7,"column":12},"end":{"line":7,"column":24}},"15":{"start":{"line":8,"column":4},"end":{"line":8,"column":13}},"16":{"start":{"line":10,"column":22},"end":{"line":12,"column":1}},"17":{"start":{"line":11,"column":4},"end":{"line":11,"column":62}},"18":{"start":{"line":13,"column":0},"end":{"line":13,"column":62}},"19":{"start":{"line":14,"column":16},"end":{"line":14,"column":51}},"20":{"start":{"line":15,"column":11},"end":{"line":15,"column":31}},"21":{"start":{"line":16,"column":17},"end":{"line":16,"column":38}},"22":{"start":{"line":17,"column":16},"end":{"line":17,"column":36}},"23":{"start":{"line":18,"column":19},"end":{"line":18,"column":42}},"24":{"start":{"line":19,"column":25},"end":{"line":19,"column":65}},"25":{"start":{"line":20,"column":13},"end":{"line":20,"column":39}},"26":{"start":{"line":23,"column":0},"end":{"line":41,"column":3}},"27":{"start":{"line":30,"column":13},"end":{"line":30,"column":96}},"28":{"start":{"line":30,"column":111},"end":{"line":30,"column":124}},"29":{"start":{"line":30,"column":143},"end":{"line":30,"column":150}},"30":{"start":{"line":31,"column":4},"end":{"line":31,"column":20}},"31":{"start":{"line":32,"column":4},"end":{"line":40,"column":7}},"32":{"start":{"line":43,"column":0},"end":{"line":61,"column":3}},"33":{"start":{"line":50,"column":13},"end":{"line":50,"column":96}},"34":{"start":{"line":50,"column":111},"end":{"line":50,"column":124}},"35":{"start":{"line":50,"column":143},"end":{"line":50,"column":150}},"36":{"start":{"line":51,"column":4},"end":{"line":51,"column":20}},"37":{"start":{"line":52,"column":4},"end":{"line":60,"column":7}},"38":{"start":{"line":63,"column":0},"end":{"line":88,"column":3}},"39":{"start":{"line":65,"column":22},"end":{"line":65,"column":42}},"40":{"start":{"line":71,"column":31},"end":{"line":71,"column":64}},"41":{"start":{"line":71,"column":87},"end":{"line":71,"column":118}},"42":{"start":{"line":73,"column":4},"end":{"line":76,"column":5}},"43":{"start":{"line":74,"column":32},"end":{"line":74,"column":70}},"44":{"start":{"line":75,"column":8},"end":{"line":75,"column":92}},"45":{"start":{"line":77,"column":13},"end":{"line":77,"column":149}},"46":{"start":{"line":77,"column":164},"end":{"line":77,"column":177}},"47":{"start":{"line":77,"column":196},"end":{"line":77,"column":203}},"48":{"start":{"line":78,"column":4},"end":{"line":78,"column":20}},"49":{"start":{"line":79,"column":4},"end":{"line":87,"column":7}},"50":{"start":{"line":90,"column":0},"end":{"line":99,"column":3}},"51":{"start":{"line":92,"column":29},"end":{"line":92,"column":37}},"52":{"start":{"line":93,"column":26},"end":{"line":93,"column":60}},"53":{"start":{"line":94,"column":4},"end":{"line":94,"column":55}},"54":{"start":{"line":97,"column":4},"end":{"line":97,"column":20}},"55":{"start":{"line":98,"column":4},"end":{"line":98,"column":43}},"56":{"start":{"line":101,"column":0},"end":{"line":106,"column":3}},"57":{"start":{"line":102,"column":24},"end":{"line":102,"column":48}},"58":{"start":{"line":103,"column":22},"end":{"line":103,"column":72}},"59":{"start":{"line":104,"column":4},"end":{"line":104,"column":20}},"60":{"start":{"line":105,"column":4},"end":{"line":105,"column":43}},"61":{"start":{"line":108,"column":0},"end":{"line":113,"column":3}},"62":{"start":{"line":109,"column":24},"end":{"line":109,"column":48}},"63":{"start":{"line":112,"column":4},"end":{"line":112,"column":24}},"64":{"start":{"line":114,"column":0},"end":{"line":114,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":54},"end":{"line":3,"column":55}},"loc":{"start":{"line":3,"column":66},"end":{"line":9,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":56},"end":{"line":10,"column":57}},"loc":{"start":{"line":10,"column":71},"end":{"line":12,"column":1}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":44},"end":{"line":26,"column":45}},"loc":{"start":{"line":26,"column":64},"end":{"line":41,"column":1}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":46,"column":44},"end":{"line":46,"column":45}},"loc":{"start":{"line":46,"column":64},"end":{"line":61,"column":1}},"line":46},"4":{"name":"(anonymous_4)","decl":{"start":{"line":63,"column":128},"end":{"line":63,"column":129}},"loc":{"start":{"line":63,"column":148},"end":{"line":88,"column":1}},"line":63},"5":{"name":"(anonymous_5)","decl":{"start":{"line":90,"column":122},"end":{"line":90,"column":123}},"loc":{"start":{"line":90,"column":142},"end":{"line":99,"column":1}},"line":90},"6":{"name":"(anonymous_6)","decl":{"start":{"line":101,"column":142},"end":{"line":101,"column":143}},"loc":{"start":{"line":101,"column":162},"end":{"line":106,"column":1}},"line":101},"7":{"name":"(anonymous_7)","decl":{"start":{"line":108,"column":202},"end":{"line":108,"column":203}},"loc":{"start":{"line":108,"column":222},"end":{"line":113,"column":1}},"line":108}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":22},"end":{"line":3,"column":26}},{"start":{"line":3,"column":30},"end":{"line":3,"column":49}},{"start":{"line":3,"column":54},"end":{"line":9,"column":1}}],"line":3},"1":{"loc":{"start":{"line":10,"column":22},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":10,"column":23},"end":{"line":10,"column":27}},{"start":{"line":10,"column":31},"end":{"line":10,"column":51}},{"start":{"line":10,"column":56},"end":{"line":12,"column":1}}],"line":10},"2":{"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":61}},"type":"cond-expr","locations":[{"start":{"line":11,"column":37},"end":{"line":11,"column":40}},{"start":{"line":11,"column":43},"end":{"line":11,"column":61}}],"line":11},"3":{"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":33}},"type":"binary-expr","locations":[{"start":{"line":11,"column":12},"end":{"line":11,"column":15}},{"start":{"line":11,"column":19},"end":{"line":11,"column":33}}],"line":11},"4":{"loc":{"start":{"line":73,"column":4},"end":{"line":76,"column":5}},"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":76,"column":5}},{"start":{"line":73,"column":4},"end":{"line":76,"column":5}}],"line":73},"5":{"loc":{"start":{"line":77,"column":83},"end":{"line":77,"column":148}},"type":"cond-expr","locations":[{"start":{"line":77,"column":97},"end":{"line":77,"column":127}},{"start":{"line":77,"column":130},"end":{"line":77,"column":148}}],"line":77}},"s":{"0":1,"1":3,"2":3,"3":3,"4":3,"5":6,"6":3,"7":3,"8":3,"9":3,"10":6,"11":6,"12":6,"13":6,"14":22,"15":3,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":1},"f":{"0":3,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"b":{"0":[1,1,1],"1":[1,1,1],"2":[0,1],"3":[1,1],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/transaction-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/transaction-routes.ts"],"names":[],"mappings":"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","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\nimport { remove, isEmpty, slice, concat } from \"lodash/fp\";\r\nimport {\r\n  getTransactionsForUserContacts,\r\n  createTransaction,\r\n  updateTransactionById,\r\n  getPublicTransactionsDefaultSort,\r\n  getTransactionByIdForApi,\r\n  getTransactionsForUserForApi,\r\n  getPublicTransactionsByQuery,\r\n} from \"./database\";\r\nimport { ensureAuthenticated, validateMiddleware } from \"./helpers\";\r\nimport {\r\n  sanitizeTransactionStatus,\r\n  sanitizeRequestStatus,\r\n  isTransactionQSValidator,\r\n  isTransactionPayloadValidator,\r\n  shortIdValidation,\r\n  isTransactionPatchValidator,\r\n  isTransactionPublicQSValidator,\r\n} from \"./validators\";\r\nimport { getPaginatedItems } from \"../src/utils/transactionUtils\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\n\r\n//GET /transactions - scoped user, auth-required\r\nrouter.get(\r\n  \"/\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([\r\n    sanitizeTransactionStatus,\r\n    sanitizeRequestStatus,\r\n    ...isTransactionQSValidator,\r\n  ]),\r\n  (req, res) => {\r\n    /* istanbul ignore next */\r\n    const transactions = getTransactionsForUserForApi(req.user?.id!, req.query);\r\n\r\n    const { totalPages, data: paginatedItems } = getPaginatedItems(\r\n      req.query.page,\r\n      req.query.limit,\r\n      transactions\r\n    );\r\n\r\n    res.status(200);\r\n    res.json({\r\n      pageData: {\r\n        page: res.locals.paginate.page,\r\n        limit: res.locals.paginate.limit,\r\n        hasNextPages: res.locals.paginate.hasNextPages(totalPages),\r\n        totalPages,\r\n      },\r\n      results: paginatedItems,\r\n    });\r\n  }\r\n);\r\n\r\n//GET /transactions/contacts - scoped user, auth-required\r\nrouter.get(\r\n  \"/contacts\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([\r\n    sanitizeTransactionStatus,\r\n    sanitizeRequestStatus,\r\n    ...isTransactionQSValidator,\r\n  ]),\r\n  (req, res) => {\r\n    /* istanbul ignore next */\r\n    const transactions = getTransactionsForUserContacts(req.user?.id!, req.query);\r\n\r\n    const { totalPages, data: paginatedItems } = getPaginatedItems(\r\n      req.query.page,\r\n      req.query.limit,\r\n      transactions\r\n    );\r\n\r\n    res.status(200);\r\n    res.json({\r\n      pageData: {\r\n        page: res.locals.paginate.page,\r\n        limit: res.locals.paginate.limit,\r\n        hasNextPages: res.locals.paginate.hasNextPages(totalPages),\r\n        totalPages,\r\n      },\r\n      results: paginatedItems,\r\n    });\r\n  }\r\n);\r\n\r\n//GET /transactions/public - auth-required\r\nrouter.get(\r\n  \"/public\",\r\n  ensureAuthenticated,\r\n  validateMiddleware(isTransactionPublicQSValidator),\r\n  (req, res) => {\r\n    const isFirstPage = req.query.page === 1;\r\n\r\n    /* istanbul ignore next */\r\n    let transactions = !isEmpty(req.query)\r\n      ? getPublicTransactionsByQuery(req.user?.id!, req.query)\r\n      : /* istanbul ignore next */\r\n        getPublicTransactionsDefaultSort(req.user?.id!);\r\n\r\n    const { contactsTransactions, publicTransactions } = transactions;\r\n\r\n    let publicTransactionsWithContacts;\r\n\r\n    if (isFirstPage) {\r\n      const firstFiveContacts = slice(0, 5, contactsTransactions);\r\n\r\n      publicTransactionsWithContacts = concat(firstFiveContacts, publicTransactions);\r\n    }\r\n\r\n    const { totalPages, data: paginatedItems } = getPaginatedItems(\r\n      req.query.page,\r\n      req.query.limit,\r\n      isFirstPage ? publicTransactionsWithContacts : publicTransactions\r\n    );\r\n\r\n    res.status(200);\r\n    res.json({\r\n      pageData: {\r\n        page: res.locals.paginate.page,\r\n        limit: res.locals.paginate.limit,\r\n        hasNextPages: res.locals.paginate.hasNextPages(totalPages),\r\n        totalPages,\r\n      },\r\n      results: paginatedItems,\r\n    });\r\n  }\r\n);\r\n\r\n//POST /transactions - scoped-user\r\nrouter.post(\r\n  \"/\",\r\n  ensureAuthenticated,\r\n  validateMiddleware(isTransactionPayloadValidator),\r\n  (req, res) => {\r\n    const transactionPayload = req.body;\r\n    const transactionType = transactionPayload.transactionType;\r\n\r\n    remove(\"transactionType\", transactionPayload);\r\n\r\n    /* istanbul ignore next */\r\n    const transaction = createTransaction(req.user?.id!, transactionType, transactionPayload);\r\n\r\n    res.status(200);\r\n    res.json({ transaction });\r\n  }\r\n);\r\n\r\n//GET /transactions/:transactionId - scoped-user\r\nrouter.get(\r\n  \"/:transactionId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"transactionId\")]),\r\n  (req, res) => {\r\n    const { transactionId } = req.params;\r\n\r\n    const transaction = getTransactionByIdForApi(transactionId);\r\n\r\n    res.status(200);\r\n    res.json({ transaction });\r\n  }\r\n);\r\n\r\n//PATCH /transactions/:transactionId - scoped-user\r\nrouter.patch(\r\n  \"/:transactionId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"transactionId\"), ...isTransactionPatchValidator]),\r\n  (req, res) => {\r\n    const { transactionId } = req.params;\r\n\r\n    /* istanbul ignore next */\r\n    updateTransactionById(transactionId, req.body);\r\n\r\n    res.sendStatus(204);\r\n  }\r\n);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ed7ed48383770c9cb8ae34e9509599992d09059b","contentHash":"55c102f8cca389e44cfac622b06a96827cf28c801309df86372b94b0599318d4"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\like-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\like-routes.ts","statementMap":{"0":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":62}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"3":{"start":{"line":7,"column":16},"end":{"line":7,"column":51}},"4":{"start":{"line":8,"column":17},"end":{"line":8,"column":38}},"5":{"start":{"line":9,"column":16},"end":{"line":9,"column":36}},"6":{"start":{"line":10,"column":19},"end":{"line":10,"column":42}},"7":{"start":{"line":11,"column":13},"end":{"line":11,"column":39}},"8":{"start":{"line":14,"column":0},"end":{"line":19,"column":3}},"9":{"start":{"line":15,"column":24},"end":{"line":15,"column":48}},"10":{"start":{"line":16,"column":16},"end":{"line":16,"column":65}},"11":{"start":{"line":17,"column":4},"end":{"line":17,"column":20}},"12":{"start":{"line":18,"column":4},"end":{"line":18,"column":31}},"13":{"start":{"line":21,"column":0},"end":{"line":27,"column":3}},"14":{"start":{"line":23,"column":24},"end":{"line":23,"column":48}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":24}},"16":{"start":{"line":28,"column":0},"end":{"line":28,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":56},"end":{"line":3,"column":57}},"loc":{"start":{"line":3,"column":71},"end":{"line":5,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":142},"end":{"line":14,"column":143}},"loc":{"start":{"line":14,"column":162},"end":{"line":19,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":143},"end":{"line":21,"column":144}},"loc":{"start":{"line":21,"column":163},"end":{"line":27,"column":1}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":23},"end":{"line":3,"column":27}},{"start":{"line":3,"column":31},"end":{"line":3,"column":51}},{"start":{"line":3,"column":56},"end":{"line":5,"column":1}}],"line":3},"1":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":61}},"type":"cond-expr","locations":[{"start":{"line":4,"column":37},"end":{"line":4,"column":40}},{"start":{"line":4,"column":43},"end":{"line":4,"column":61}}],"line":4},"2":{"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":33}},"type":"binary-expr","locations":[{"start":{"line":4,"column":12},"end":{"line":4,"column":15}},{"start":{"line":4,"column":19},"end":{"line":4,"column":33}}],"line":4}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":1},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/like-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/like-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;AAEhC,oDAA8B;AAC9B,uCAAkE;AAClE,qCAAoE;AACpE,2CAAiD;AACjD,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,SAAS;AAET,2BAA2B;AAC3B,MAAM,CAAC,GAAG,CACR,iBAAiB,EACjB,6BAAmB,EACnB,4BAAkB,CAAC,CAAC,8BAAiB,CAAC,eAAe,CAAC,CAAC,CAAC,EACxD,UAAC,GAAG,EAAE,GAAG;IACC,IAAA,aAAa,GAAK,GAAG,CAAC,MAAM,cAAf,CAAgB;IACrC,IAAM,KAAK,GAAG,kCAAuB,CAAC,aAAa,CAAC,CAAC;IAErD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,KAAK,OAAA,EAAE,CAAC,CAAC;AACtB,CAAC,CACF,CAAC;AAEF,4BAA4B;AAC5B,MAAM,CAAC,IAAI,CACT,iBAAiB,EACjB,6BAAmB,EACnB,4BAAkB,CAAC,CAAC,8BAAiB,CAAC,eAAe,CAAC,CAAC,CAAC,EACxD,UAAC,GAAG,EAAE,GAAG;;IACC,IAAA,aAAa,GAAK,GAAG,CAAC,MAAM,cAAf,CAAgB;IACrC,0BAA0B;IAC1B,sBAAW,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,EAAE,aAAa,CAAC,CAAC;IAE1C,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;AACtB,CAAC,CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\nimport { getLikesByTransactionId, createLikes } from \"./database\";\r\nimport { ensureAuthenticated, validateMiddleware } from \"./helpers\";\r\nimport { shortIdValidation } from \"./validators\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\n\r\n//GET /likes/:transactionId\r\nrouter.get(\r\n  \"/:transactionId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"transactionId\")]),\r\n  (req, res) => {\r\n    const { transactionId } = req.params;\r\n    const likes = getLikesByTransactionId(transactionId);\r\n\r\n    res.status(200);\r\n    res.json({ likes });\r\n  }\r\n);\r\n\r\n//POST /likes/:transactionId\r\nrouter.post(\r\n  \"/:transactionId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"transactionId\")]),\r\n  (req, res) => {\r\n    const { transactionId } = req.params;\r\n    /* istanbul ignore next */\r\n    createLikes(req.user?.id!, transactionId);\r\n\r\n    res.sendStatus(200);\r\n  }\r\n);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"366c071025d55906873ad359edd630486cabe831","contentHash":"d521ddfceac5a78917ce0584937fb4e1e5c0fb18c111071f0213086297ee27a7"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\comment-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\comment-routes.ts","statementMap":{"0":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":62}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"3":{"start":{"line":7,"column":16},"end":{"line":7,"column":51}},"4":{"start":{"line":8,"column":17},"end":{"line":8,"column":38}},"5":{"start":{"line":9,"column":16},"end":{"line":9,"column":36}},"6":{"start":{"line":10,"column":19},"end":{"line":10,"column":42}},"7":{"start":{"line":11,"column":13},"end":{"line":11,"column":39}},"8":{"start":{"line":14,"column":0},"end":{"line":19,"column":3}},"9":{"start":{"line":15,"column":24},"end":{"line":15,"column":48}},"10":{"start":{"line":16,"column":19},"end":{"line":16,"column":71}},"11":{"start":{"line":17,"column":4},"end":{"line":17,"column":20}},"12":{"start":{"line":18,"column":4},"end":{"line":18,"column":37}},"13":{"start":{"line":21,"column":0},"end":{"line":28,"column":3}},"14":{"start":{"line":23,"column":24},"end":{"line":23,"column":48}},"15":{"start":{"line":24,"column":18},"end":{"line":24,"column":34}},"16":{"start":{"line":27,"column":4},"end":{"line":27,"column":24}},"17":{"start":{"line":29,"column":0},"end":{"line":29,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":56},"end":{"line":3,"column":57}},"loc":{"start":{"line":3,"column":71},"end":{"line":5,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":142},"end":{"line":14,"column":143}},"loc":{"start":{"line":14,"column":162},"end":{"line":19,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":176},"end":{"line":21,"column":177}},"loc":{"start":{"line":21,"column":196},"end":{"line":28,"column":1}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":23},"end":{"line":3,"column":27}},{"start":{"line":3,"column":31},"end":{"line":3,"column":51}},{"start":{"line":3,"column":56},"end":{"line":5,"column":1}}],"line":3},"1":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":61}},"type":"cond-expr","locations":[{"start":{"line":4,"column":37},"end":{"line":4,"column":40}},{"start":{"line":4,"column":43},"end":{"line":4,"column":61}}],"line":4},"2":{"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":33}},"type":"binary-expr","locations":[{"start":{"line":4,"column":12},"end":{"line":4,"column":15}},{"start":{"line":4,"column":19},"end":{"line":4,"column":33}}],"line":4}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":1},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/comment-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/comment-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;AAEhC,oDAA8B;AAC9B,uCAAwE;AACxE,qCAAoE;AACpE,2CAAqE;AACrE,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,SAAS;AAET,8BAA8B;AAC9B,MAAM,CAAC,GAAG,CACR,iBAAiB,EACjB,6BAAmB,EACnB,4BAAkB,CAAC,CAAC,8BAAiB,CAAC,eAAe,CAAC,CAAC,CAAC,EACxD,UAAC,GAAG,EAAE,GAAG;IACC,IAAA,aAAa,GAAK,GAAG,CAAC,MAAM,cAAf,CAAgB;IACrC,IAAM,QAAQ,GAAG,qCAA0B,CAAC,aAAa,CAAC,CAAC;IAE3D,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,QAAQ,UAAA,EAAE,CAAC,CAAC;AACzB,CAAC,CACF,CAAC;AAEF,+BAA+B;AAC/B,MAAM,CAAC,IAAI,CACT,iBAAiB,EACjB,6BAAmB,EACnB,4BAAkB,CAAC,CAAC,8BAAiB,CAAC,eAAe,CAAC,EAAE,+BAAkB,CAAC,CAAC,EAC5E,UAAC,GAAG,EAAE,GAAG;;IACC,IAAA,aAAa,GAAK,GAAG,CAAC,MAAM,cAAf,CAAgB;IAC7B,IAAA,OAAO,GAAK,GAAG,CAAC,IAAI,QAAb,CAAc;IAE7B,0BAA0B;IAC1B,yBAAc,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,EAAE,aAAa,EAAE,OAAO,CAAC,CAAC;IAEtD,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;AACtB,CAAC,CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\nimport { getCommentsByTransactionId, createComments } from \"./database\";\r\nimport { ensureAuthenticated, validateMiddleware } from \"./helpers\";\r\nimport { shortIdValidation, isCommentValidator } from \"./validators\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\n\r\n//GET /comments/:transactionId\r\nrouter.get(\r\n  \"/:transactionId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"transactionId\")]),\r\n  (req, res) => {\r\n    const { transactionId } = req.params;\r\n    const comments = getCommentsByTransactionId(transactionId);\r\n\r\n    res.status(200);\r\n    res.json({ comments });\r\n  }\r\n);\r\n\r\n//POST /comments/:transactionId\r\nrouter.post(\r\n  \"/:transactionId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"transactionId\"), isCommentValidator]),\r\n  (req, res) => {\r\n    const { transactionId } = req.params;\r\n    const { content } = req.body;\r\n\r\n    /* istanbul ignore next */\r\n    createComments(req.user?.id!, transactionId, content);\r\n\r\n    res.sendStatus(200);\r\n  }\r\n);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0d564af1a966543acf957b757e398d65124b7f67","contentHash":"3f9f8e770547696f95ac9884ad7020ce7d18c8ef87b25dbf810fcd8c4998f002"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\notification-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\notification-routes.ts","statementMap":{"0":{"start":{"line":3,"column":21},"end":{"line":9,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":88}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":18}},"3":{"start":{"line":4,"column":24},"end":{"line":4,"column":25}},"4":{"start":{"line":4,"column":32},"end":{"line":4,"column":48}},"5":{"start":{"line":4,"column":63},"end":{"line":4,"column":88}},"6":{"start":{"line":5,"column":4},"end":{"line":7,"column":24}},"7":{"start":{"line":5,"column":17},"end":{"line":5,"column":25}},"8":{"start":{"line":5,"column":31},"end":{"line":5,"column":32}},"9":{"start":{"line":5,"column":38},"end":{"line":5,"column":39}},"10":{"start":{"line":6,"column":8},"end":{"line":7,"column":24}},"11":{"start":{"line":6,"column":21},"end":{"line":6,"column":33}},"12":{"start":{"line":6,"column":39},"end":{"line":6,"column":40}},"13":{"start":{"line":6,"column":47},"end":{"line":6,"column":55}},"14":{"start":{"line":7,"column":12},"end":{"line":7,"column":24}},"15":{"start":{"line":8,"column":4},"end":{"line":8,"column":13}},"16":{"start":{"line":10,"column":22},"end":{"line":12,"column":1}},"17":{"start":{"line":11,"column":4},"end":{"line":11,"column":62}},"18":{"start":{"line":13,"column":0},"end":{"line":13,"column":62}},"19":{"start":{"line":14,"column":16},"end":{"line":14,"column":51}},"20":{"start":{"line":15,"column":17},"end":{"line":15,"column":38}},"21":{"start":{"line":16,"column":16},"end":{"line":16,"column":36}},"22":{"start":{"line":17,"column":19},"end":{"line":17,"column":42}},"23":{"start":{"line":18,"column":13},"end":{"line":18,"column":39}},"24":{"start":{"line":21,"column":0},"end":{"line":27,"column":3}},"25":{"start":{"line":25,"column":4},"end":{"line":25,"column":20}},"26":{"start":{"line":26,"column":4},"end":{"line":26,"column":41}},"27":{"start":{"line":29,"column":0},"end":{"line":37,"column":3}},"28":{"start":{"line":31,"column":16},"end":{"line":31,"column":30}},"29":{"start":{"line":34,"column":4},"end":{"line":34,"column":20}},"30":{"start":{"line":36,"column":4},"end":{"line":36,"column":41}},"31":{"start":{"line":39,"column":0},"end":{"line":45,"column":3}},"32":{"start":{"line":41,"column":25},"end":{"line":41,"column":50}},"33":{"start":{"line":44,"column":4},"end":{"line":44,"column":24}},"34":{"start":{"line":46,"column":0},"end":{"line":46,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":54},"end":{"line":3,"column":55}},"loc":{"start":{"line":3,"column":66},"end":{"line":9,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":56},"end":{"line":10,"column":57}},"loc":{"start":{"line":10,"column":71},"end":{"line":12,"column":1}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":47},"end":{"line":21,"column":48}},"loc":{"start":{"line":21,"column":67},"end":{"line":27,"column":1}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":141},"end":{"line":29,"column":142}},"loc":{"start":{"line":29,"column":161},"end":{"line":37,"column":1}},"line":29},"4":{"name":"(anonymous_4)","decl":{"start":{"line":39,"column":205},"end":{"line":39,"column":206}},"loc":{"start":{"line":39,"column":225},"end":{"line":45,"column":1}},"line":39}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":22},"end":{"line":3,"column":26}},{"start":{"line":3,"column":30},"end":{"line":3,"column":49}},{"start":{"line":3,"column":54},"end":{"line":9,"column":1}}],"line":3},"1":{"loc":{"start":{"line":10,"column":22},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":10,"column":23},"end":{"line":10,"column":27}},{"start":{"line":10,"column":31},"end":{"line":10,"column":51}},{"start":{"line":10,"column":56},"end":{"line":12,"column":1}}],"line":10},"2":{"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":61}},"type":"cond-expr","locations":[{"start":{"line":11,"column":37},"end":{"line":11,"column":40}},{"start":{"line":11,"column":43},"end":{"line":11,"column":61}}],"line":11},"3":{"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":33}},"type":"binary-expr","locations":[{"start":{"line":11,"column":12},"end":{"line":11,"column":15}},{"start":{"line":11,"column":19},"end":{"line":11,"column":33}}],"line":11}},"s":{"0":1,"1":2,"2":2,"3":2,"4":2,"5":3,"6":2,"7":2,"8":2,"9":2,"10":3,"11":3,"12":3,"13":3,"14":4,"15":2,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":1},"f":{"0":2,"1":1,"2":0,"3":0,"4":0},"b":{"0":[1,1,1],"1":[1,1,1],"2":[0,1],"3":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/notification-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/notification-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;;;;;;;;AAEhC,oDAA8B;AAC9B,uCAIoB;AACpB,qCAAoE;AACpE,2CAIsB;AACtB,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,SAAS;AAET,qBAAqB;AACrB,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,6BAAmB,EAAE,UAAC,GAAG,EAAE,GAAG;;IAC5C,0BAA0B;IAC1B,IAAM,aAAa,GAAG,yCAA8B,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,CAAC,CAAC;IAEpE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,CAAC,CAAC;AACvC,CAAC,CAAC,CAAC;AAEH,0BAA0B;AAC1B,MAAM,CAAC,IAAI,CACT,OAAO,EACP,6BAAmB,EACnB,4BAAkB,gBAAK,yCAA4B,EAAE,EACrD,UAAC,GAAG,EAAE,GAAG;;IACC,IAAA,KAAK,GAAK,GAAG,CAAC,IAAI,MAAb,CAAc;IAC3B,0BAA0B;IAC1B,IAAM,aAAa,GAAG,8BAAmB,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,EAAE,KAAK,CAAC,CAAC;IAEhE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,aAAa;IACb,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,CAAC,CAAC;AACvC,CAAC,CACF,CAAC;AAEF,oDAAoD;AACpD,MAAM,CAAC,KAAK,CACV,kBAAkB,EAClB,6BAAmB,EACnB,4BAAkB,iBAAE,8BAAiB,CAAC,gBAAgB,CAAC,GAAK,yCAA4B,EAAE,EAC1F,UAAC,GAAG,EAAE,GAAG;;IACC,IAAA,cAAc,GAAK,GAAG,CAAC,MAAM,eAAf,CAAgB;IACtC,0BAA0B;IAC1B,iCAAsB,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,EAAE,cAAc,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;IAEhE,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;AACtB,CAAC,CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\nimport {\r\n  createNotifications,\r\n  updateNotificationById,\r\n  getUnreadNotificationsByUserId,\r\n} from \"./database\";\r\nimport { ensureAuthenticated, validateMiddleware } from \"./helpers\";\r\nimport {\r\n  isNotificationsBodyValidator,\r\n  shortIdValidation,\r\n  isNotificationPatchValidator,\r\n} from \"./validators\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\n\r\n//GET /notifications/\r\nrouter.get(\"/\", ensureAuthenticated, (req, res) => {\r\n  /* istanbul ignore next */\r\n  const notifications = getUnreadNotificationsByUserId(req.user?.id!);\r\n\r\n  res.status(200);\r\n  res.json({ results: notifications });\r\n});\r\n\r\n//POST /notifications/bulk\r\nrouter.post(\r\n  \"/bulk\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([...isNotificationsBodyValidator]),\r\n  (req, res) => {\r\n    const { items } = req.body;\r\n    /* istanbul ignore next */\r\n    const notifications = createNotifications(req.user?.id!, items);\r\n\r\n    res.status(200);\r\n    // @ts-ignore\r\n    res.json({ results: notifications });\r\n  }\r\n);\r\n\r\n//PATCH /notifications/:notificationId - scoped-user\r\nrouter.patch(\r\n  \"/:notificationId\",\r\n  ensureAuthenticated,\r\n  validateMiddleware([shortIdValidation(\"notificationId\"), ...isNotificationPatchValidator]),\r\n  (req, res) => {\r\n    const { notificationId } = req.params;\r\n    /* istanbul ignore next */\r\n    updateNotificationById(req.user?.id!, notificationId, req.body);\r\n\r\n    res.sendStatus(204);\r\n  }\r\n);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"76aac7e9fc27796499f4f2475c0470dcca57a997","contentHash":"9656e380702021c1041328687e6dfcf3b5b23d5a01fd021f8f52f036c03d6093"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\banktransfer-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\banktransfer-routes.ts","statementMap":{"0":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":62}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"3":{"start":{"line":7,"column":16},"end":{"line":7,"column":51}},"4":{"start":{"line":8,"column":17},"end":{"line":8,"column":38}},"5":{"start":{"line":9,"column":16},"end":{"line":9,"column":36}},"6":{"start":{"line":10,"column":13},"end":{"line":10,"column":39}},"7":{"start":{"line":13,"column":0},"end":{"line":19,"column":3}},"8":{"start":{"line":17,"column":4},"end":{"line":17,"column":20}},"9":{"start":{"line":18,"column":4},"end":{"line":18,"column":39}},"10":{"start":{"line":20,"column":0},"end":{"line":20,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":56},"end":{"line":3,"column":57}},"loc":{"start":{"line":3,"column":71},"end":{"line":5,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":47},"end":{"line":13,"column":48}},"loc":{"start":{"line":13,"column":67},"end":{"line":19,"column":1}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":23},"end":{"line":3,"column":27}},{"start":{"line":3,"column":31},"end":{"line":3,"column":51}},{"start":{"line":3,"column":56},"end":{"line":5,"column":1}}],"line":3},"1":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":61}},"type":"cond-expr","locations":[{"start":{"line":4,"column":37},"end":{"line":4,"column":40}},{"start":{"line":4,"column":43},"end":{"line":4,"column":61}}],"line":4},"2":{"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":33}},"type":"binary-expr","locations":[{"start":{"line":4,"column":12},"end":{"line":4,"column":15}},{"start":{"line":4,"column":19},"end":{"line":4,"column":33}}],"line":4}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/banktransfer-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/banktransfer-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;AAEhC,oDAA8B;AAE9B,uCAAsD;AACtD,qCAAgD;AAChD,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,SAAS;AAET,kCAAkC;AAClC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,6BAAmB,EAAE,UAAC,GAAG,EAAE,GAAG;;IAC5C,0BAA0B;IAC1B,IAAM,SAAS,GAAG,mCAAwB,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,CAAC,CAAC;IAE1D,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,SAAS,WAAA,EAAE,CAAC,CAAC;AAC1B,CAAC,CAAC,CAAC;AAEH,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\n\r\nimport { getBankTransfersByUserId } from \"./database\";\r\nimport { ensureAuthenticated } from \"./helpers\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\n\r\n//GET /bankTransfers (scoped-user)\r\nrouter.get(\"/\", ensureAuthenticated, (req, res) => {\r\n  /* istanbul ignore next */\r\n  const transfers = getBankTransfersByUserId(req.user?.id!);\r\n\r\n  res.status(200);\r\n  res.json({ transfers });\r\n});\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f26ba4f1cc163e72bd51220c8789cd7d241030ff","contentHash":"142ded0666ad11798e35eeaf9ca65b688ce217bbe6f69432c8d13414a42ae188"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\testdata-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\testdata-routes.ts","statementMap":{"0":{"start":{"line":3,"column":21},"end":{"line":9,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":88}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":18}},"3":{"start":{"line":4,"column":24},"end":{"line":4,"column":25}},"4":{"start":{"line":4,"column":32},"end":{"line":4,"column":48}},"5":{"start":{"line":4,"column":63},"end":{"line":4,"column":88}},"6":{"start":{"line":5,"column":4},"end":{"line":7,"column":24}},"7":{"start":{"line":5,"column":17},"end":{"line":5,"column":25}},"8":{"start":{"line":5,"column":31},"end":{"line":5,"column":32}},"9":{"start":{"line":5,"column":38},"end":{"line":5,"column":39}},"10":{"start":{"line":6,"column":8},"end":{"line":7,"column":24}},"11":{"start":{"line":6,"column":21},"end":{"line":6,"column":33}},"12":{"start":{"line":6,"column":39},"end":{"line":6,"column":40}},"13":{"start":{"line":6,"column":47},"end":{"line":6,"column":55}},"14":{"start":{"line":7,"column":12},"end":{"line":7,"column":24}},"15":{"start":{"line":8,"column":4},"end":{"line":8,"column":13}},"16":{"start":{"line":10,"column":22},"end":{"line":12,"column":1}},"17":{"start":{"line":11,"column":4},"end":{"line":11,"column":62}},"18":{"start":{"line":13,"column":0},"end":{"line":13,"column":62}},"19":{"start":{"line":14,"column":16},"end":{"line":14,"column":51}},"20":{"start":{"line":15,"column":17},"end":{"line":15,"column":38}},"21":{"start":{"line":16,"column":16},"end":{"line":16,"column":36}},"22":{"start":{"line":17,"column":19},"end":{"line":17,"column":42}},"23":{"start":{"line":18,"column":13},"end":{"line":18,"column":39}},"24":{"start":{"line":21,"column":0},"end":{"line":24,"column":3}},"25":{"start":{"line":22,"column":4},"end":{"line":22,"column":30}},"26":{"start":{"line":23,"column":4},"end":{"line":23,"column":24}},"27":{"start":{"line":26,"column":0},"end":{"line":31,"column":3}},"28":{"start":{"line":27,"column":17},"end":{"line":27,"column":34}},"29":{"start":{"line":28,"column":18},"end":{"line":28,"column":52}},"30":{"start":{"line":29,"column":4},"end":{"line":29,"column":20}},"31":{"start":{"line":30,"column":4},"end":{"line":30,"column":35}},"32":{"start":{"line":32,"column":0},"end":{"line":32,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":54},"end":{"line":3,"column":55}},"loc":{"start":{"line":3,"column":66},"end":{"line":9,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":56},"end":{"line":10,"column":57}},"loc":{"start":{"line":10,"column":71},"end":{"line":12,"column":1}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":21},"end":{"line":21,"column":22}},"loc":{"start":{"line":21,"column":41},"end":{"line":24,"column":1}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":106},"end":{"line":26,"column":107}},"loc":{"start":{"line":26,"column":126},"end":{"line":31,"column":1}},"line":26}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":9,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":22},"end":{"line":3,"column":26}},{"start":{"line":3,"column":30},"end":{"line":3,"column":49}},{"start":{"line":3,"column":54},"end":{"line":9,"column":1}}],"line":3},"1":{"loc":{"start":{"line":10,"column":22},"end":{"line":12,"column":1}},"type":"binary-expr","locations":[{"start":{"line":10,"column":23},"end":{"line":10,"column":27}},{"start":{"line":10,"column":31},"end":{"line":10,"column":51}},{"start":{"line":10,"column":56},"end":{"line":12,"column":1}}],"line":10},"2":{"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":61}},"type":"cond-expr","locations":[{"start":{"line":11,"column":37},"end":{"line":11,"column":40}},{"start":{"line":11,"column":43},"end":{"line":11,"column":61}}],"line":11},"3":{"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":33}},"type":"binary-expr","locations":[{"start":{"line":11,"column":12},"end":{"line":11,"column":15}},{"start":{"line":11,"column":19},"end":{"line":11,"column":33}}],"line":11}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":1},"f":{"0":1,"1":1,"2":0,"3":0},"b":{"0":[1,1,1],"1":[1,1,1],"2":[0,1],"3":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/testdata-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/testdata-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;;;;;;;;AAEhC,oDAA8B;AAC9B,uCAA2D;AAC3D,qCAA+C;AAC/C,2CAAsD;AAEtD,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,SAAS;AAET,qBAAqB;AACrB,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,GAAG,EAAE,GAAG;IAC5B,uBAAY,EAAE,CAAC;IACf,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;AACtB,CAAC,CAAC,CAAC;AAEH,uBAAuB;AACvB,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,4BAAkB,gBAAK,mCAAsB,EAAE,EAAE,UAAC,GAAG,EAAE,GAAG;IACvE,IAAA,MAAM,GAAK,GAAG,CAAC,MAAM,OAAf,CAAgB;IAC9B,IAAM,OAAO,GAAG,0BAAe,CAAC,MAAwB,CAAC,CAAC;IAE1D,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,OAAO,SAAA,EAAE,CAAC,CAAC;AACxB,CAAC,CAAC,CAAC;AAEH,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\nimport { getAllForEntity, seedDatabase } from \"./database\";\r\nimport { validateMiddleware } from \"./helpers\";\r\nimport { isValidEntityValidator } from \"./validators\";\r\nimport { DbSchema } from \"../src/models/db-schema\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\n\r\n//POST /testData/seed\r\nrouter.post(\"/seed\", (req, res) => {\r\n  seedDatabase();\r\n  res.sendStatus(200);\r\n});\r\n\r\n//GET /testData/:entity\r\nrouter.get(\"/:entity\", validateMiddleware([...isValidEntityValidator]), (req, res) => {\r\n  const { entity } = req.params;\r\n  const results = getAllForEntity(entity as keyof DbSchema);\r\n\r\n  res.status(200);\r\n  res.json({ results });\r\n});\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cf073a19d21fcf1b6c06057fca46353b01f5902e","contentHash":"caba5d387b81be8520deb275e047b2de09ed9029e079aef7dba2923c4d2298ee"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\event-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\event-routes.ts","statementMap":{"0":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"1":{"start":{"line":4,"column":4},"end":{"line":4,"column":62}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"3":{"start":{"line":7,"column":16},"end":{"line":7,"column":51}},"4":{"start":{"line":8,"column":17},"end":{"line":8,"column":38}},"5":{"start":{"line":9,"column":17},"end":{"line":9,"column":38}},"6":{"start":{"line":10,"column":16},"end":{"line":10,"column":36}},"7":{"start":{"line":11,"column":19},"end":{"line":11,"column":42}},"8":{"start":{"line":12,"column":13},"end":{"line":12,"column":39}},"9":{"start":{"line":13,"column":0},"end":{"line":16,"column":3}},"10":{"start":{"line":14,"column":20},"end":{"line":14,"column":45}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":24}},"12":{"start":{"line":17,"column":0},"end":{"line":42,"column":3}},"13":{"start":{"line":18,"column":18},"end":{"line":18,"column":27}},"14":{"start":{"line":19,"column":19},"end":{"line":19,"column":44}},"15":{"start":{"line":20,"column":15},"end":{"line":20,"column":48}},"16":{"start":{"line":21,"column":4},"end":{"line":26,"column":5}},"17":{"start":{"line":22,"column":20},"end":{"line":22,"column":51}},"18":{"start":{"line":23,"column":8},"end":{"line":25,"column":11}},"19":{"start":{"line":24,"column":12},"end":{"line":24,"column":53}},"20":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"21":{"start":{"line":28,"column":8},"end":{"line":28,"column":93}},"22":{"start":{"line":28,"column":54},"end":{"line":28,"column":89}},"23":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"24":{"start":{"line":31,"column":8},"end":{"line":31,"column":99}},"25":{"start":{"line":31,"column":54},"end":{"line":31,"column":95}},"26":{"start":{"line":33,"column":4},"end":{"line":37,"column":5}},"27":{"start":{"line":34,"column":8},"end":{"line":36,"column":11}},"28":{"start":{"line":35,"column":12},"end":{"line":35,"column":86}},"29":{"start":{"line":38,"column":4},"end":{"line":41,"column":7}},"30":{"start":{"line":43,"column":0},"end":{"line":50,"column":3}},"31":{"start":{"line":44,"column":18},"end":{"line":44,"column":36}},"32":{"start":{"line":48,"column":4},"end":{"line":48,"column":20}},"33":{"start":{"line":49,"column":4},"end":{"line":49,"column":31}},"34":{"start":{"line":51,"column":0},"end":{"line":54,"column":3}},"35":{"start":{"line":52,"column":26},"end":{"line":52,"column":57}},"36":{"start":{"line":53,"column":4},"end":{"line":53,"column":30}},"37":{"start":{"line":55,"column":0},"end":{"line":55,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":56},"end":{"line":3,"column":57}},"loc":{"start":{"line":3,"column":71},"end":{"line":5,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":19},"end":{"line":13,"column":20}},"loc":{"start":{"line":13,"column":39},"end":{"line":16,"column":1}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":28},"end":{"line":17,"column":29}},"loc":{"start":{"line":17,"column":48},"end":{"line":42,"column":1}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":23,"column":35},"end":{"line":23,"column":36}},"loc":{"start":{"line":23,"column":52},"end":{"line":25,"column":9}},"line":23},"4":{"name":"(anonymous_4)","decl":{"start":{"line":28,"column":35},"end":{"line":28,"column":36}},"loc":{"start":{"line":28,"column":52},"end":{"line":28,"column":91}},"line":28},"5":{"name":"(anonymous_5)","decl":{"start":{"line":31,"column":35},"end":{"line":31,"column":36}},"loc":{"start":{"line":31,"column":52},"end":{"line":31,"column":97}},"line":31},"6":{"name":"(anonymous_6)","decl":{"start":{"line":34,"column":22},"end":{"line":34,"column":23}},"loc":{"start":{"line":34,"column":40},"end":{"line":36,"column":9}},"line":34},"7":{"name":"(anonymous_7)","decl":{"start":{"line":43,"column":130},"end":{"line":43,"column":131}},"loc":{"start":{"line":43,"column":150},"end":{"line":50,"column":1}},"line":43},"8":{"name":"(anonymous_8)","decl":{"start":{"line":51,"column":16},"end":{"line":51,"column":17}},"loc":{"start":{"line":51,"column":36},"end":{"line":54,"column":1}},"line":51}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":22},"end":{"line":5,"column":1}},"type":"binary-expr","locations":[{"start":{"line":3,"column":23},"end":{"line":3,"column":27}},{"start":{"line":3,"column":31},"end":{"line":3,"column":51}},{"start":{"line":3,"column":56},"end":{"line":5,"column":1}}],"line":3},"1":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":61}},"type":"cond-expr","locations":[{"start":{"line":4,"column":37},"end":{"line":4,"column":40}},{"start":{"line":4,"column":43},"end":{"line":4,"column":61}}],"line":4},"2":{"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":33}},"type":"binary-expr","locations":[{"start":{"line":4,"column":12},"end":{"line":4,"column":15}},{"start":{"line":4,"column":19},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":21,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":26,"column":5}},{"start":{"line":21,"column":4},"end":{"line":26,"column":5}}],"line":21},"4":{"loc":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},{"start":{"line":27,"column":4},"end":{"line":29,"column":5}}],"line":27},"5":{"loc":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},{"start":{"line":30,"column":4},"end":{"line":32,"column":5}}],"line":30},"6":{"loc":{"start":{"line":33,"column":4},"end":{"line":37,"column":5}},"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":37,"column":5}},{"start":{"line":33,"column":4},"end":{"line":37,"column":5}}],"line":33},"7":{"loc":{"start":{"line":35,"column":19},"end":{"line":35,"column":85}},"type":"cond-expr","locations":[{"start":{"line":35,"column":48},"end":{"line":35,"column":65}},{"start":{"line":35,"column":68},"end":{"line":35,"column":85}}],"line":35}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":1,"13":4,"14":4,"15":4,"16":4,"17":0,"18":0,"19":0,"20":4,"21":0,"22":0,"23":4,"24":0,"25":0,"26":4,"27":0,"28":0,"29":4,"30":1,"31":0,"32":0,"33":0,"34":1,"35":4,"36":4,"37":1},"f":{"0":1,"1":0,"2":4,"3":0,"4":0,"5":0,"6":0,"7":0,"8":4},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,4],"4":[0,4],"5":[0,4],"6":[0,4],"7":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/event-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/event-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;AAEhC,oDAA8B;AAG9B,uCAA0C;AAE1C,uCASoB;AAEpB,qCAAoE;AACpE,2CAKsB;AACtB,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAahC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,UAAC,GAAY,EAAE,GAAa;IAC7C,IAAM,SAAS,GAAY,uBAAY,EAAE,CAAC;IAE1C,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACtB,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,eAAe,EAAE,UAAC,GAAY,EAAE,GAAa;IACtD,IAAM,OAAO,GAAW,GAAG,CAAC,KAAK,CAAC;IAElC,IAAI,QAAQ,GAAY,uBAAY,EAAE,CAAC;IACvC,IAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC;IAE/C,IAAI,OAAO,CAAC,MAAM,KAAK,EAAE,EAAE;QACzB,IAAM,KAAG,GAAW,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;QACpD,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAC,KAAY;YACtC,OAAO,KAAG,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;KACJ;IAED,IAAI,OAAO,CAAC,IAAI,KAAK,KAAK,EAAE;QAC1B,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAC,KAAY,IAAK,OAAA,KAAK,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,EAA3B,CAA2B,CAAC,CAAC;KAC3E;IAED,IAAI,OAAO,CAAC,OAAO,KAAK,KAAK,EAAE;QAC7B,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAC,KAAY,IAAK,OAAA,KAAK,CAAC,OAAO,KAAK,OAAO,CAAC,OAAO,EAAjC,CAAiC,CAAC,CAAC;KACjF;IAED,IAAI,OAAO,CAAC,OAAO,KAAK,MAAM,EAAE;QAC9B,QAAQ,CAAC,IAAI,CAAC,UAAC,EAAS,EAAE,EAAS;YACnC,OAAA,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI;QAAlE,CAAkE,CACjE,CAAC;KACH;IAED,GAAG,CAAC,IAAI,CAAC;QACP,MAAM,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC,MAAM,CAAC;QACzC,IAAI,MAAA;KACL,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,WAAW,EACtB,6BAAmB,EACnB,4BAAkB,CAAC,CAAC,8BAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,EAClD,UAAC,GAAG,EAAE,GAAG;IACC,IAAA,OAAO,GAAK,GAAG,CAAC,MAAM,QAAf,CAAgB;IAE/B,4BAA4B;IAC5B,0BAA0B;IAE1B,IAAM,KAAK,GAAG,uBAAY,CAAC,OAAO,CAAC,CAAC;IAEpC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,KAAK,OAAA,EAAE,CAAC,CAAC;AACtB,CAAC,CACA,CAAC;AAEF,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,UAAC,GAAY,EAAE,GAAa;IAC1C,IAAM,eAAe,GAAG,6BAAkB,EAAE,CAAC;IAE7C,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;AAC5B,CAAC,CAAC,CAAC;AAEH,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\r\n\r\nimport express from \"express\";\r\nimport { isEqual, pick } from \"lodash/fp\";\r\nimport { Request, Response } from \"express\";\r\nimport { getAllEvents } from \"./database\";\r\n\r\nimport {\r\n  updateUserById,\r\n  getUserByUsername,\r\n  getEventBy,\r\n  //   getEventId,\r\n  getEventById,\r\n  getEventsBy,\r\n  getEventsByUserId,\r\n  getRetentionCohort,\r\n} from \"./database\";\r\nimport { Event } from \"../src/models/event\";\r\nimport { ensureAuthenticated, validateMiddleware } from \"./helpers\";\r\nimport {\r\n  shortIdValidation,\r\n  searchValidation,\r\n  userFieldsValidator,\r\n  isUserValidator,\r\n} from \"./validators\";\r\nconst router = express.Router();\r\n\r\n// Routes\r\n\r\ninterface Filter {\r\n  sorting: string;\r\n  type: string;\r\n  browser: string;\r\n  search: string;\r\n  offset: number;\r\n}\r\n\r\n\r\nrouter.get(\"/all\", (req: Request, res: Response) => {\r\n  const allEvents: Event[] = getAllEvents();\r\n\r\n  res.json(allEvents);\r\n});\r\n\r\nrouter.get(\"/all-filtered\", (req: Request, res: Response) => {\r\n  const filters: Filter = req.query;\r\n  \r\n  let filtered: Event[] = getAllEvents();\r\n  const more = filtered.length >= filters.offset;\r\n  \r\n  if (filters.search !== \"\") {\r\n    const reg: RegExp = new RegExp(filters.search, \"i\");\r\n    filtered = filtered.filter((event: Event) => {\r\n      return reg.test(JSON.stringify(event));\r\n    });\r\n  }\r\n  \r\n  if (filters.type !== \"all\") {\r\n    filtered = filtered.filter((event: Event) => event.name === filters.type);\r\n  }\r\n  \r\n  if (filters.browser !== \"all\") {\r\n    filtered = filtered.filter((event: Event) => event.browser === filters.browser);\r\n  }\r\n  \r\n  if (filters.sorting !== \"none\") {\r\n    filtered.sort((e1: Event, e2: Event) =>\r\n    filters.sorting[0] === \"+\" ? e1.date - e2.date : e2.date - e1.date\r\n    );\r\n  }\r\n  \r\n  res.json({\r\n    events: filtered.slice(0, filters.offset),\r\n    more,\r\n  });\r\n});\r\n\r\nrouter.get(\"/:eventId\",\r\nensureAuthenticated,\r\nvalidateMiddleware([shortIdValidation(\"eventId\")]),\r\n(req, res) => {\r\n  const { eventId } = req.params;\r\n  \r\n  // Permission: account owner\r\n  /* istanbul ignore next */\r\n  \r\n  const event = getEventById(eventId);\r\n  \r\n  res.status(200);\r\n  res.json({ event });\r\n}\r\n);\r\n\r\nrouter.get(\"/\", (req: Request, res: Response) => {\r\n  const retentionCohort = getRetentionCohort();\r\n\r\n  res.json(retentionCohort);\r\n});\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e18e79b7907e516297cf0f41b6b85012945199bc","contentHash":"0ecc0a5a814eb40a76536fedc513f74174d4cafee77db03bea1451ea458076ed"},"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\sessions-routes.ts":{"path":"C:\\Users\\indya\\Documents\\GitHub\\analytics-challenge\\backend\\sessions-routes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":16},"end":{"line":6,"column":51}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":38}},"5":{"start":{"line":8,"column":13},"end":{"line":8,"column":39}},"6":{"start":{"line":9,"column":0},"end":{"line":12,"column":3}},"7":{"start":{"line":10,"column":17},"end":{"line":10,"column":79}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":21}},"9":{"start":{"line":13,"column":0},"end":{"line":16,"column":3}},"10":{"start":{"line":14,"column":17},"end":{"line":14,"column":78}},"11":{"start":{"line":15,"column":4},"end":{"line":15,"column":21}},"12":{"start":{"line":17,"column":0},"end":{"line":20,"column":3}},"13":{"start":{"line":18,"column":17},"end":{"line":18,"column":45}},"14":{"start":{"line":19,"column":4},"end":{"line":19,"column":21}},"15":{"start":{"line":21,"column":0},"end":{"line":24,"column":3}},"16":{"start":{"line":22,"column":17},"end":{"line":22,"column":44}},"17":{"start":{"line":23,"column":4},"end":{"line":23,"column":21}},"18":{"start":{"line":25,"column":0},"end":{"line":25,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":31},"end":{"line":9,"column":32}},"loc":{"start":{"line":9,"column":51},"end":{"line":12,"column":1}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":32},"end":{"line":13,"column":33}},"loc":{"start":{"line":13,"column":52},"end":{"line":16,"column":1}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":17,"column":21},"end":{"line":17,"column":22}},"loc":{"start":{"line":17,"column":41},"end":{"line":20,"column":1}},"line":17},"4":{"name":"(anonymous_4)","decl":{"start":{"line":21,"column":20},"end":{"line":21,"column":21}},"loc":{"start":{"line":21,"column":40},"end":{"line":24,"column":1}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":4,"8":4,"9":1,"10":8,"11":8,"12":1,"13":0,"14":0,"15":1,"16":4,"17":4,"18":1},"f":{"0":1,"1":4,"2":8,"3":0,"4":4},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/indya/Documents/GitHub/analytics-challenge/backend/sessions-routes.ts","sources":["C:/Users/indya/Documents/GitHub/analytics-challenge/backend/sessions-routes.ts"],"names":[],"mappings":";;;;;AAAA,oDAA8B;AAE9B,uCAKoB;AAEpB,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,UAAC,GAAY,EAAE,GAAa;IACzD,IAAM,MAAM,GAAG,iCAAsB,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;IAEnE,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACnB,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,GAAG,CAAC,mBAAmB,EAAE,UAAC,GAAY,EAAE,GAAa;IAC1D,IAAM,MAAM,GAAG,gCAAqB,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;IAElE,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACnB,CAAC,CAAC,CAAC;AACH,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,UAAC,GAAY,EAAE,GAAa;IAC/C,IAAM,MAAM,GAAG,0BAAe,EAAE,CAAC;IAEjC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACnB,CAAC,CAAC,CAAC;AACH,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,UAAC,GAAY,EAAE,GAAa;IAC9C,IAAM,MAAM,GAAG,yBAAc,EAAE,CAAC;IAEhC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACnB,CAAC,CAAC,CAAC;AAEH,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nimport { Request, Response, NextFunction } from \"express\";\r\nimport {\r\n  getLastWeekEventsCount,\r\n  getLastDayEventsCount,\r\n  getTodaysEvents,\r\n  getWeeksEvents,\r\n} from \"./database\";\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get(\"/by-days/:offset\", (req: Request, res: Response) => {\r\n  const events = getLastWeekEventsCount(parseInt(req.params.offset));\r\n\r\n  res.send(events);\r\n});\r\n\r\nrouter.get(\"/by-hours/:offset\", (req: Request, res: Response) => {\r\n  const events = getLastDayEventsCount(parseInt(req.params.offset));\r\n\r\n  res.send(events);\r\n});\r\nrouter.get(\"/today\", (req: Request, res: Response) => {\r\n  const events = getTodaysEvents();\r\n\r\n  res.send(events);\r\n});\r\nrouter.get(\"/week\", (req: Request, res: Response) => {\r\n  const events = getWeeksEvents();\r\n\r\n  res.send(events);\r\n});\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dca6ce42f882dac23ad14d3f7ce1983ab04477f0","contentHash":"3f21bdb34986bd02f813ee4281a83cd2f5bfd990bd180b0e0be6f65416049443"}}